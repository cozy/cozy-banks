!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1756)}([function(e,t,n){e.exports=n(285)},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(354),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,o.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t){function n(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(e){return void n(e)}s.done?t(u):Promise.resolve(u).then(r,i)}e.exports=function(e){return function(){var t=this,r=arguments;return new Promise(function(i,o){var a=e.apply(t,r);function s(e){n(a,i,o,s,u,"next",e)}function u(e){n(a,i,o,s,u,"throw",e)}s(void 0)})}}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(350),o=(r=i)&&r.__esModule?r:{default:r};t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t){e.exports=require("util")},function(e,t){var n=e.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},function(e,t,n){e.exports={default:n(661),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(100),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(674)),i=a(n(678)),o=a(n(100));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,o.default)(t)));e.prototype=(0,i.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t){e.exports=require("stream")},function(e,t,n){var r=n(158);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var r=n(21),i=n(6),o=n(49),a=n(61),s=n(81),u=function(e,t,n){var c,l,f,d=e&u.F,p=e&u.G,h=e&u.S,v=e&u.P,y=e&u.B,g=e&u.W,m=p?i:i[t]||(i[t]={}),b=m.prototype,w=p?r:h?r[t]:(r[t]||{}).prototype;for(c in p&&(n=t),n)(l=!d&&w&&void 0!==w[c])&&s(m,c)||(f=l?w[c]:n[c],m[c]=p&&"function"!=typeof w[c]?n[c]:y&&l?o(f,r):g&&w[c]==f?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(f):v&&"function"==typeof f?o(Function.call,f):f,v&&((m.virtual||(m.virtual={}))[c]=f,e&u.R&&b&&!b[c]&&a(b,c,f)))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,u.U=64,u.R=128,e.exports=u},function(e,t,n){"use strict";var r,i=n(52),o=i.Buffer,a={};for(r in i)i.hasOwnProperty(r)&&"SlowBuffer"!==r&&"Buffer"!==r&&(a[r]=i[r]);var s=a.Buffer={};for(r in o)o.hasOwnProperty(r)&&"allocUnsafe"!==r&&"allocUnsafeSlow"!==r&&(s[r]=o[r]);if(a.Buffer.prototype=o.prototype,s.from&&s.from!==Uint8Array.from||(s.from=function(e,t,n){if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type '+typeof e);if(e&&void 0===e.length)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);return o(e,t,n)}),s.alloc||(s.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError('The "size" argument must be of type number. Received type '+typeof e);if(e<0||e>=2*(1<<30))throw new RangeError('The value "'+e+'" is invalid for option "size"');var r=o(e);return t&&0!==t.length?"string"==typeof n?r.fill(t,n):r.fill(t):r.fill(0),r}),!a.kStringMaxLength)try{a.kStringMaxLength=process.binding("buffer").kStringMaxLength}catch(e){}a.constants||(a.constants={MAX_LENGTH:a.kMaxLength},a.kStringMaxLength&&(a.constants.MAX_STRING_LENGTH=a.kStringMaxLength)),e.exports=a},function(e,t,n){e.exports=n(285)},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(68),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return function(){var t=e.apply(this,arguments);return new o.default(function(e,n){return function r(i,a){try{var s=t[i](a),u=s.value}catch(e){return void n(e)}if(!s.done)return o.default.resolve(u).then(function(e){r("next",e)},function(e){r("throw",e)});e(u)}("next")})}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},,function(e,t,n){var r=n(278);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){r(e,t,n[t])})}return e}},function(e,t,n){var r=n(544),i=n(554),o=n(96),a=n(12),s=n(557);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var r=n(232)("wks"),i=n(164),o=n(21).Symbol,a="function"==typeof o;(e.exports=function(e){return r[e]||(r[e]=a&&o[e]||(a?o:i)("Symbol."+e))}).store=r},function(e,t){e.exports=require("url")},,function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},,function(e,t,n){e.exports=!n(80)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},,function(e){e.exports=JSON.parse('{"0":"uncategorized","100":"potentialTransfer","200":"check","300":"atm","200100":"incomeCat","200110":"activityIncome","200120":"replacementIncome","200130":"interests","200140":"dividends","200150":"donationsReceived","200160":"allocations","200170":"rentalIncome","200180":"additionalIncome","200190":"retirement","400100":"dailyLife","400110":"supermarket","400111":"tobaccoPress","400112":"shoppingECommerce","400120":"consumerLoan","400130":"dressing","400140":"pets","400150":"telecom","400160":"snaksAndworkMeals","400170":"charity","400180":"giftsOffered","400190":"personalCare","400200":"transportation","400205":"vehiculePurchase","400210":"vehiculeLoan","400220":"vehiculeRental","400230":"vehiculeInsurance","400240":"vehiculeMaintenance","400250":"vehiculeGas","400260":"privateParking","400270":"parkingAndToll","400280":"publicTransportation","400290":"taxi","400300":"services","400310":"post","400320":"legalCounsel","400330":"homeAssistance","400340":"bankFees","400350":"financialAdvisor","400400":"kids","400410":"kidsAllowance","400420":"schoolRestaurant","400430":"childCare","400440":"schoolInsurance","400450":"toysAndGifts","400460":"pensionPaid","400470":"kidsActivities","400500":"tax","400510":"incomeTax","400520":"socialTax","400530":"wealthTax","400540":"realEstateTax","400600":"health","400610":"healthExpenses","400620":"healthInsurance","400700":"activities","400710":"activityFees","400720":"activityEquipments","400730":"activityLessons","400740":"electronicsAndMultimedia","400750":"booksMoviesMusic","400760":"hobbyAndPassion","400800":"goingOutAndTravel","400810":"restaurantsAndBars","400820":"goingOutEntertainment","400830":"goingOutCulture","400840":"travel","400850":"journey","400900":"educationAndTraining","400910":"tuition","400920":"eduBooksAndSupplies","400930":"studentLoan","400940":"eduLessons","401000":"homeAndRealEstate","401010":"realEstateLoan","401020":"rent","401030":"homeCharges","401040":"homeInsurance","401050":"homeImprovement","401060":"homeHardware","401070":"water","401080":"power","600100":"excludeFromBudgetCat","600110":"internalTransfer","600120":"creditCardPayment","600130":"loanCredit","600140":"professionalExpenses","600150":"investmentBuySell","600160":"friendBorrowing","600170":"savings"}')},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){const r=n(688),i=n(776),o=n(388),a=n(39),s=n(779),u=n(250),c=n(782),l=n(783),f=n(785),d=n(386),p=n(391),h=n(788),v=n(789),y=n(790);e.exports={Account:r,AdministrativeProcedure:i,Application:o,Document:a,BalanceHistory:s,BankAccount:u,BankingReconciliator:c,BankTransaction:l,BankAccountStats:f,Contact:d,CozyFile:p,CozyFolder:h,Group:v,registerClient:a.registerClient,Permission:y}},,function(e,t){e.exports=function(e){return null!=e&&"object"==typeof e}},function(e,t,n){var r=n(630),i=n(277);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(e,t,n){var r=n(631);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){var r=n(288),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){const r=n(86),i=n(159),o=n(269),a=n(436),s=n(289),u=n(89),c=n(138),l=n(393),f=n(41),d=n(66),p=n(11),{parallelMap:h}=n(689),v=n(399).default,y=n(40).namespace("Document"),g=n(183),m="Database does not exist.";function b(e,t){if(0===Object.keys(e).length)return!0;for(let n in e)if(e[n]!==t[n])return!0;return!1}const w={},_=["shortLabel"];function x(e){return e.startsWith("\\")?e.slice(1):e}const k=e=>a(e,s),O=e=>Object.assign({},e,{_deleted:!0});e.exports=class{static registerClient(e){if(this.cozyClient)throw console.warn("Document already has been registered, this is not possible to re-register as the client is shared globally between all classes. This is to prevent concurrency bugs."),new Error("Document cannot be re-registered to a client.");this.cozyClient=e}static copyWithClient(e){const t=this;class n extends t{}return n.cozyClient=null,n.registerClient(e),n}static usesCozyClient(){return this.cozyClient instanceof v}static getIndex(e,t){if(this.usesCozyClient())throw new Error("This method is not implemented yet with CozyClient");return this.getIndexViaOldClient(e,t)}static getIndexViaOldClient(e,t){const n=`${e}:${t.slice().join(",")}`;return w[n]||(w[n]=this.cozyClient.data.defineIndex(e,t).then(e=>(w[n]=e,e))),Promise.resolve(w[n])}static addCozyMetadata(e){return e.cozyMetadata||(e.cozyMetadata={}),e.cozyMetadata.updatedAt=new Date,!e.cozyMetadata.createdByApp&&this.createdByApp&&(e.cozyMetadata.createdByApp=this.createdByApp),this.createdByApp&&function(e,t){e.updatedByApps||(e.updatedByApps=[]);const n=new Date;for(const r of e.updatedByApps)if(r.slug===t)return void(r.date=n);e.updatedByApps.push({slug:t,date:n})}(e.cozyMetadata,this.createdByApp),e}static async get(e){if(!this.usesCozyClient())throw new Error("This method is not implemented with cozy-client-js");if(!this.doctype)throw new Error("doctype is not defined");return(await this.cozyClient.collection(this.doctype).get(e)).data}static async createOrUpdate(e){return this.usesCozyClient()?this.createOrUpdateViaNewClient(e):this.createOrUpdateViaOldClient(e)}static async createOrUpdateViaNewClient(e){const t=u(this.idAttributes.map(t=>[t,p(e,x(t))]));let n=[];const a=k(t);if(o(a)===this.idAttributes.length&&(n=await this.queryAll(t)),0===n.length)return this.create(this.addCozyMetadata(e));if(1===n.length){const t=r(e,_);if(!this.checkAttributes||b(i(n[0],this.checkAttributes),i(t,this.checkAttributes))){delete t.dateImport;const e=this.addCozyMetadata({...n[0],...t});return this.cozyClient.save(e)}return y("debug",`[createOrUpdate] Didn't update ${n[0]._id} because its \`checkedAttributes\` (${this.checkAttributes}) didn't change.`),n[0]}throw new Error("Create or update with selectors that returns more than 1 result\n"+JSON.stringify(t)+"\n"+JSON.stringify(n))}static async createOrUpdateViaOldClient(e){const t=u(this.idAttributes.map(t=>[t,p(e,x(t))]));let n=[];const a=k(t);if(o(a)===this.idAttributes.length){const e=await this.getIndex(this.doctype,this.idAttributes);n=await this.cozyClient.data.query(e,{selector:t})}if(0===n.length)return this.cozyClient.data.create(this.doctype,this.addCozyMetadata(e));if(1===n.length){const t=n[0]._id,o=r(e,_);return!this.checkAttributes||b(i(n[0],this.checkAttributes),i(o,this.checkAttributes))?(delete o.dateImport,this.cozyClient.data.updateAttributes(this.doctype,t,this.addCozyMetadata(o))):(y("debug",`[bulkSave] Didn't update ${n[0]._id} because its \`checkedAttributes\` (${this.checkAttributes}) didn't change.`),n[0])}throw new Error("Create or update with selectors that returns more than 1 result\n"+JSON.stringify(t)+"\n"+JSON.stringify(n))}static create(e){return this.usesCozyClient()?this.createViaNewClient(e):this.createViaOldClient(e)}static createViaNewClient(e){return this.cozyClient.create(this.doctype,e)}static createViaOldClient(e){return this.cozyClient.data.create(this.doctype,e)}static bulkSave(e,t,n){return h(e,e=>(n&&n(e),this.createOrUpdate(e)),t=t||30)}static query(e,t){if(this.usesCozyClient())throw new Error("This method is not implemented yet with CozyClient");return this.queryViaOldClient(e,t)}static queryViaOldClient(e,t){return this.cozyClient.data.query(e,t)}static async fetchAll(){const e=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient;try{return(await e.fetchJSON("GET",`/data/${this.doctype}/_all_docs?include_docs=true`)).rows.filter(e=>0!==e.id.indexOf("_design")&&e.doc).map(e=>e.doc)}catch(e){return e&&e.response&&e.response.status&&e.response.status,[]}}static async updateAll(e){const t=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient;if(!e||!e.length)return Promise.resolve([]);try{return await t.fetchJSON("POST",`/data/${this.doctype}/_bulk_docs`,{docs:e})}catch(t){if(t.reason&&t.reason.reason&&t.reason.reason==m){const t=await this.create(e[0]),n=await this.updateAll(e.slice(1));return n.unshift({ok:!0,id:t._id,rev:t._rev}),n}throw t}}static async deleteAll(e){return this.updateAll(e.map(O))}static findDuplicates(e){const t=this.idAttributes,n=c(f(e,e=>t.map(t=>p(e,t)).join("#$$$$#")),e=>e.length>1);return l(n,e=>e.slice(1))}static async deleteDuplicates(e){let t=await this.fetchAll();e&&(t=d(t,e));const n=this.findDuplicates(t);return this.deleteAll(n)}static async fetchChanges(e,t={}){const n=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient,r={since:e,include_docs:"true"};t.params&&Object.assign(r,t.params);const i=await n.fetchJSON("GET",`/data/${this.doctype}/_changes?${g.stringify(r)}`),o=i.last_seq;let a=i.results.map(e=>e.doc).filter(Boolean);return t.includeDesign||(a=a.filter(e=>0!==e._id.indexOf("_design"))),t.includeDeleted||(a=a.filter(e=>!e._deleted)),{newLastSeq:o,documents:a}}static async queryAll(e,t){return this.usesCozyClient()?this.queryAllViaNewClient(e):this.queryAllViaOldClient(e,t)}static async queryAllViaNewClient(e){if(!e)return this.fetchAll();const t=[],n=this.cozyClient.find(this.doctype).where(e);let r={next:!0};for(;r&&r.next;)r=await this.cozyClient.query(n.offset(t.length)),t.push(...r.data);return t}static async queryAllViaOldClient(e,t){if(!e)return await this.fetchAll();t||(t=await this.cozyClient.data.defineIndex(this.doctype,Object.keys(e)));const n=[];let r={next:!0};for(;r&&r.next;)r=await this.cozyClient.data.query(t,{selector:e,wholeResponse:!0,skip:n.length}),n.push(...r.docs);return n}static async getAll(e){const t=this.usesCozyClient()?this.cozyClient.stackClient:this.cozyClient;let n;try{n=await t.fetchJSON("POST",`/data/${this.doctype}/_all_docs?include_docs=true`,{keys:e})}catch(e){if(e.message.match(/not_found/))return[];throw e}return n.rows.filter(e=>e.doc).map(e=>e.doc)}}},function(e,t,n){const{filterLevel:r,filterSecrets:i}=n(642),o=n(339),{LOG_LEVEL:a}=process.env;let s=a||"debug";const u=n(643),c=[r,i],l=function(){for(const e of c)if(!1===e.apply(null,arguments))return!0;return!1};function f(e,t,n,r){l(s,e,t,n,r)||console.log(u(e,t,n,r))}f.addFilter=function(e){return c.push(e)},f.setLevel=function(e){s=e};["debug","info","warn","error","ok","critical"].forEach(e=>{f[e]=function(t,n,r){return f(e,t,n,r)}}),e.exports=f,f.setNoRetry=e=>(e?e.no_retry=!0:e={no_retry:!0},e.no_retry),f.Secret=o,f.namespace=function(e){return function(t,n,r,i=e){f(t,n,r,i)}}},function(e,t,n){var r=n(95),i=n(336),o=Object.prototype.hasOwnProperty,a=i(function(e,t,n){o.call(e,n)?e[n].push(t):r(e,n,[t])});e.exports=a},,function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},function(e,t,n){var r=n(46),i=n(341),o=n(229),a=Object.defineProperty;t.f=n(28)?Object.defineProperty:function(e,t,n){if(r(e),t=o(t,!0),r(n),i)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){var r=n(602),i=n(432),o=36e5,a=6e4,s=2,u=/[T ]/,c=/:/,l=/^(\d{2})$/,f=[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],d=/^(\d{4})/,p=[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],h=/^-(\d{2})$/,v=/^-?(\d{3})$/,y=/^-?(\d{2})-?(\d{2})$/,g=/^-?W(\d{2})$/,m=/^-?W(\d{2})-?(\d{1})$/,b=/^(\d{2}([.,]\d*)?)$/,w=/^(\d{2}):?(\d{2}([.,]\d*)?)$/,_=/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,x=/([Z+-].*)$/,k=/^(Z)$/,O=/^([+-])(\d{2})$/,S=/^([+-])(\d{2}):?(\d{2})$/;function E(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var i=7*t+n+1-(r.getUTCDay()||7);return r.setUTCDate(r.getUTCDate()+i),r}e.exports=function(e,t){if(i(e))return new Date(e.getTime());if("string"!=typeof e)return new Date(e);var n=(t||{}).additionalDigits;n=null==n?s:Number(n);var A=function(e){var t,n={},r=e.split(u);if(c.test(r[0])?(n.date=null,t=r[0]):(n.date=r[0],t=r[1]),t){var i=x.exec(t);i?(n.time=t.replace(i[1],""),n.timezone=i[1]):n.time=t}return n}(e),C=function(e,t){var n,r=f[t],i=p[t];if(n=d.exec(e)||i.exec(e)){var o=n[1];return{year:parseInt(o,10),restDateString:e.slice(o.length)}}if(n=l.exec(e)||r.exec(e)){var a=n[1];return{year:100*parseInt(a,10),restDateString:e.slice(a.length)}}return{year:null}}(A.date,n),j=C.year,T=function(e,t){if(null===t)return null;var n,r,i,o;if(0===e.length)return(r=new Date(0)).setUTCFullYear(t),r;if(n=h.exec(e))return r=new Date(0),i=parseInt(n[1],10)-1,r.setUTCFullYear(t,i),r;if(n=v.exec(e)){r=new Date(0);var a=parseInt(n[1],10);return r.setUTCFullYear(t,0,a),r}if(n=y.exec(e)){r=new Date(0),i=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return r.setUTCFullYear(t,i,s),r}if(n=g.exec(e))return o=parseInt(n[1],10)-1,E(t,o);if(n=m.exec(e)){o=parseInt(n[1],10)-1;var u=parseInt(n[2],10)-1;return E(t,o,u)}return null}(C.restDateString,j);if(T){var P,R=T.getTime(),M=0;if(A.time&&(M=function(e){var t,n,r;if(t=b.exec(e))return(n=parseFloat(t[1].replace(",",".")))%24*o;if(t=w.exec(e))return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),n%24*o+r*a;if(t=_.exec(e)){n=parseInt(t[1],10),r=parseInt(t[2],10);var i=parseFloat(t[3].replace(",","."));return n%24*o+r*a+1e3*i}return null}(A.time)),A.timezone)B=A.timezone,P=((z=k.exec(B))?0:(z=O.exec(B))?(F=60*parseInt(z[2],10),"+"===z[1]?-F:F):(z=S.exec(B))?(F=60*parseInt(z[2],10)+parseInt(z[3],10),"+"===z[1]?-F:F):0)*a;else{var I=R+M,D=new Date(I);P=r(D);var N=new Date(I);N.setDate(D.getDate()+1);var L=r(N)-r(D);L>0&&(P+=L)}return new Date(R+M+P)}var B,z,F;return new Date(e)}},function(e,t,n){var r=n(38);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=require("zlib")},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(354),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e,t,n){return t in e?(0,o.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var r=n(121);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("buffer")},,,function(e,t){e.exports=require("path")},function(e,t,n){var r=n(96),i=n(304),o=n(266);e.exports=function(e,t){return o(i(e,t,r),e+"")}},function(e,t,n){var r=n(114),i=n(202);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},function(e,t,n){"use strict";var r=n(30),i=n(395),o=n.n(i),a=n(396),s=n.n(a),u=n(253),c=n.n(u)()(function(e){return window.getComputedStyle(document.body).getPropertyValue("--".concat(e)).trim()});n.d(t,"a",function(){return f}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return y});var l=function(e){return o.a?s.a[e]:c(e)},f={kids:{color:l("azure")},dailyLife:{color:l("melon")},educationAndTraining:{color:l("blazeOrange")},health:{color:l("pomegranate")},homeAndRealEstate:{color:l("mango")},incomeCat:{color:l("emerald")},activities:{color:l("fuchsia")||"#FC4C83"},excludeFromBudgetCat:{color:l("darkPeriwinkle")},services:{color:l("purpley")},tax:{color:l("lightishPurple")},transportation:{color:l("puertoRico")},goingOutAndTravel:{color:l("weirdGreen")},uncategorized:{color:l("coolGrey")}},d=function(e){return Object.keys(r).find(function(t){return r[t]===e})};for(var p in f){var h=f[p];h.name=p,h.id=d(p),h.children={}}var v=new Map(Object.keys(r).map(function(e){return[e,function(e){for(var t=parseInt(e,10),n=10,i=r[t];!f.hasOwnProperty(i);)i=r[t-=t%n],n*=10;return f[i]}(e)]})),y=function(e){var t=v.get(e);return t&&t.name};Object.keys(r).forEach(function(e){var t=r[e],n=y(e);f[n]&&(f[n].children[e]={name:t,color:f[n].color,id:e})});t.b=v},,function(e,t){e.exports=require("fs")},function(e,t,n){var r=n(44),i=n(122);e.exports=n(28)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(230),i=n(226);e.exports=function(e){return r(i(e))}},function(e,t,n){e.exports={default:n(684),__esModule:!0}},function(e,t,n){e.exports={default:n(696),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeDoctype=void 0;var r=D(n(100)),i=D(n(730)),o=D(n(224)),a=D(n(76)),s=D(n(64)),u=D(n(63)),c=D(n(127)),l=D(n(48)),f=D(n(68)),d=D(n(84)),p=D(n(15)),h=D(n(103)),v=D(n(16)),y=D(n(1)),g=D(n(2)),m=D(n(350)),b=D(n(4)),w=(0,h.default)(["/data/","/",""],["/data/","/",""]),_=(0,h.default)(["/data/","/_find"],["/data/","/_find"]),x=(0,h.default)(["/data/","/_all_docs?include_docs=true"],["/data/","/_all_docs?include_docs=true"]),k=(0,h.default)(["/data/","/","?rev=",""],["/data/","/","?rev=",""]),O=(0,h.default)(["/data/","/_index"],["/data/","/_index"]);t.normalizeDoc=N;var S=n(104),E=D(n(174)),A=D(n(742)),C=D(n(445)),j=D(n(86)),T=D(n(743)),P=D(n(297)),R=n(245),M=D(R),I=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(380));function D(e){return e&&e.__esModule?e:{default:e}}function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=e._id||e.id;return(0,b.default)({id:n,_id:n,_type:t},e)}var L=function(e){return(0,m.default)({},e,{_deleted:!0})},B=function(){function e(t,n){(0,y.default)(this,e),this.doctype=t,this.stackClient=n,this.indexes={}}var t,n,h,m,D,B,z,F,U,q,$,H,G;return(0,g.default)(e,[{key:"all",value:(G=(0,v.default)(p.default.mark(function e(){var t,n,r,i,o,a,s,u,c,l,f,d=this,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.limit,n=h.skip,r=void 0===n?0:n,i=h.keys,a=(o=!!i||null===t)?"_all_docs":"_normal_docs",s=(0,S.uri)(w,this.doctype,a),u={include_docs:!0,limit:t,skip:r,keys:i},c=I.buildURL(s,u),l=void 0,e.prev=7,e.next=10,this.stackClient.fetchJSON("GET",c);case 10:l=e.sent,e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(7),e.abrupt("return",(0,R.dontThrowNotFoundError)(e.t0));case 16:return f=void 0,f=o?l.rows.filter(function(e){return e&&null!==e.doc&&!e.error&&!(0,T.default)(e.id,"_design")}).map(function(e){return N(e.doc,d.doctype)}):l.rows.map(function(e){return N(e,d.doctype)}),e.abrupt("return",{data:f,meta:{count:o?f.length:l.total_rows},skip:r,next:r+l.rows.length<l.total_rows});case 19:case"end":return e.stop()}},e,this,[[7,13]])})),function(){return G.apply(this,arguments)})},{key:"find",value:(H=(0,v.default)(p.default.mark(function e(t){var n,r,i,o=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.skip,r=void 0===n?0:n,i=void 0,e.prev=2,e.t0=this.stackClient,e.t1=(0,S.uri)(_,this.doctype),e.next=7,this.toMangoOptions(t,a);case 7:return e.t2=e.sent,e.next=10,e.t0.fetchJSON.call(e.t0,"POST",e.t1,e.t2);case 10:i=e.sent,e.next=16;break;case 13:return e.prev=13,e.t3=e.catch(2),e.abrupt("return",(0,R.dontThrowNotFoundError)(e.t3));case 16:return e.abrupt("return",{data:i.docs.map(function(e){return N(e,o.doctype)}),meta:{count:i.next?r+i.docs.length+1:i.docs.length},next:i.next,skip:r});case 17:case"end":return e.stop()}},e,this,[[2,13]])})),function(e){return H.apply(this,arguments)})},{key:"get",value:($=(0,v.default)(p.default.mark(function e(t){return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.default.get(this.stackClient,(0,S.uri)(w,this.doctype,t),{normalize:this.constructor.normalizeDoctype(this.doctype)}));case 1:case"end":return e.stop()}},e,this)})),function(e){return $.apply(this,arguments)})},{key:"getAll",value:(q=(0,v.default)(p.default.mark(function e(t){var n,r,i=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,e.prev=1,e.next=4,this.stackClient.fetchJSON("POST",(0,S.uri)(x,this.doctype),{keys:t});case 4:n=e.sent,e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",(0,R.dontThrowNotFoundError)(e.t0));case 10:return r=n.rows.filter(function(e){return e.doc}),e.abrupt("return",{data:r.map(function(e){return N(e.doc,i.doctype)}),meta:{count:r.length}});case 12:case"end":return e.stop()}},e,this,[[1,7]])})),function(e){return q.apply(this,arguments)})},{key:"create",value:(U=(0,v.default)(p.default.mark(function e(t){var n,r,i,o,a=t._id,s=(t._type,(0,d.default)(t,["_id","_type"]));return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(n=!!a)?"PUT":"POST",i=(0,S.uri)(w,this.doctype,n?a:""),e.next=5,this.stackClient.fetchJSON(r,i,s);case 5:return o=e.sent,e.abrupt("return",{data:N(o.data,this.doctype)});case 7:case"end":return e.stop()}},e,this)})),function(e){return U.apply(this,arguments)})},{key:"update",value:(F=(0,v.default)(p.default.mark(function e(t){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PUT",(0,S.uri)(w,this.doctype,t._id),t);case 2:return n=e.sent,e.abrupt("return",{data:N(n.data,this.doctype)});case 4:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)})},{key:"destroy",value:(z=(0,v.default)(p.default.mark(function e(t){var n,r=t._id,i=t._rev,o=(0,d.default)(t,["_id","_rev"]);return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("DELETE",(0,S.uri)(k,this.doctype,r,i));case 2:return n=e.sent,e.abrupt("return",{data:N((0,b.default)({},o,{_id:r,_rev:n.rev,_deleted:!0}),this.doctype)});case 4:case"end":return e.stop()}},e,this)})),function(e){return z.apply(this,arguments)})},{key:"updateAll",value:(B=(0,v.default)(p.default.mark(function e(t){var n,r,i,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.stackClient,t&&t.length){e.next=3;break}return e.abrupt("return",f.default.resolve([]));case 3:return e.prev=3,e.next=6,n.fetchJSON("POST","/data/"+this.doctype+"/_bulk_docs",{docs:t});case 6:return r=e.sent,e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(3),!e.t0.reason||!e.t0.reason.reason||"Database does not exist."!==e.t0.reason.reason){e.next=23;break}return e.next=15,this.create(t[0]);case 15:return i=e.sent,e.next=18,this.updateAll(t.slice(1));case 18:return(o=e.sent).unshift({ok:!0,id:i._id,rev:i._rev}),e.abrupt("return",o);case 23:throw e.t0;case 24:case"end":return e.stop()}},e,this,[[3,10]])})),function(e){return B.apply(this,arguments)})},{key:"destroyAll",value:function(e){return this.updateAll(e.map(L))}},{key:"toMangoOptions",value:(D=(0,v.default)(p.default.mark(function e(t){var n,r,i,o,f,d,h,v,y,g,m,b,w,_,x,k,O=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=O.sort,r=O.indexedFields,i=O.fields,o=O.skip,f=void 0===o?0:o,d=O.limit,n&&!Array.isArray(n)&&(console.warn('Passing an object to the "sort" is deprecated, please use an array instead.'),n=(0,A.default)(n,function(e,t,n){return e.push((0,l.default)({},n,t))},[])),r=r||this.getIndexFields({sort:n,selector:t}),e.t0=O.indexId,e.t0){e.next=9;break}return e.next=8,this.getIndexId(r);case 8:e.t0=e.sent;case 9:if(h=e.t0,!n){e.next=35;break}if(!((v=(0,E.default)(n.map(function(e){return(0,C.default)((0,c.default)(e))}))).length>1)){e.next=14;break}throw new Error("Mango sort can only use a single order (asc or desc).");case 14:for(y=v.length>0?(0,C.default)(v):"asc",g=function(e){n.find(function(t){return(0,C.default)((0,u.default)(t))===e})||n.push((0,l.default)({},e,y))},m=!0,b=!1,w=void 0,e.prev=19,_=(0,s.default)(r);!(m=(x=_.next()).done);m=!0)k=x.value,g(k);e.next=27;break;case 23:e.prev=23,e.t1=e.catch(19),b=!0,w=e.t1;case 27:e.prev=27,e.prev=28,!m&&_.return&&_.return();case 30:if(e.prev=30,!b){e.next=33;break}throw w;case 33:return e.finish(30);case 34:return e.finish(27);case 35:return e.abrupt("return",{selector:t,use_index:h,fields:i?[].concat((0,a.default)(i),["_id","_type","class"]):void 0,limit:d,skip:f,sort:n});case 36:case"end":return e.stop()}},e,this,[[19,23,27,35],[28,,30,34]])})),function(e){return D.apply(this,arguments)})},{key:"checkUniquenessOf",value:(m=(0,v.default)(p.default.mark(function e(t,n){var r,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUniqueIndexId(t);case 2:return r=e.sent,e.next=5,this.find((0,l.default)({},t,n),{indexId:r,fields:["_id"]});case 5:return i=e.sent,e.abrupt("return",0===i.data.length);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return m.apply(this,arguments)})},{key:"getUniqueIndexId",value:function(e){return this.getIndexId([e],this.doctype+"/"+e)}},{key:"getIndexId",value:(h=(0,v.default)(p.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getIndexNameFromFields(t);return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.indexes[n]){e.next=4;break}return e.next=3,this.createIndex(t);case 3:this.indexes[n]=e.sent;case 4:return e.abrupt("return",this.indexes[n].id);case 5:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"createIndex",value:(n=(0,v.default)(p.default.mark(function e(t){var n,r,i,o,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={index:{fields:t}},e.next=3,this.stackClient.fetchJSON("POST",(0,S.uri)(O,this.doctype),n);case 3:if(r=e.sent,i={id:r.id,fields:t},"exists"!==r.result){e.next=7;break}return e.abrupt("return",i);case 7:return o=(0,l.default)({},t[0],{$gt:null}),a={indexId:i.id},e.next=11,(0,S.attempt)(this.find(o,a));case 11:if(!e.sent){e.next=13;break}return e.abrupt("return",i);case 13:return e.next=15,(0,S.sleep)(1e3);case 15:return e.next=17,(0,S.attempt)(this.find(o,a));case 17:if(!e.sent){e.next=19;break}return e.abrupt("return",i);case 19:return e.next=21,(0,S.sleep)(500);case 21:return e.abrupt("return",i);case 22:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"getIndexNameFromFields",value:function(e){return"by_"+e.join("_and_")}},{key:"getIndexFields",value:function(e){var t=e.selector,n=e.sort,r=void 0===n?[]:n;return(0,o.default)(new i.default([].concat((0,a.default)(r.map(function(e){return(0,C.default)((0,u.default)(e))})),(0,a.default)((0,u.default)(t)))))}},{key:"fetchChanges",value:(t=(0,v.default)(p.default.mark(function e(){var t,n,i,o,a,s,c,l,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.doc_ids&&f.doc_ids.length>0,n="","object"!==(void 0===f?"undefined":(0,r.default)(f))?(n="?include_docs=true&since="+f,console.warn('fetchChanges use couchOptions as Object not a string, since is deprecated, please use fetchChanges({include_docs: true, since: "'+f+'"}).')):(0,u.default)(f).length>0&&(n="?"+[P.default.stringify((0,j.default)(f,"doc_ids")),t&&void 0===f.filter?"filter=_doc_ids":void 0].filter(Boolean).join("&")),i=t?"POST":"GET",o="/data/"+this.doctype+"/_changes"+n,a=t?{doc_ids:f.doc_ids}:void 0,e.next=8,this.stackClient.fetchJSON(i,o,a);case 8:return s=e.sent,c=s.last_seq,l=s.results.map(function(e){return e.doc}).filter(Boolean),d.includeDesign||(l=l.filter(function(e){return 0!==e._id.indexOf("_design")})),d.includeDeleted||(l=l.filter(function(e){return!e._deleted})),e.abrupt("return",{newLastSeq:c,documents:l});case 14:case"end":return e.stop()}},e,this)})),function(){return t.apply(this,arguments)})}],[{key:"normalizeDoctype",value:function(e){return this.normalizeDoctypeRawApi(e)}},{key:"normalizeDoctypeJsonApi",value:function(e){return function(t,n){return N(t,e)}}},{key:"normalizeDoctypeRawApi",value:function(e){return function(t,n){return N(n,e)}}}]),e}();t.default=B;t.normalizeDoctype=B.normalizeDoctype},function(e,t,n){var r=n(115),i=n(598),o=n(56),a=n(146),s=o(function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])});e.exports=s},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={default:n(698),__esModule:!0}},function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"c",function(){return x}),n.d(t,"d",function(){return k}),n.d(t,"b",function(){return O}),n.d(t,"e",function(){return S}),n.d(t,"f",function(){return C});var r=n(19),i=n.n(r),o=n(72),a=n.n(o),s=n(17),u=n.n(s),c=n(25),l=n.n(c),f=n(35),d=n.n(f),p=n(26),h=n.n(p),v=n(36),y=n.n(v),g=n(89),m=n.n(g),b=n(106),w=n.n(b),_="io.cozy.bank.accounts",x="io.cozy.bank.groups",k="io.cozy.bank.operations",O="io.cozy.bills",S="io.cozy.triggers",E=function(e){function t(){return u()(this,t),d()(this,h()(t).apply(this,arguments))}return y()(t,e),l()(t,[{key:"data",get:function(){var e=this;return this.raw?this.raw.map(function(t){var n=t.split(":"),r=a()(n,2),i=r[0],o=r[1];return e.get(i,o)}):[]}}],[{key:"query",value:function(e,t,n){var r=e[n.name];if(!r||!r.length)return null;var i=r.indexOf(":")?r.map(function(e){return e.split(":")[1]}):r,o=m()(i.map(function(e){return[e,t.getDocumentFromState(n.doctype,e)]})),a=Object.keys(o).filter(function(e){return!o[e]});return a&&a.length?new b.QueryDefinition({doctype:n.doctype,ids:a}):Object.values(o)}}]),t}(b.HasManyInPlace),A=function(e){function t(){return u()(this,t),d()(this,h()(t).apply(this,arguments))}return y()(t,e),l()(t,[{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){var e=this;return(this.raw||[]).map(function(t){return t.billId?i()({},t,{bill:e.get("io.cozy.bills",t.billId.split(":")[1])}):t})}}],[{key:"query",value:function(e,t,n){var r=e[n.name];if(!r||!r.length)return null;var i=r.map(function(e){return e.billId&&e.billId.split(":")[1]}).filter(Boolean);return new b.QueryDefinition({doctype:n.doctype,ids:i})}}]),t}(b.HasManyInPlace),C={transactions:{doctype:k,attributes:{},relationships:{account:{type:"belongs-to-in-place",doctype:_},bills:{type:E,doctype:O},reimbursements:{type:A,doctype:O}}},bills:{doctype:O},settings:{doctype:"io.cozy.bank.settings",attributes:{},relationships:{}},bankAccounts:{doctype:_,attributes:{},relationships:{checkingsAccount:{type:"has-one",doctype:_}}},groups:{doctype:x,attributes:{},relationships:{accounts:{type:b.HasManyInPlace,doctype:_}}},triggers:{doctype:S,attributes:{},relationships:{}},apps:{doctype:"io.cozy.apps",attributes:{},relationships:{}},konnectors:{doctype:"io.cozy.konnectors",attributes:{},relationships:{}},stats:{doctype:"io.cozy.bank.accounts.stats",attributes:{},relationships:{account:{type:"has-one",doctype:_}}}};w.a.fetchPolicies.olderThan(3e4)},,function(e,t,n){var r=n(95),i=n(336)(function(e,t,n){r(e,n,t)});e.exports=i},function(e,t,n){var r=n(633),i=n(634),o=n(635);e.exports=function(e,t){return r(e)||i(e,t)||o()}},function(e,t,n){var r=n(94),i=n(470),o=n(471),a="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?s:a:u&&u in Object(e)?i(e):o(e)}},function(e,t,n){var r=n(305),i=n(281),o=n(57);e.exports=function(e){return o(e)?r(e):i(e)}},,function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(224),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,o.default)(e)}},function(e,t,n){var r=n(493),i=n(496);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},function(e,t,n){var r=n(186),i=n(95);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,u=t.length;++s<u;){var c=t[s],l=o?o(n[c],e[c],c,n,e):void 0;void 0===l&&(l=e[c]),a?i(n,c,l):r(n,c,l)}return n}},function(e,t,n){"use strict";var r=n(652)(!0);n(227)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(226);e.exports=function(e){return Object(r(e))}},function(e,t,n){"use strict";var r=n(50)(n(223));function i(e){Array.isArray(e)&&e.forEach(function(e){return(0,r.default)(e,!0)})}"undefined"!=typeof window&&(r.default.connect=n(647).default,r.default.FlagSwitcher=n(650).default),i([]),r.default.enable=i,e.exports=r.default},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryDefinition=t.MutationTypes=t.Mutations=t.getDoctypeFromOperation=t.uploadFile=t.removeReferencedBy=t.addReferencedBy=t.removeReferencesTo=t.addReferencesTo=t.deleteDocument=t.updateDocument=t.createDocument=void 0;var r=a(n(4)),i=a(n(1)),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var s=n(198),u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.doctype,r=t.id,o=t.ids,a=t.selector,s=t.fields,u=t.indexedFields,c=t.sort,l=t.includes,f=t.referenced,d=t.limit,p=t.skip,h=t.cursor;(0,i.default)(this,e),this.doctype=n,this.id=r,this.ids=o,this.selector=a,this.fields=s,this.indexedFields=u,this.sort=c,this.includes=l,this.referenced=f,this.limit=d,this.skip=p,this.cursor=h}return(0,o.default)(e,[{key:"getById",value:function(t){return new e((0,r.default)({},this.toDefinition(),{id:t}))}},{key:"getByIds",value:function(t){return new e((0,r.default)({},this.toDefinition(),{ids:t}))}},{key:"where",value:function(t){return new e((0,r.default)({},this.toDefinition(),{selector:t}))}},{key:"select",value:function(t){return new e((0,r.default)({},this.toDefinition(),{fields:t}))}},{key:"indexFields",value:function(t){return new e((0,r.default)({},this.toDefinition(),{indexedFields:t}))}},{key:"sortBy",value:function(t){if(s(t))throw new Error('Invalid sort, should be an object (`{ label: "desc"}`), you passed a string.');return new e((0,r.default)({},this.toDefinition(),{sort:t}))}},{key:"include",value:function(t){if(!Array.isArray(t))throw new Error("include() takes an array of relationship names");return new e((0,r.default)({},this.toDefinition(),{includes:t}))}},{key:"limitBy",value:function(t){return new e((0,r.default)({},this.toDefinition(),{limit:t}))}},{key:"UNSAFE_noLimit",value:function(){return new e((0,r.default)({},this.toDefinition(),{limit:null}))}},{key:"offset",value:function(t){return new e((0,r.default)({},this.toDefinition(),{skip:t}))}},{key:"offsetCursor",value:function(t){return new e((0,r.default)({},this.toDefinition(),{cursor:t}))}},{key:"referencedBy",value:function(t){return new e((0,r.default)({},this.toDefinition(),{referenced:t}))}},{key:"toDefinition",value:function(){return{doctype:this.doctype,id:this.id,ids:this.ids,selector:this.selector,fields:this.fields,indexedFields:this.indexedFields,sort:this.sort,includes:this.includes,referenced:this.referenced,limit:this.limit,skip:this.skip,cursor:this.cursor}}}]),e}(),c=t.createDocument=function(e){return{mutationType:g.CREATE_DOCUMENT,document:e}},l=t.updateDocument=function(e){return{mutationType:g.UPDATE_DOCUMENT,document:e}},f=t.deleteDocument=function(e){return{mutationType:g.DELETE_DOCUMENT,document:e}},d=t.addReferencesTo=function(e,t){return{mutationType:g.ADD_REFERENCES_TO,referencedDocuments:t,document:e}},p=t.removeReferencesTo=function(e,t){return{mutationType:g.REMOVE_REFERENCES_TO,referencedDocuments:t,document:e}},h=t.addReferencedBy=function(e,t){return{mutationType:g.ADD_REFERENCED_BY,referencedDocuments:t,document:e}},v=t.removeReferencedBy=function(e,t){return{mutationType:g.REMOVE_REFERENCED_BY,referencedDocuments:t,document:e}},y=t.uploadFile=function(e,t){return{mutationType:g.UPLOAD_FILE,file:e,dirPath:t}},g=(t.getDoctypeFromOperation=function(e){if(!e.mutationType)return e.doctype;var t=e.mutationType;switch(t){case"CREATE_DOCUMENT":case"UPDATE_DOCUMENT":case"DELETE_DOCUMENT":return e.document._type;case"ADD_REFERENCES_TO":case"UPLOAD_FILE":throw new Error("Not implemented");default:throw new Error("Unknown mutationType "+t)}},t.Mutations={createDocument:c,updateDocument:l,deleteDocument:f,addReferencesTo:d,removeReferencesTo:p,addReferencedBy:h,removeReferencedBy:v,uploadFile:y},t.MutationTypes={CREATE_DOCUMENT:"CREATE_DOCUMENT",UPDATE_DOCUMENT:"UPDATE_DOCUMENT",DELETE_DOCUMENT:"DELETE_DOCUMENT",ADD_REFERENCES_TO:"ADD_REFERENCES_TO",REMOVE_REFERENCES_TO:"REMOVE_REFERENCES_TO",ADD_REFERENCED_BY:"ADD_REFERENCED_BY",REMOVE_REFERENCED_BY:"REMOVE_REFERENCED_BY",UPLOAD_FILE:"UPLOAD_FILE"});t.QueryDefinition=u},function(e,t,n){var r=n(43),i=n(435),o=n(616),a=n(97),s=n(78),u=n(618),c=n(190),l=n(219),f=c(function(e,t){var n={};if(null==e)return n;var c=!1;t=r(t,function(t){return t=a(t,e),c||(c=t.length>1),t}),s(e,l(e),n),c&&(n=i(n,7,u));for(var f=t.length;f--;)o(n,t[f]);return n});e.exports=f},function(e,t){e.exports=function(e){return function(t){return e(t)}}},function(e,t,n){var r=n(214);e.exports=function(e){return null==e?"":r(e)}},function(e,t){e.exports=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}},,function(e,t,n){var r=n(73),i=n(34),o="[object Symbol]";e.exports=function(e){return"symbol"==typeof e||i(e)&&r(e)==o}},function(e,t,n){var r=n(91),i=1/0;e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},function(e,t){e.exports=require("https")},function(e,t,n){var r=n(37).Symbol;e.exports=r},function(e,t,n){var r=n(301);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t){e.exports=function(e){return e}},function(e,t,n){var r=n(12),i=n(213),o=n(455),a=n(88);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},function(e,t){e.exports={}},function(e,t,n){var r=n(344),i=n(233);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";t.__esModule=!0;var r=a(n(663)),i=a(n(667)),o="function"==typeof i.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":typeof e};function a(e){return e&&e.__esModule?e:{default:e}}t.default="function"==typeof i.default&&"symbol"===o(r.default)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof i.default&&e.constructor===i.default&&e!==i.default.prototype?"symbol":void 0===e?"undefined":o(e)}},function(e,t,n){n(665);for(var r=n(21),i=n(61),o=n(98),a=n(22)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),u=0;u<s.length;u++){var c=s[u],l=r[c],f=l&&l.prototype;f&&!f[a]&&i(f,a,c),o[c]=o.Array}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t,n,i,o){(0,r.default)(this,e);var a=o.dispatch,s=o.get,u=o.query,c=o.mutate,l=o.save;this.target=t,this.name=n,this.doctype=i,this.get=s,this.query=u,this.mutate=c,this.save=l,this.dispatch=a}return(0,i.default)(e,[{key:"raw",get:function(){throw new Error("A relationship must define its raw getter")}},{key:"data",get:function(){throw new Error("A relationship must define its data getter")}}],[{key:"query",value:function(){throw new Error("A custom relationship must define its query() function")}}]),e}();t.default=a},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(736)),i=o(n(739));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){return(0,i.default)((0,r.default)(e,{raw:{value:(0,i.default)(t)}}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceFileDownload=t.slugify=t.sleep=t.attempt=t.uri=void 0;var r,i=n(68),o=(r=i)&&r.__esModule?r:{default:r};t.uri=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=[e[0]],o=0;o<n.length;o++)i.push(encodeURIComponent(n[o])+e[o+1]);return i.join("")},t.attempt=function(e){return e.then(function(){return!0}).catch(function(){return!1})},t.sleep=function(e,t){return new o.default(function(n){setTimeout(n,e,t)})},t.slugify=function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},t.forceFileDownload=function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n)}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.manifest=t.Registry=t.getQueryFromState=t.cancelable=t.dehydrate=t.HasManyTriggers=t.HasManyInPlace=t.HasOneInPlace=t.HasOne=t.HasMany=t.Association=t.getDoctypeFromOperation=t.MutationTypes=t.Mutations=t.QueryDefinition=t.compose=t.StackLink=t.CozyLink=t.default=void 0;var r=n(399);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return h(r).default}});var i=n(257);Object.defineProperty(t,"CozyLink",{enumerable:!0,get:function(){return h(i).default}});var o=n(400);Object.defineProperty(t,"StackLink",{enumerable:!0,get:function(){return h(o).default}});var a=n(461);Object.defineProperty(t,"compose",{enumerable:!0,get:function(){return h(a).default}});var s=n(85);Object.defineProperty(t,"QueryDefinition",{enumerable:!0,get:function(){return s.QueryDefinition}}),Object.defineProperty(t,"Mutations",{enumerable:!0,get:function(){return s.Mutations}}),Object.defineProperty(t,"MutationTypes",{enumerable:!0,get:function(){return s.MutationTypes}}),Object.defineProperty(t,"getDoctypeFromOperation",{enumerable:!0,get:function(){return s.getDoctypeFromOperation}});var u=n(178);Object.defineProperty(t,"Association",{enumerable:!0,get:function(){return u.Association}}),Object.defineProperty(t,"HasMany",{enumerable:!0,get:function(){return u.HasMany}}),Object.defineProperty(t,"HasOne",{enumerable:!0,get:function(){return u.HasOne}}),Object.defineProperty(t,"HasOneInPlace",{enumerable:!0,get:function(){return u.HasOneInPlace}}),Object.defineProperty(t,"HasManyInPlace",{enumerable:!0,get:function(){return u.HasManyInPlace}}),Object.defineProperty(t,"HasManyTriggers",{enumerable:!0,get:function(){return u.HasManyTriggers}});var c=n(401);Object.defineProperty(t,"dehydrate",{enumerable:!0,get:function(){return c.dehydrate}});var l=n(944);Object.defineProperty(t,"cancelable",{enumerable:!0,get:function(){return l.cancelable}});var f=n(131);Object.defineProperty(t,"getQueryFromState",{enumerable:!0,get:function(){return f.getQueryFromState}});var d=n(945);Object.defineProperty(t,"Registry",{enumerable:!0,get:function(){return h(d).default}});var p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(949));function h(e){return e&&e.__esModule?e:{default:e}}t.manifest=p},function(e,t,n){var r=n(115);e.exports=function(e){return null!=e&&e.length?r(e,1):[]}},function(e,t){e.exports=function(e,t){return e===t||e!=e&&t!=t}},function(e,t,n){var r=n(551),i=n(207),o=n(552),a=n(324),s=n(309),u=n(73),c=n(302),l=c(r),f=c(i),d=c(o),p=c(a),h=c(s),v=u;(r&&"[object DataView]"!=v(new r(new ArrayBuffer(1)))||i&&"[object Map]"!=v(new i)||o&&"[object Promise]"!=v(o.resolve())||a&&"[object Set]"!=v(new a)||s&&"[object WeakMap]"!=v(new s))&&(v=function(e){var t=u(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case l:return"[object DataView]";case f:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case h:return"[object WeakMap]"}return t}),e.exports=v},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"getParent",function(){return l}),n.d(t,"getTransactionsByCategory",function(){return p}),n.d(t,"getCategoryId",function(){return h}),n.d(t,"getParentCategory",function(){return v}),n.d(t,"isAwaitingCategorization",function(){return y}),n.d(t,"isHealthExpense",function(){return g}),n.d(t,"isHealth",function(){return m}),n.d(t,"getTransactionsTotal",function(){return w}),n.d(t,"getGlobalCurrency",function(){return _});var r=n(19),i=n.n(r),o=n(83),a=n.n(o),s=n(58),u=n(30),c=n(32);n.d(t,"getCategoryIdFromName",function(){return s.c});var l=s.b.get.bind(s.b),f=function(e){return{id:e.id,name:e.name,color:e.color,transactions:[],subcategories:{}}},d=function(e){return{id:e,name:u[e],transactions:[]}},p=function(e){for(var t={},n=0,r=Object.keys(s.a);n<r.length;n++){var o=r[n],a=i()({name:o},s.a[o]);t[o]=f(a)}var u=!0,c=!1,p=void 0;try{for(var v,g=e[Symbol.iterator]();!(u=(v=g.next()).done);u=!0){var m=v.value;if(!y(m)){var b=h(m),w=l(b)||l("0");t.hasOwnProperty(w.name)||(t[w.name]=f(w));var _=t[w.name];_.subcategories.hasOwnProperty(b)||(_.subcategories[b]=d(b));var x=_.subcategories[b];_.transactions.push(m),x.transactions.push(m)}}}catch(e){c=!0,p=e}finally{try{u||null==g.return||g.return()}finally{if(c)throw p}}return t},h=function(e){var t=a()("local-model-override");return c.BankTransaction.getCategoryId(e,{localModelOverride:t})},v=function(e){return l(h(e))},y=function(e){return null===h(e)},g=function(e){return"400610"===h(e)&&e.amount<0},m=function(e){var t=h(e);return"400600"===t||"400610"===t||"400620"===t},b=function(e,t){return t.percentage!==e.percentage?t.percentage-e.percentage:e.amount-t.amount},w=function(e){var t=0;if(0!==e.length){var n=e.reduce(function(e,t){return e+Math.abs(t.amount)},0),r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value;u.percentage=Math.round(Math.abs(u.amount)/n*100);var c=u.subcategories.reduce(function(e,t){return e+Math.abs(t.amount)},0),l=!0,f=!1,d=void 0;try{for(var p,h=u.subcategories[Symbol.iterator]();!(l=(p=h.next()).done);l=!0){var v=p.value;v.percentage=0===c?100:Math.round(Math.abs(v.amount)/c*100)}}catch(e){f=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(f)throw d}}u.subcategories=u.subcategories.sort(b),t+=u.amount}}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}}return t},_=function(e){var t;return e.length>0&&(t=e[0].currency),t||(t=""),t}},function(e,t,n){var r=n(73),i=n(31),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(e){if(!i(e))return!1;var t=r(e);return t==a||t==s||t==o||t==u}},function(e,t,n){var r=n(195),i=n(559);e.exports=function e(t,n,o,a,s){var u=-1,c=t.length;for(o||(o=i),s||(s=[]);++u<c;){var l=t[u];n>0&&o(l)?n>1?e(l,n-1,o,a,s):r(s,l):a||(s[s.length]=l)}return s}},,function(e,t,n){(function(e){var r=n(37),i=n(500),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;e.exports=u}).call(this,n(67)(e))},function(e,t,n){var r=n(305),i=n(503),o=n(57);e.exports=function(e){return o(e)?r(e,!0):i(e)}},function(e,t,n){var r=n(57),i=n(34);e.exports=function(e){return i(e)&&r(e)}},function(e,t){e.exports=!0},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var r=n(44).f,i=n(81),o=n(22)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){var r=n(49),i=n(347),o=n(348),a=n(46),s=n(163),u=n(234),c={},l={};(t=e.exports=function(e,t,n,f,d){var p,h,v,y,g=d?function(){return e}:u(e),m=r(n,f,t?2:1),b=0;if("function"!=typeof g)throw TypeError(e+" is not iterable!");if(o(g)){for(p=s(e.length);p>b;b++)if((y=t?m(a(h=e[b])[0],h[1]):m(e[b]))===c||y===l)return y}else for(v=g.call(e);!(h=v.next()).done;)if((y=i(v,m,h.value,t))===c||y===l)return y}).BREAK=c,t.RETURN=l},function(e,t,n){e.exports={default:n(715),__esModule:!0}},function(e,t,n){var r=n(20),i=n(624);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):0}},,function(e,t,n){var r=n(95),i=n(206),o=n(20);e.exports=function(e,t){var n={};return t=o(t,3),i(e,function(e,i,o){r(n,i,t(e,i,o))}),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMutationError=t.receiveMutationResult=t.initMutation=t.receiveQueryError=t.receiveQueryResult=t.initQuery=t.getRawQueryFromState=t.getQueryFromState=t.getQueryFromStore=t.getDocumentFromState=t.getCollectionFromState=t.getStateRoot=t.createStore=t.StoreProxy=void 0;var r=h(n(48)),i=h(n(4)),o=h(n(1)),a=h(n(2)),s=n(370);Object.defineProperty(t,"initQuery",{enumerable:!0,get:function(){return s.initQuery}}),Object.defineProperty(t,"receiveQueryResult",{enumerable:!0,get:function(){return s.receiveQueryResult}}),Object.defineProperty(t,"receiveQueryError",{enumerable:!0,get:function(){return s.receiveQueryError}});var u=n(244);Object.defineProperty(t,"initMutation",{enumerable:!0,get:function(){return u.initMutation}}),Object.defineProperty(t,"receiveMutationResult",{enumerable:!0,get:function(){return u.receiveMutationResult}}),Object.defineProperty(t,"receiveMutationError",{enumerable:!0,get:function(){return u.receiveMutationError}});var c=n(791),l=h(n(724)),f=n(373),d=h(f),p=h(s);function h(e){return e&&e.__esModule?e:{default:e}}var v=t.StoreProxy=function(){function e(t){(0,o.default)(this,e),this.state=t}return(0,a.default)(e,[{key:"readDocument",value:function(e,t){return this.state.documents[e][t]}},{key:"writeDocument",value:function(e){this.setState(function(t){return(0,i.default)({},t,{documents:(0,i.default)({},t.documents,(0,r.default)({},e._type,(0,i.default)({},t.documents[e._type],(0,r.default)({},e._id,e))))})})}},{key:"setState",value:function(e){this.state=e(this.state)}},{key:"getState",value:function(){return this.state}}]),e}(),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{documents:{},queries:{}},t=arguments[1];if(!(0,s.isQueryAction)(t)&&!(0,u.isMutationAction)(t))return e;if(t.update){var n=new v(e);return t.update(n,t.response),{documents:n.getState().documents,queries:(0,p.default)(n.getState().queries,t,n.getState().documents)}}var r=(0,d.default)(e.documents,t),i=r!==e.documents;return{documents:r,queries:(0,p.default)(e.queries,t,r,i)}};t.default=y;t.createStore=function(){return(0,c.createStore)((0,c.combineReducers)({cozy:y}),(0,c.applyMiddleware)(l.default))};var g=t.getStateRoot=function(e){return e.cozy||{}},m=(t.getCollectionFromState=function(e,t){return(0,f.getCollectionFromSlice)(g(e).documents,t)},t.getDocumentFromState=function(e,t,n){return(0,f.getDocumentFromSlice)(g(e).documents,t,n)},t.getQueryFromStore=function(e,t){return m(e.getState(),t)},t.getQueryFromState=function(e,t){return(0,s.getQueryFromSlice)(g(e).queries,t,g(e).documents)});t.getRawQueryFromState=function(e,t){return(0,s.getQueryFromSlice)(g(e).queries,t)}},,,function(e,t){var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(e,t){var i=typeof e;return!!(t=null==t?n:t)&&("number"==i||"symbol"!=i&&r.test(e))&&e>-1&&e%1==0&&e<t}},function(e,t,n){var r=n(31),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},function(e,t,n){var r=n(206),i=n(514)(r);e.exports=i},,function(e,t,n){var r=n(43),i=n(20),o=n(329),a=n(219);e.exports=function(e,t){if(null==e)return{};var n=r(a(e),function(e){return[e]});return t=i(t),o(e,n,function(e,n){return t(e,n[0])})}},function(e,t,n){"use strict";n.d(t,"b",function(){return x}),n.d(t,"a",function(){return k}),n.d(t,"c",function(){return E}),n.d(t,"f",function(){return A}),n.d(t,"g",function(){return T}),n.d(t,"d",function(){return P}),n.d(t,"e",function(){return R});n(448),n(955);var r=n(11),i=n.n(r),o=n(128),a=n.n(o),s=n(83),u=n.n(s),c=n(45),l=n.n(c),f=n(447),d=n.n(f),p=n(113),h=/\bPRLV SEPA RECU RCUR\b/,v=/\b\d{5,}\b/g,y=/\b[A-Z]*\d+[A-Z]*\b/g,g=/\b[A-Z\d]{15,}\b/g,m=/[-:++]/g,b=/\s+/g,w=u()("clean-label")?function(e){return e.replace(h," ").replace(v," ").replace(y,"").replace(m,"").replace(g,"").replace(b," ").trim()}:function(e){return e},_=/(?:^|\s)\S/g,x=function(e){return w(e.label.toLowerCase().replace(_,function(e){return e.toUpperCase()}))},k=function(e){return function(e){return"CreditCard"===O(e)&&e.realisationDate?e.realisationDate:e.date}(e).slice(0,10)},O=function(e){return i()(e,"account.data.type")},S=function(e){return i()(e,"reimbursements.data")},E=function(e){if(!(e.amount<0))throw new Error("Can't get the reimbursed amount of a debit transaction");if(!function(e){var t=S(e);return!!t&&t.length>0}(e))return 0;var t=S(e);return a()(t,function(e){return e.amount})},A=function(e){return parseInt(e._rev.split("-").shift(),10)<=2},C=function(e){return Object(p.isHealthExpense)(e)?j(e):e.reimbursementStatus||"no-reimbursement"},j=function(e){return e.reimbursementStatus?e.reimbursementStatus:E(t=e)===-t.amount?"reimbursed":"pending";var t},T=function(e){if(!Object(p.isHealthExpense)(e))return!1;if("pending"!==C(e))return!1;var t=l()(k(e)),n=new Date;return d()(n,t)>u()("late-health-reimbursement-limit")},P=function(e){return"pending"===C(e)},R=function(e,t){return Boolean(i()(e,"cozyMetadata.notifications.".concat(t.settingKey)))}},,function(e,t,n){e.exports=n(777)()},,,,,function(e,t,n){var r=n(108),i=n(57),o=n(134),a=n(31);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},function(e,t,n){var r=n(499),i=n(34),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=u},function(e,t,n){var r=n(501),i=n(87),o=n(203),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t,n){var r=n(151),i=n(525),o=n(526),a=n(527),s=n(528),u=n(529);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,e.exports=c},function(e,t,n){var r=n(520),i=n(521),o=n(522),a=n(523),s=n(524);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(108);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},function(e,t,n){var r=n(77)(Object,"create");e.exports=r},function(e,t,n){var r=n(538);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},function(e,t,n){var r=n(307)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(208),i=n(547),o=n(548);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(97),i=n(92);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},function(e,t,n){var r=n(560),i=n(190)(function(e,t){return null==e?{}:r(e,t)});e.exports=i},function(e,t,n){var r=n(156),i=n(188),o=n(216),a=n(157),s=n(561),u=n(210),c=200;e.exports=function(e,t,n){var l=-1,f=i,d=e.length,p=!0,h=[],v=h;if(n)p=!1,f=o;else if(d>=c){var y=t?null:s(e);if(y)return u(y);p=!1,f=a,v=new r}else v=t?[]:h;e:for(;++l<d;){var g=e[l],m=t?t(g):g;if(g=n||0!==g?g:0,p&&m==m){for(var b=v.length;b--;)if(v[b]===m)continue e;t&&v.push(m),h.push(g)}else f(v,m,n)||(v!==h&&v.push(m),h.push(g))}return h}},,function(e,t,n){var r=n(46),i=n(343),o=n(233),a=n(231)("IE_PROTO"),s=function(){},u=function(){var e,t=n(228)("iframe"),r=o.length;for(t.style.display="none",n(345).appendChild(t),t.src="javascript:",(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),u=e.F;r--;)delete u.prototype[o[r]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[a]=e):n=u(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(225),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t,n){var r=n(123),i=n(22)("toStringTag"),o="Arguments"==r(function(){return arguments}());e.exports=function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),i))?n:o?r(t):"Object"==(a=r(t))&&"function"==typeof t.callee?"Arguments":a}},function(e,t,n){var r=n(13),i=n(6),o=n(80);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],a={};a[e]=t(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(e,t,n){var r=n(164)("meta"),i=n(38),o=n(81),a=n(44).f,s=0,u=Object.isExtensible||function(){return!0},c=!n(80)(function(){return u(Object.preventExtensions({}))}),l=function(e){a(e,r,{value:{i:"O"+ ++s,w:{}}})},f=e.exports={KEY:r,NEED:!1,fastKey:function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,r)){if(!u(e))return"F";if(!t)return"E";l(e)}return e[r].i},getWeak:function(e,t){if(!o(e,r)){if(!u(e))return!0;if(!t)return!1;l(e)}return e[r].w},onFreeze:function(e){return c&&f.NEED&&u(e)&&!o(e,r)&&l(e),e}}},function(e,t){},function(e,t,n){e.exports={default:n(690),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(693)),i=o(n(64));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){if(Array.isArray(e))return e;if((0,r.default)(Object(e)))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var s,u=(0,i.default)(e);!(r=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){e.exports={default:n(717),__esModule:!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=v(n(76)),i=v(n(48)),o=v(n(4)),a=v(n(7)),s=v(n(1)),u=v(n(2)),c=v(n(8)),l=v(n(9)),f=v(n(11)),d=v(n(102)),p=n(85),h=n(131);function v(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(){var e,n,r,u;(0,s.default)(this,t);for(var l=arguments.length,f=Array(l),d=0;d<l;d++)f[d]=arguments[d];return n=r=(0,c.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(f))),r.updateRelationshipData=function(e){return function(t,n){var a=(0,h.getDocumentFromState)(n(),r.target._type,r.target._id);t((0,h.receiveQueryResult)(null,{data:(0,o.default)({},a,{relationships:(0,o.default)({},a.relationships,(0,i.default)({},r.name,e(a.relationships[r.name])))})}))}},u=n,(0,c.default)(r,u)}return(0,l.default)(t,e),(0,u.default)(t,[{key:"fetchMore",value:function(){throw"Not implemented"}},{key:"exists",value:function(e){return this.existsById(e._id)}},{key:"existsById",value:function(e){return void 0!==this.getRelationship().data.find(function(t){var n=t._id;return e===n})}},{key:"addById",value:function(e){var t,n=this;this.target.relationships||(this.target.relationships={}),this.target.relationships[this.name]||(this.target.relationships[this.name]={data:[]});var i=(e=Array.isArray(e)?e:[e]).filter(function(e){return!n.existsById(e)}).map(function(e){return{_id:e,_type:n.doctype}});return(t=this.target.relationships[this.name].data).push.apply(t,(0,r.default)(i)),this.updateMetaCount(),this.save(this.target)}},{key:"removeById",value:function(e){return e=Array.isArray(e)?e:[e],this.target.relationships[this.name].data=this.target.relationships[this.name].data.filter(function(t){var n=t._id;return!e.includes(n)}),this.updateMetaCount(),this.save(this.target)}},{key:"updateMetaCount",value:function(){void 0!==(0,f.default)(this.target.relationships[this.name],"meta.count")&&(this.target.relationships[this.name].meta=(0,o.default)({},this.target.relationships[this.name].meta,{count:this.target.relationships[this.name].data.length}))}},{key:"getRelationship",value:function(){var e=this.target[this.name],t=(0,f.default)(this.target,"relationships."+this.name);return t||(e&&e.length&&console.warn("You're trying to access data on a relationship that appear to not be loaded yet. You may want to use 'include()' on your query"),{data:[],next:!0,meta:{count:0}})}},{key:"updateTargetRelationship",value:function(e,t){var n=e.readDocument(this.target._type,this.target._id);e.writeDocument(this.updateRelationship(n,t))}},{key:"updateRelationship",value:function(e,t){return(0,o.default)({},e,{relationships:(0,o.default)({},e.relationships,(0,i.default)({},this.name,(0,o.default)({},e.relationships[this.name],t(e.relationships[this.name]))))})}},{key:"dehydrate",value:function(e){return(0,o.default)({},e,{relationships:(0,o.default)({},e.relationships,(0,i.default)({},this.name,{data:this.raw}))})}},{key:"raw",get:function(){return this.getRelationship().data}},{key:"data",get:function(){var e=this;return this.getRelationship().data.map(function(t){var n=t._id,r=t._type;return e.get(r,n)})}},{key:"hasMore",get:function(){return this.getRelationship().next}},{key:"count",get:function(){var e=this.getRelationship();return e.meta?e.meta.count:e.data.length}}],[{key:"query",value:function(e,t,n){var r=(0,f.default)(e,"relationships."+n.name+".data",[]).map(function(e){return e._id});return new p.QueryDefinition({doctype:n.doctype,ids:r})}}]),t}(d.default);t.default=y},function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(7)),i=o(n(725));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,o){null===t&&(t=Function.prototype);var a=(0,i.default)(t,n);if(void 0===a){var s=(0,r.default)(t);return null===s?void 0:e(s,n,o)}if("value"in a)return a.value;var u=a.get;return void 0!==u?u.call(o):void 0}},function(e,t,n){var r=n(160);e.exports=function(e){return e&&e.length?r(e):[]}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(421);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(175),i=n(136),o=n(515),a=n(12);e.exports=function(e,t){return(a(e)?r:i)(e,o(t))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HasManyTriggers=t.HasManyInPlace=t.HasOneInPlace=t.HasOne=t.HasMany=t.HasManyFiles=t.Association=t.create=t.resolveClass=void 0;var r=n(367);Object.defineProperty(t,"resolveClass",{enumerable:!0,get:function(){return r.resolveClass}}),Object.defineProperty(t,"create",{enumerable:!0,get:function(){return r.create}});var i=f(n(377)),o=f(n(172)),a=f(n(368)),s=f(n(369)),u=f(n(376)),c=f(n(728)),l=f(n(102));function f(e){return e&&e.__esModule?e:{default:e}}t.Association=l.default,t.HasManyFiles=i.default,t.HasMany=o.default,t.HasOne=a.default,t.HasOneInPlace=s.default,t.HasManyInPlace=u.default,t.HasManyTriggers=c.default},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var r="io.cozy.bank.settings",i={_type:"io.cozy.bank.settings",autogroups:{processedAccounts:[]},notifications:{lastSeq:0,balanceLower:{value:100,enabled:!1},transactionGreater:{value:600,enabled:!0},healthBillLinked:{enabled:!0},lateHealthReimbursement:{value:30,enabled:!1},delayedDebit:{enabled:!1,value:2},salaire:{enabled:!1},hebdo:{enabled:!1},mensuel:{enabled:!1}},billsMatching:{billsLastSeq:"0",transactionsLastSeq:"0"},appSuggestions:{lastSeq:0},community:{localModelOverride:{enabled:!0}},categorization:{lastSeq:0},showIncomeCategory:!0}},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a});n(954),n(795),n(128),n(11),n(139),n(113),n(956),n(394),n(83),n(32),n(69);var r=function(e){return e?e.shortLabel||e.label:""},i=["Business","Checkings","CreditCard","Joint","Loan","LongTermSavings","Other","Reimbursements","Savings"],o=function(e){var t={Article83:"LongTermSavings",Asset:"Business",Bank:"Checkings",Capitalisation:"Business",Cash:"Checkings",ConsumerCredit:"Loan","Credit card":"CreditCard",Deposit:"Checkings",Liability:"Business",LifeInsurance:"LongTermSavings",Madelin:"LongTermSavings",Market:"LongTermSavings",Mortgage:"LongTermSavings",None:"Other",PEA:"LongTermSavings",PEE:"LongTermSavings",Perco:"LongTermSavings",Perp:"LongTermSavings",RevolvingCredit:"Loan",RSP:"LongTermSavings",Unkown:"Other"}[e.type]||e.type||"Other";return i.includes(t)?t:"Other"},a=function(e){return"CreditCard"===e.type&&e.comingBalance?e.comingBalance:e.balance}},,,function(e,t){e.exports=require("querystring")},,,function(e,t,n){var r=n(95),i=n(108),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t){var n=Object.prototype;e.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},function(e,t,n){var r=n(267);e.exports=function(e,t){return!(null==e||!e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(546),i=n(34);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!=t&&n!=n:r(t,n,o,a,e,s))}},function(e,t,n){var r=n(107),i=n(304),o=n(266);e.exports=function(e){return o(i(e,void 0,r),e+"")}},,,,function(e,t,n){var r=n(73),i=n(155),o=n(34),a="[object Object]",s=Function.prototype,u=Object.prototype,c=s.toString,l=u.hasOwnProperty,f=c.call(Object);e.exports=function(e){if(!o(e)||r(e)!=a)return!1;var t=i(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&c.call(n)==f}},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},function(e,t,n){var r=n(43),i=n(20),o=n(331),a=n(12);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},,function(e,t,n){var r=n(73),i=n(12),o=n(34),a="[object String]";e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&r(e)==a}},,,,function(e,t){var n=9007199254740991;e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}},function(e,t,n){(function(e){var r=n(288),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s}).call(this,n(67)(e))},function(e,t,n){var r=n(135),i=n(205),o=4294967295;function a(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}a.prototype=r(i.prototype),a.prototype.constructor=a,e.exports=a},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(312),i=n(74);e.exports=function(e,t){return e&&r(e,t,i)}},function(e,t,n){var r=n(77)(n(37),"Map");e.exports=r},function(e,t,n){var r=n(530),i=n(537),o=n(539),a=n(540),s=n(541);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(317);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}},function(e,t,n){var r=n(212),i=n(323),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),function(t){return o.call(e,t)}))}:i;e.exports=s},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},function(e,t,n){var r=n(12),i=n(91),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||a.test(e)||!o.test(e)||null!=t&&e in Object(t)}},function(e,t,n){var r=n(94),i=n(43),o=n(12),a=n(91),s=1/0,u=r?r.prototype:void 0,c=u?u.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return c?c.call(t):"";var n=t+"";return"0"==n&&1/t==-s?"-0":n}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t){e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},function(e){e.exports=JSON.parse('[["0","\\u0000",127,""],["8140","",5,"",9,"",6,""],["8180","",6,"",4,"",4,"",5,""],["8240","",4,"",8,"",4,"",11],["8280","",10,"",4,"",7,"",5,"",8,"",20,"",4,"",6,""],["8340","",17,"",5,"",10,"",4,"",9,""],["8380","",5,"",13,"",28,"",4,"",4,"",5],["8440","",5,"",5,""],["8480","",9,"",4,"",6,"",6,"",9,"",5,"",10,"",7,""],["8540","",9,""],["8580","",4,"",6,"",4,"",4,"",7,""],["8640","",4,"",5,"",4,"",5,""],["8680","",4,"",4,"",5,"",6,"",8,"",4,"",4,"",4,""],["8740","",7,"",11,"",4,"",4],["8780","",7,"",6,"",14,"",10,"",6,"",12,"",8,"",5,"",6],["8840","",9,"",4,"",4,""],["8880","",4,"",6,"",8,"",6,"",7,"",4,"",4,"",7],["8940","",5,"",6,"",4,"",5,"",4,"",16,""],["8980","",4,"",4,"",7,"",17,"",10,"",13,"",5,"",7,"",4,""],["8a40","",4,"",12,""],["8a80","",5,"",6,"",4,"",11,"",6,"",4,"",4,"",9,"",5],["8b40","",8,"",17,"",6,"",13,""],["8b80","",4,"",4,"",5,"",4,"",4,"",22,"",11,"",25,"",7,"",6],["8c40","",7,""],["8c80","",8,"",4,"",6,"",6,"",6,"",4,"",4,"",4],["8d40","",5,"",5,"",5,"",6,"",9,"",4],["8d80","",5,"",4,"",4,"",4,"",7,"",7,"",10,"",10,"",12,"",21,""],["8e40","",21,"",12,"",6,"",12,""],["8e80","",4,"",7,"",4,"",4,"",5,"",6,"",4,"",14,"",4,"",4,"",6],["8f40","",5,"",11,"",8,""],["8f80","",6,"",14,"",5,"",5,"",4,""],["9040","",4,"",4,"",6,""],["9080","",7,"",4,"",4,"",4,"",4,"",18,"",6],["9140","",6,"",6,"",18,"",4,""],["9180","",6,"",8,"",9,"",5,"",4,"",4,"",16,"",13,"",8,"",5,"",4,""],["9240","",6,"",5,""],["9280","",5,"",7,"",6,""],["9340","",6,"",4,"",4,"",5,""],["9380","",5,"",4,"",6,"",4,"",7,"",9,"",6,"",8,"",4,"",6,""],["9440","",24,"",7,"",7,"",4,"",8],["9480","",4,"",4,"",14,"",7,"",7,""],["9540","",4,"",4,"",6,""],["9580","",4,"",4,"",8,"",4,"",4,"",25,"",7,"",5,""],["9640","",5,"",4,""],["9680","",7,"",9,"",7,"",4,"",6,"",6,"",5],["9740","",7,"",8,"",7,"",9,""],["9780","",6,"",5,"",4,"",9,"",4,"",11,"",7,"",16,""],["9840","",4,"",5,"",9,""],["9880","",7,"",5,"",11,"",9,"",9,"",11,"",5,"",5,"",6,"",4,"",7,"",6,""],["9940","",4,"",10,"",6,"",8,"",4,"",7,"",5],["9980","",114,"",6],["9a40","",11,"",7,"",13,""],["9a80","",4,"",7,"",7,"",6,"",4,"",4,"",7,"",6,"",4,"",4,""],["9b40","",4,""],["9b80","",5,"",4,"",4,"",5,""],["9c40","",7,""],["9c80","",7,"",7,"",10,"",14,"",4,"",6,"",5],["9d40","",7,"",4,"",9,"",6,""],["9d80","",9,"",5,"",6,"",12,"",4,"",10,"",5,"",5,"",6,"",10,""],["9e40","",7,"",32,"",7,"",6,"",6],["9e80","",9,"",17,"",13,"",11,"",12,"",12,""],["9f40","",6,"",10,"",4,"",10,"",7,""],["9f80","",13,"",12,"",4,"",4,"",5,"",4,"",4,"",6,"",5,"",8,"",9,"",4],["a040","",9,"",5,"",9,"",11,"",19],["a080","",9,"",6,"",4,"",11,"",11,"",6,""],["a1a1","",7,""],["a2a1","",9],["a2b1","",19,"",19,"",9],["a2e5","",9],["a2f1","",11],["a3a1","",88,""],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a6e0",""],["a6ee",""],["a6f4",""],["a7a1","",5,"",25],["a7d1","",5,"",25],["a840","",35,"",6],["a880","",7,""],["a8a1",""],["a8bd",""],["a8c0",""],["a8c5","",36],["a940","",8,""],["a959",""],["a95c",""],["a960","",9,"",8],["a980","",4,""],["a996",""],["a9a4","",75],["aa40","",5,"",5,"",8],["aa80","",7,"",10,""],["ab40","",11,"",4,"",5,"",4],["ab80","",6,"",4],["ac40","",10,"",8,"",5,"",4,"",11],["ac80","",6,"",12,"",4,""],["ad40","",10,"",7,"",15,"",12],["ad80","",9,"",8,"",6,""],["ae40","",6,"",7,"",4,""],["ae80","",7,"",6,"",4,""],["af40","",4,""],["af80",""],["b040","",6,"",5,"",4,"",6,"",7,""],["b080","",7,"",8,"",9,""],["b140","",4,"",7,"",10,""],["b180","",4,"",7,"",7,""],["b240","",11,"",5,"",11,"",4],["b280","",12,"",8,"",4,""],["b340","",5,""],["b380","",11,"",7,"",6,""],["b440","",7,"",9],["b480","",4,"",5,"",6,""],["b540","",5,"",9,"",4,"",14,"",4,"",8,""],["b580","",6,"",4,""],["b640","",6,"",11,"",10,"",4,"",5,""],["b680","",6,"",4,""],["b740","",14,"",5,"",9,"",4,"",16],["b780","",6,""],["b840","",4,"",10,"",10,"",9,"",5,""],["b880","",4,""],["b940","",5,"",10,"",6,""],["b980","",7,""],["ba40","",4,"",4,"",7,"",5,""],["ba80","",4,"",5,"",12,"",5,""],["bb40","",9,"",36,"",5,"",9],["bb80","",6,"",4,""],["bc40","",6,"",6,"",5,"",7,"",13,"",5],["bc80","",14,"",6,""],["bd40","",54,"",7],["bd80","",32,""],["be40","",12,"",6,"",42],["be80","",32,""],["bf40","",62],["bf80","",4,"",4,"",21,""],["c040","",35,"",23,""],["c080","",6,"",9,""],["c140","",4,"",7,"",4,"",4,"",6,""],["c180","",4,"",4,"",5,""],["c240","",6,"",5,""],["c280","",13,"",5,"",11,""],["c340","",5,"",4,"",6,""],["c380","",12,"",4,""],["c440","",5,"",4,"",4,"",5,"",4,""],["c480","",7,"",5,"",6,""],["c540","",14,"",4,"",5,"",4,"",5,""],["c580","",7,"",7,""],["c640",""],["c680","",4,"",9,""],["c740","",4,"",4,"",6,"",6,"",6,""],["c780",""],["c840","",4,"",5,"",5,"",7,"",5,"",7,""],["c880","",6,"",4,"",4,""],["c940","",4,"",7,"",12,""],["c980","",4,"",4,"",10,""],["ca40","",8,"",8,"",9,"",4,"",10],["ca80","",4,"",8,""],["cb40","",6,"",10,"",6,"",5,"",6,"",6,"",4,""],["cb80","",5,"",6,"",14,""],["cc40","",4,"",10,"",15,"",13,""],["cc80","",11,"",4,"",7,""],["cd40","",6,"",6,"",4,"",5,"",4,"",4,""],["cd80",""],["ce40","",6,"",5,"",7,""],["ce80","",4,"",6,"",4,""],["cf40","",4,"",4,"",6,"",9],["cf80","",5,"",7,"",4,""],["d040","",13,"",5,"",5,"",5,"",6,""],["d080","",4,"",4,"",5,""],["d140","",4,"",4,"",6,"",5],["d180","",4,"",4,"",4,""],["d240","",8,"",24,"",5,"",19,""],["d280","",26,""],["d340","",30,"",6],["d380","",4,"",5,"",21,""],["d440","",31,"",8,"",21],["d480","",25,"",6,""],["d540","",7,"",7,"",46],["d580","",32,""],["d640","",34,"",27],["d680","",30,""],["d740","",31,"",4,"",25],["d780","",24,""],["d840","",8,"",7,"",5,"",6,"",6,"",6,""],["d880","",6,"",20,""],["d940","",62],["d980","",32,""],["da40","",14,"",8,"",4,"",9,""],["da80","",12,""],["db40","",6,"",7,"",4,""],["db80","",4,"",5,"",11,""],["dc40","",4,"",6,"",6,"",11,"",6,"",7],["dc80","",10,"",21,""],["dd40","",62],["dd80","",32,""],["de40","",32,""],["de80","",4,""],["df40","",5,"",4,"",4,"",5,"",4,"",6,""],["df80","",4,""],["e040","",19,""],["e080","",10,"",6,"",8,""],["e140","",4,"",6,"",5,"",5,""],["e180","",10,"",9,"",8,""],["e240","",62],["e280","",32,"",5,""],["e340","",45,"",16],["e380","",7,"",24,""],["e440","",5,"",24,"",31],["e480","",32,""],["e540","",51,"",10],["e580","",31,""],["e640","",34,"",27],["e680","",29,""],["e740","",7,"",54],["e780","",32,"",6,"",4,""],["e840","",14,"",43,""],["e880","",20,""],["e940","",7,"",42],["e980","",32,""],["ea40","",27,"",6,""],["ea80","",4,"",12,""],["eb40","",9,"",7,"",9,"",6,""],["eb80","",4,""],["ec40","",8,"",4,"",18,"",7],["ec80","",4,"",7,"",4,"",4,""],["ed40","",6,"",46],["ed80","",4,"",23,""],["ee40","",62],["ee80","",32,"",4,"",6,""],["ef40","",5,"",37,"",4],["ef80","",30,"",4,"",8,""],["f040","",4,"",28,"",26],["f080","",9,"",12,"",4,"",6,""],["f140","",10,"",47],["f180","",32,""],["f240","",62],["f280","",32,""],["f340","",17,"",6,"",4,""],["f380","",8,"",6,""],["f440","",5,"",10,"",10,"",7,"",5],["f480","",32,""],["f540","",62],["f580","",32,""],["f640","",62],["f680","",32,"",5,"",5,"",4,"",7,""],["f740","",62],["f780","",4,"",4,""],["f840","",62],["f880","",32],["f940","",62],["f980","",32],["fa40","",62],["fa80","",32],["fb40","",27,"",9,""],["fb80","",5,"",8,"",5,""],["fc40","",8,"",4,"",8,"",6],["fc80","",4,"",5,"",8,""],["fd40","",4,"",4,"",10,"",38],["fd80","",5,"",11,"",4,""],["fe40",""]]')},,function(e,t,n){var r=n(322),i=n(337),o=n(118);e.exports=function(e){return r(e,o,i)}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},,,function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.resetFlags=t.listFlags=void 0;var i=r(n(72)),o=r(n(17)),a=r(n(25)),s=r(n(340)),u=r(n(646)),c=function(){function e(){(0,o.default)(this,e),this.store={},"undefined"!=typeof localStorage&&(this.longtermStore=u.default),this.restore()}return(0,a.default)(e,[{key:"restore",value:function(){if(this.longtermStore)for(var e=this.longtermStore.getAll(),t=Object.entries(e),n=0;n<t.length;n++){var r=(0,i.default)(t[n],2),o=r[0],a=r[1];this.store[o]=a,this.emit("change")}}},{key:"keys",value:function(){return Object.keys(this.store)}},{key:"get",value:function(e){return this.store.hasOwnProperty(e)||(this.store[e]=null),this.store[e]}},{key:"set",value:function(e,t){this.longtermStore&&this.longtermStore.setItem(e,t),this.store[e]=t,this.emit("change")}},{key:"remove",value:function(e){delete this.store[e],this.longtermStore&&this.longtermStore.removeItem(e),this.emit("change")}}]),e}();s.default.mixin(c);var l=new c,f=function(){var e=[].slice.call(arguments);return 1===e.length?l.get(e[0]):(l.set(e[0],e[1]),e[1])},d=function(){return l.keys()};t.listFlags=d;var p=function(){d().forEach(function(e){return l.remove(e)})};t.resetFlags=p,f.store=l,f.list=d,f.reset=p;var h=f;t.default=h},function(e,t,n){e.exports={default:n(651),__esModule:!0}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,n){"use strict";var r=n(120),i=n(13),o=n(342),a=n(61),s=n(98),u=n(653),c=n(124),l=n(346),f=n(22)("iterator"),d=!([].keys&&"next"in[].keys()),p=function(){return this};e.exports=function(e,t,n,h,v,y,g){u(n,t,h);var m,b,w,_=function(e){if(!d&&e in S)return S[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",k="values"==v,O=!1,S=e.prototype,E=S[f]||S["@@iterator"]||v&&S[v],A=E||_(v),C=v?k?_("entries"):A:void 0,j="Array"==t&&S.entries||E;if(j&&(w=l(j.call(new e)))!==Object.prototype&&w.next&&(c(w,x,!0),r||"function"==typeof w[f]||a(w,f,p)),k&&E&&"values"!==E.name&&(O=!0,A=function(){return E.call(this)}),r&&!g||!d&&!O&&S[f]||a(S,f,A),s[t]=A,s[x]=p,v)if(m={values:k?A:_("values"),keys:y?A:_("keys"),entries:C},g)for(b in m)b in S||o(S,b,m[b]);else i(i.P+i.F*(d||O),t,m);return m}},function(e,t,n){var r=n(38),i=n(21).document,o=r(i)&&r(i.createElement);e.exports=function(e){return o?i.createElement(e):{}}},function(e,t,n){var r=n(38);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(123);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t,n){var r=n(232)("keys"),i=n(164);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(6),i=n(21),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:r.version,mode:n(120)?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t,n){var r=n(165),i=n(22)("iterator"),o=n(98);e.exports=n(6).getIteratorMethod=function(e){if(null!=e)return e[i]||e["@@iterator"]||o[r(e)]}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){t.f=n(22)},function(e,t,n){var r=n(21),i=n(6),o=n(120),a=n(236),s=n(44).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){var r=n(125),i=n(122),o=n(62),a=n(229),s=n(81),u=n(341),c=Object.getOwnPropertyDescriptor;t.f=n(28)?c:function(e,t){if(e=o(e),t=a(t,!0),u)try{return c(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},,function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){"use strict";var r=n(121);function i(e){var t,n;this.promise=new e(function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r}),this.resolve=r(t),this.reject=r(n)}e.exports.f=function(e){return new i(e)}},function(e,t,n){var r=n(61);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t,n){var r=n(38);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.receiveMutationError=t.receiveMutationResult=t.initMutation=t.isReceivingMutationResult=t.isMutationAction=void 0;var r,i=n(4),o=(r=i)&&r.__esModule?r:{default:r};var a="INIT_MUTATION",s="RECEIVE_MUTATION_RESULT",u="RECEIVE_MUTATION_ERROR";t.isMutationAction=function(e){return-1!==[a,s,u].indexOf(e.type)},t.isReceivingMutationResult=function(e){return e.type===s},t.initMutation=function(e,t){return{type:a,mutationId:e,definition:t}},t.receiveMutationResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,o.default)({type:s,mutationId:e,response:t},n,{definition:r})},t.receiveMutationError=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{type:u,mutationId:e,error:t,definition:n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Collection=t.dontThrowNotFoundError=void 0;var r=s(n(15)),i=s(n(16)),o=s(n(1)),a=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=t.dontThrowNotFoundError=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(e.message.match(/not_found/)){var n=Array.isArray(t);return n?{data:t,meta:{count:0},skip:0,next:!1}:{data:t}}throw e},c=t.Collection=function(){function e(){(0,o.default)(this,e)}var t;return(0,a.default)(e,null,[{key:"get",value:(t=(0,i.default)(r.default.mark(function e(t,n,i){var o,a=i.normalize,s=void 0===a?function(e,t){return e}:a,c=i.method,l=void 0===c?"GET":c;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetchJSON(l,n);case 3:return o=e.sent,e.abrupt("return",{data:s(o.data,o)});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",u(e.t0,null));case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(e,n,r){return t.apply(this,arguments)})}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDirectory=t.isFile=void 0;var r=I(n(100)),i=I(n(84)),o=I(n(64)),a=I(n(103)),s=I(n(15)),u=I(n(16)),c=I(n(7)),l=I(n(1)),f=I(n(2)),d=I(n(8)),p=I(n(9)),h=I(n(68)),v=I(n(4)),y=(0,a.default)(["/data/","/","/relationships/references"],["/data/","/","/relationships/references"]),g=(0,a.default)(["/files/","/relationships/referenced_by"],["/files/","/relationships/referenced_by"]),m=(0,a.default)(["/files/",""],["/files/",""]),b=(0,a.default)(["/files/trash/",""],["/files/trash/",""]),w=(0,a.default)(["/files/","?Name=","&Type=file&Executable=","&MetadataID=",""],["/files/","?Name=","&Type=file&Executable=","&MetadataID=",""]),_=(0,a.default)(["/files/","?Name=","&Type=file&Executable=",""],["/files/","?Name=","&Type=file&Executable=",""]),x=(0,a.default)(["/files/downloads?Id=",""],["/files/downloads?Id=",""]),k=(0,a.default)(["/files/downloads?Path=",""],["/files/downloads?Path=",""]),O=(0,a.default)(["/files/metadata?Path=",""],["/files/metadata?Path=",""]),S=(0,a.default)(["/files/","?Name=","&Type=directory"],["/files/","?Name=","&Type=directory"]),E=(0,a.default)(["/files/upload/metadata"],["/files/upload/metadata"]),A=(0,a.default)(["/files/","/versions"],["/files/","/versions"]),C=I(n(746)),j=I(n(749)),T=n(65),P=I(T),R=n(104),M=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(380));function I(e){return e&&e.__esModule?e:{default:e}}var D=function(e){return(0,v.default)({},(0,T.normalizeDoc)(e,"io.cozy.files"),e.attributes)},N=function(e){return e&&e.trim()},L=function(e){return C.default.getType(e)||"application/octet-stream"},B=(t.isFile=function(e){var t=e._type,n=e.type;return"io.cozy.files"===t||"directory"===n||"file"===n},t.isDirectory=function(e){return"directory"===e.type},function(e,t){return new h.default(function(n){e.forEach(function(e){return e.then(function(e){t(e)&&n(!0)})}),h.default.all(e).then(function(){return n(!1)})})}),z=function(e){function t(e,n){(0,l.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));return r.extractResponseLinkRelated=function(e){var t=e.links&&e.links.related;if(!t)throw new Error("No related link in server response");return r.stackClient.fullpath(t)},r.specialDirectories={},r}var n,a,h,v,C,T,P,I,z,F,U,q,$,H,G,V,J,Q,Y,W,Z,K;return(0,p.default)(t,e),(0,f.default)(t,[{key:"get",value:function(e){return this.statById(e)}},{key:"find",value:(K=(0,u.default)(s.default.mark(function e(t){var n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.skip,r=void 0===n?0:n,e.t0=this.stackClient,e.next=4,this.toMangoOptions(t,o);case 4:return e.t1=e.sent,e.next=7,e.t0.fetchJSON.call(e.t0,"POST","/files/_find",e.t1);case 7:return i=e.sent,e.abrupt("return",{data:i.data.map(function(e){return D(e)}),meta:i.meta,next:i.meta.count>r+i.data.length,skip:r});case 9:case"end":return e.stop()}},e,this)})),function(e){return K.apply(this,arguments)})},{key:"findReferencedBy",value:(Z=(0,u.default)(s.default.mark(function e(t){var n,r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=a.skip,c=void 0===u?0:u,l=a.limit,f=a.cursor;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={include:"files","page[limit]":l,"page[cursor]":f,sort:"datetime"},r=(0,R.uri)(y,t._type,t._id),i=M.buildURL(r,n),e.next=5,this.stackClient.fetchJSON("GET",i);case 5:return o=e.sent,e.abrupt("return",{data:o.data.map(function(e){return D(e)}),included:o.included?o.included.map(function(e){return D(e)}):[],next:(0,j.default)(o,"links.next"),meta:o.meta,skip:c});case 7:case"end":return e.stop()}},e,this)})),function(e){return Z.apply(this,arguments)})},{key:"addReferencedBy",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("POST",(0,R.uri)(g,e._id),{data:n})}},{key:"removeReferencedBy",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:e._type}});return this.stackClient.fetchJSON("DELETE",(0,R.uri)(g,e._id),{data:n})}},{key:"addReferencesTo",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:"io.cozy.files"}});return this.stackClient.fetchJSON("POST",(0,R.uri)(y,e._type,e._id),{data:n})}},{key:"removeReferencesTo",value:function(e,t){var n=t.map(function(e){return{id:e._id,type:"io.cozy.files"}});return this.stackClient.fetchJSON("DELETE",(0,R.uri)(y,e._type,e._id),{data:n})}},{key:"destroy",value:(W=(0,u.default)(s.default.mark(function e(t){var n,r,i,a,u,c,l,f=t._id,d=t.relationships,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=p.ifMatch,v=void 0===h?"":h;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(d&&d.referenced_by&&Array.isArray(d.referenced_by.data))){e.next=27;break}n=!0,r=!1,i=void 0,e.prev=4,a=(0,o.default)(d.referenced_by.data);case 6:if(n=(u=a.next()).done){e.next=13;break}return c=u.value,e.next=10,this.removeReferencesTo({_id:c.id,_type:c.type},[{_id:f}]);case 10:n=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),r=!0,i=e.t0;case 19:e.prev=19,e.prev=20,!n&&a.return&&a.return();case 22:if(e.prev=22,!r){e.next=25;break}throw i;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return e.next=29,this.stackClient.fetchJSON("DELETE",(0,R.uri)(m,f),void 0,{headers:{"If-Match":v}});case 29:return l=e.sent,e.abrupt("return",{data:D(l.data)});case 31:case"end":return e.stop()}},e,this,[[4,15,19,27],[20,,22,26]])})),function(e){return W.apply(this,arguments)})},{key:"restore",value:function(e){return this.stackClient.fetchJSON("POST",(0,R.uri)(b,e))}},{key:"deleteFilePermanently",value:(Y=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PATCH",(0,R.uri)(m,t),{data:{type:"io.cozy.files",id:t,attributes:{permanent_delete:!0}}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}},e,this)})),function(e){return Y.apply(this,arguments)})},{key:"upload",value:(Q=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ensureDirectoryExists(n);case 2:return r=e.sent,e.abrupt("return",this.createFile(t,{dirId:r}));case 4:case"end":return e.stop()}},e,this)})),function(e,t){return Q.apply(this,arguments)})},{key:"createFile",value:(J=(0,u.default)(s.default.mark(function e(t){var n,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=a.name,c=a.dirId,l=void 0===c?"":c,f=a.executable,d=a.metadata,p=(0,i.default)(a,["name","dirId","executable","metadata"]);return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u||"string"!=typeof t.name||(u=t.name),"string"==typeof(u=N(u))&&""!==u){e.next=4;break}throw new Error("missing name argument");case 4:if(void 0===f&&(f=!1),n="",!d){e.next=11;break}return e.next=9,this.createFileMetadata(d);case 9:r=e.sent,n=r.data.id;case 11:return o=(0,R.uri)(w,l,u,f,n),e.abrupt("return",this.doUpload(t,o,p));case 13:case"end":return e.stop()}},e,this)})),function(e){return J.apply(this,arguments)})},{key:"updateFile",value:(V=(0,u.default)(s.default.mark(function e(t){var n,r,o,a,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=u.executable,l=void 0!==c&&c,f=u.fileId,d=u.metadata,p=(0,i.default)(u,["executable","fileId","metadata"]);return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&"string"==typeof f){e.next=2;break}throw new Error("missing fileId argument");case 2:if("string"==typeof t.name){e.next=4;break}throw new Error("missing name in data argument");case 4:if("string"==typeof(n=N(t.name))&&""!==n){e.next=7;break}throw new Error("missing name argument");case 7:if(r=void 0,o=(0,R.uri)(_,f,n,l),!d){e.next=15;break}return e.next=12,this.createFileMetadata(d);case 12:a=e.sent,r=a.data.id,o=o+"&MetadataID="+r;case 15:return e.abrupt("return",this.doUpload(t,o,p,"PUT"));case 16:case"end":return e.stop()}},e,this)})),function(e){return V.apply(this,arguments)})},{key:"getDownloadLinkById",value:function(e){return this.stackClient.fetchJSON("POST",(0,R.uri)(x,e)).then(this.extractResponseLinkRelated)}},{key:"getDownloadLinkByPath",value:function(e){return this.stackClient.fetchJSON("POST",(0,R.uri)(k,e)).then(this.extractResponseLinkRelated)}},{key:"download",value:(G=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDownloadLinkById(t._id);case 2:n=e.sent,(0,R.forceFileDownload)(n+"?Dl=1",t.name);case 4:case"end":return e.stop()}},e,this)})),function(e){return G.apply(this,arguments)})},{key:"downloadArchive",value:(H=(0,u.default)(s.default.mark(function e(t){var n,r,i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"files";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,R.slugify)(o),e.next=3,this.getArchiveLinkByIds(t,n);case 3:r=e.sent,i=this.stackClient.fullpath(r),(0,R.forceFileDownload)(i,n+".zip");case 6:case"end":return e.stop()}},e,this)})),function(e){return H.apply(this,arguments)})},{key:"getArchiveLinkByIds",value:($=(0,u.default)(s.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"files";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/files/archive",{data:{type:"io.cozy.archives",attributes:{name:r,ids:t}}});case 2:return n=e.sent,e.abrupt("return",n.links.related);case 4:case"end":return e.stop()}},e,this)})),function(e){return $.apply(this,arguments)})},{key:"isChildOf",value:(q=(0,u.default)(s.default.mark(function e(t,n){var i,o,a,u,c,l,f,d,p,h,v=this;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i="object"===(void 0===t?"undefined":(0,r.default)(t))?t:{_id:t},o=i._id,a=i.dirID,u=i.path,c="object"===(void 0===n?"undefined":(0,r.default)(n))?n:{_id:n},l=c._id,o!==l&&a!==l){e.next=4;break}return e.abrupt("return",!0);case 4:if(u){e.next=10;break}return e.next=7,this.statById(o);case 7:f=e.sent,u=f.path,a=f.dirID;case 10:for(d=u,p=[u];""!=d;)y=void 0,y=(s=d).lastIndexOf("/"),""!=(h=s.substring(0,y))&&p.push(h),d=h;return p.reverse(),e.abrupt("return",B(p.map(function(e){return v.statByPath(e)}),function(e){return e.data._id==l}));case 15:case"end":return e.stop()}var s,y},e,this)})),function(e,t){return q.apply(this,arguments)})},{key:"statById",value:(U=(0,u.default)(s.default.mark(function e(t){var n,r,i,o,a,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.limit,r=c.skip,i={limit:n,skip:void 0===r?0:r},o=(0,R.uri)(m,t),a=M.buildURL(o,i),e.next=6,this.stackClient.fetchJSON("GET",a);case 6:return u=e.sent,e.abrupt("return",{data:D(u.data),included:u.included&&u.included.map(function(e){return D(e)})});case 8:case"end":return e.stop()}},e,this)})),function(e){return U.apply(this,arguments)})},{key:"statByPath",value:(F=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,R.uri)(O,t));case 2:return n=e.sent,e.abrupt("return",{data:D(n.data),included:n.included&&n.included.map(function(e){return D(e)})});case 4:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)})},{key:"createDirectory",value:(z=(0,u.default)(s.default.mark(function e(){var t,n,r,i,o,a,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.name,n=u.dirId,r=u.lastModifiedDate,i=N(t),"string"==typeof t&&""!==i){e.next=4;break}throw new Error("missing name argument");case 4:return o=r&&("string"==typeof r?new Date(r):r),e.next=7,this.stackClient.fetchJSON("POST",(0,R.uri)(S,n,i),void 0,{headers:{Date:o?o.toGMTString():""}});case 7:return a=e.sent,e.abrupt("return",{data:D(a.data)});case 9:case"end":return e.stop()}},e,this)})),function(){return z.apply(this,arguments)})},{key:"ensureDirectoryExists",value:(I=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.specialDirectories[t]){e.next=5;break}return e.next=3,this.createDirectoryByPath(t);case 3:n=e.sent,this.specialDirectories[t]=n.data._id;case 5:return e.abrupt("return",this.specialDirectories[t]);case 6:case"end":return e.stop()}},e,this)})),function(e){return I.apply(this,arguments)})},{key:"getDirectoryOrCreate",value:(P=(0,u.default)(s.default.mark(function e(t,n){var r,i,o,a,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n||n.attributes){e.next=2;break}throw new Error("Malformed parent directory");case 2:return r=N(t),i=("io.cozy.files.root-dir"===n._id?"":n.attributes.path)+"/"+r,e.prev=4,e.next=7,this.statByPath(i||"/");case 7:return o=e.sent,e.abrupt("return",o);case 11:if(e.prev=11,e.t0=e.catch(4),a=JSON.parse(e.t0.message),!(u=a.errors)||!u.length||"404"!==u[0].status){e.next=17;break}return e.abrupt("return",this.createDirectory({name:r,dirId:n&&n._id}));case 17:throw u;case 18:case"end":return e.stop()}},e,this,[[4,11]])})),function(e,t){return P.apply(this,arguments)})},{key:"createDirectoryByPath",value:(T=(0,u.default)(s.default.mark(function e(t){var n,r,i,a,u,c,l,f,d;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.split("/").filter(function(e){return""!==e}),e.next=3,this.statById("io.cozy.files.root-dir");case 3:if(r=e.sent,n.length){e.next=6;break}return e.abrupt("return",r);case 6:i=r,a=!0,u=!1,c=void 0,e.prev=10,l=(0,o.default)(n);case 12:if(a=(f=l.next()).done){e.next=20;break}return d=f.value,e.next=16,this.getDirectoryOrCreate(d,i.data);case 16:i=e.sent;case 17:a=!0,e.next=12;break;case 20:e.next=26;break;case 22:e.prev=22,e.t0=e.catch(10),u=!0,c=e.t0;case 26:e.prev=26,e.prev=27,!a&&l.return&&l.return();case 29:if(e.prev=29,!u){e.next=32;break}throw c;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",i);case 35:case"end":return e.stop()}},e,this,[[10,22,26,34],[27,,29,33]])})),function(e){return T.apply(this,arguments)})},{key:"updateAttributes",value:(C=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("PATCH",(0,R.uri)(m,t),{data:{type:"io.cozy.files",id:t,attributes:n}});case 2:return r=e.sent,e.abrupt("return",{data:D(r.data)});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return C.apply(this,arguments)})},{key:"updateFileMetadata",value:(v=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("CozyClient FileCollection updateFileMetadata method is deprecated. Use updateAttributes instead"),e.abrupt("return",this.updateAttributes(t,n));case 2:case"end":return e.stop()}},e,this)})),function(e,t){return v.apply(this,arguments)})},{key:"createFileMetadata",value:(h=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,R.uri)(E),{data:{type:"io.cozy.files.metadata",attributes:t}});case 2:return n=e.sent,e.abrupt("return",{data:n.data});case 4:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"updateMetadataAttribute",value:(a=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,R.uri)(A,t),{data:{type:"io.cozy.files.metadata",attributes:n}});case 2:return r=e.sent,e.abrupt("return",{data:r.data});case 4:case"end":return e.stop()}},e,this)})),function(e,t){return a.apply(this,arguments)})},{key:"doUpload",value:(n=(0,u.default)(s.default.mark(function e(t,n,r){var i,o,a,u,c,l,f,d,p,h,v,y,g,m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"POST";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("missing data argument");case 2:if(t.buffer&&t.buffer instanceof ArrayBuffer&&(t=t.buffer),i="undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer,o="undefined"!=typeof File&&t instanceof File,a="undefined"!=typeof Blob&&t instanceof Blob,u=!0===t.readable&&"function"==typeof t.pipe,c="string"==typeof t,i||o||a||u||c){e.next=10;break}throw new Error("invalid data type");case 10:return f=(l=r||{}).contentType,d=l.contentLength,p=l.checksum,h=l.lastModifiedDate,v=l.ifMatch,f||(i?f="application/octet-stream":o?(f=t.type||L(t.name.toLowerCase())||"application/octet-stream",h||(h=t.lastModifiedDate)):a?f=t.type||"application/octet-stream":u?f="application/octet-stream":"string"==typeof t&&(f="text/plain")),h&&"string"==typeof h&&(h=new Date(h)),y={"Content-Type":f},d&&(y["Content-Length"]=String(d)),p&&(y["Content-MD5"]=p),h&&(y.Date=h.toGMTString()),v&&(y["If-Match"]=v),e.next=20,this.stackClient.fetchJSON(m,n,t,{headers:y});case 20:return g=e.sent,e.abrupt("return",{data:D(g.data)});case 22:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})}]),t}(P.default);t.default=z},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMobile=t.isIOS=t.isAndroid=t.isMobileApp=t.isWebApp=t.isAndroidApp=t.isIOSApp=t.getPlatform=void 0;var r=n(248),i=function(){return(0,r.isCordova)()?window.cordova.platformId:"web"};t.getPlatform=i;var o=function(e){return i()===e};t.isIOSApp=function(){return o("ios")};t.isAndroidApp=function(){return o("android")};t.isWebApp=function(){return o("web")};t.isMobileApp=function(){return(0,r.isCordova)()};var a=function(){return window.navigator.userAgent&&window.navigator.userAgent.indexOf("Android")>=0};t.isAndroid=a;var s=function(){return window.navigator.userAgent&&/iPad|iPhone|iPod/.test(window.navigator.userAgent)};t.isIOS=s;t.isMobile=function(){return a()||s()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isCordova=void 0;t.isCordova=function(){return"undefined"!=typeof window&&void 0!==window.cordova}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasSafariPlugin=t.hasInAppBrowserPlugin=t.hasDevicePlugin=void 0;var r=n(248);t.hasDevicePlugin=function(){return(0,r.isCordova)()&&void 0!==window.device};t.hasInAppBrowserPlugin=function(){return(0,r.isCordova)()&&void 0!==window.cordova.InAppBrowser};t.hasSafariPlugin=function(){return new Promise(function(e){(0,r.isCordova)()&&void 0!==window.SafariViewController?window.SafariViewController.isAvailable(function(t){return e(t)}):e(!1)})}},function(e,t,n){const r=n(41),i=n(11),o=n(39),a=n(780),{getSlugFromInstitutionLabel:s}=n(390);class u extends o{static reconciliate(e,t){return a.matchAccounts(e,t).map(e=>({...e.account,_id:e.match?e.match._id:void 0}))}static findDuplicateAccountsWithNoOperations(e,t){const n=r(t,e=>e.account),i=Object.entries(r(e,e=>e.institutionLabel+" > "+e.label)).map(([,e])=>e).filter(e=>e.length>1),o=[];for(const e of i)for(const t of e){0===(n[t._id]||[]).length&&o.push(t)}return o}static hasIncoherentCreatedByApp(e){const t=s(e.institutionLabel),n=e.cozyMetadata&&e.cozyMetadata.createdByApp;return Boolean(t&&n&&t!==n)}static getUpdatedAt(e){const t=i(e,"metadata.updatedAt");if(t)return t;const n=i(e,"cozyMetadata.updatedAt");return n||null}}u.normalizeAccountNumber=a.normalizeAccountNumber,u.doctype="io.cozy.bank.accounts",u.idAttributes=["_id"],u.version=1,u.checkedAttributes=null,u.vendorIdAttr="vendorId",e.exports=u},function(e,t,n){var r=n(519),i=n(303)(function(e,t,n){r(e,t,n)});e.exports=i},function(e,t,n){"use strict";e.exports=n(648)},function(e,t,n){var r=n(208),i="Expected a function";function o(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError(i);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(o.Cache||r),n}o.Cache=r,e.exports=o},function(e,t,n){"use strict";(function(e){var r,i=n(397);r="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:e;var o=Object(i.a)(r);t.a=o}).call(this,n(723)(e))},function(e,t,n){var r=n(135),i=n(205);function o(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}o.prototype=r(i.prototype),o.prototype.constructor=o,e.exports=o},function(e,t,n){var r=n(45);e.exports=function(e,t){var n=r(e),i=Number(t);return n.setDate(n.getDate()+i),n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chain=void 0;var r=s(n(76)),i=s(n(171)),o=s(n(1)),a=s(n(2));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){(0,o.default)(this,e),"function"==typeof t&&(this.request=t)}return(0,a.default)(e,[{key:"request",value:function(e,t,n){throw new Error("request is not implemented")}}]),e}();t.default=u;var c=function(e){return"function"==typeof e?new u(e):e},l=function(e,t){if(t)return t;if(e.execute)return e.execute();throw new Error("No link could handle operation "+(0,i.default)(e))},f=(t.chain=function(e){return[].concat((0,r.default)(e),[l]).map(c).reduce(f)},function(e,t){return new u(function(n,r,i){return e.request(n,r,function(e,n){return t.request(e,n,i)})})})},,,,,,,,function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(497),i=n(417)(r);e.exports=i},function(e,t,n){var r=n(311),i=n(509),o=n(510);e.exports=function(e,t,n){return t==t?o(e,t,n):r(e,i,n)}},function(e,t,n){var r=n(434),i=n(456),o=n(20);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),i):void 0}},function(e,t,n){var r=n(281),i=n(109),o=n(57),a=n(198),s=n(619),u="[object Map]",c="[object Set]";e.exports=function(e){if(null==e)return 0;if(o(e))return a(e)?s(e):e.length;var t=i(e);return t==u||t==c?e.size:r(e).length}},,,,,,,function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";var r=n(10),i=n.n(r),o=n(51),a=n.n(o),s=n(23),u=n.n(s),c=n(93),l=n.n(c),f=n(47),d=n.n(f);const p=i.a.Readable,h=Symbol("buffer"),v=Symbol("type");class y{constructor(){this[v]="";const e=arguments[0],t=arguments[1],n=[];let r=0;if(e){const t=e,i=Number(t.length);for(let e=0;e<i;e++){const i=t[e];let o;r+=(o=i instanceof Buffer?i:ArrayBuffer.isView(i)?Buffer.from(i.buffer,i.byteOffset,i.byteLength):i instanceof ArrayBuffer?Buffer.from(i):i instanceof y?i[h]:Buffer.from("string"==typeof i?i:String(i))).length,n.push(o)}}this[h]=Buffer.concat(n);let i=t&&void 0!==t.type&&String(t.type).toLowerCase();i&&!/[^\u0020-\u007E]/.test(i)&&(this[v]=i)}get size(){return this[h].length}get type(){return this[v]}text(){return Promise.resolve(this[h].toString())}arrayBuffer(){const e=this[h],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new p;return e._read=function(){},e.push(this[h]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],n=arguments[1];let r,i;r=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),i=void 0===n?e:n<0?Math.max(e+n,0):Math.min(n,e);const o=Math.max(i-r,0),a=this[h].slice(r,r+o),s=new y([],{type:arguments[2]});return s[h]=a,s}}function g(e,t,n){Error.call(this,e),this.message=e,this.type=t,n&&(this.code=this.errno=n.code),Error.captureStackTrace(this,this.constructor)}let m;Object.defineProperties(y.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(y.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,g.prototype.name="FetchError";try{m=n(426).convert}catch(e){}const b=Symbol("Body internals"),w=i.a.PassThrough;function _(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.size;let o=void 0===r?0:r;var a=n.timeout;let s=void 0===a?0:a;null==e?e=null:k(e)?e=Buffer.from(e.toString()):O(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof i.a||(e=Buffer.from(String(e)))),this[b]={body:e,disturbed:!1,error:null},this.size=o,this.timeout=s,e instanceof i.a&&e.on("error",function(e){const n="AbortError"===e.name?e:new g(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[b].error=n})}function x(){var e=this;if(this[b].disturbed)return _.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[b].disturbed=!0,this[b].error)return _.Promise.reject(this[b].error);let t=this.body;if(null===t)return _.Promise.resolve(Buffer.alloc(0));if(O(t)&&(t=t.stream()),Buffer.isBuffer(t))return _.Promise.resolve(t);if(!(t instanceof i.a))return _.Promise.resolve(Buffer.alloc(0));let n=[],r=0,o=!1;return new _.Promise(function(i,a){let s;e.timeout&&(s=setTimeout(function(){o=!0,a(new g(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)),t.on("error",function(t){"AbortError"===t.name?(o=!0,a(t)):a(new g(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))}),t.on("data",function(t){if(!o&&null!==t){if(e.size&&r+t.length>e.size)return o=!0,void a(new g(`content size at ${e.url} over limit: ${e.size}`,"max-size"));r+=t.length,n.push(t)}}),t.on("end",function(){if(!o){clearTimeout(s);try{i(Buffer.concat(n,r))}catch(t){a(new g(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}})})}function k(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function O(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function S(e){let t,n,r=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return r instanceof i.a&&"function"!=typeof r.getBoundary&&(t=new w,n=new w,r.pipe(t),r.pipe(n),e[b].body=t,r=n),r}function E(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":k(e)?"application/x-www-form-urlencoded;charset=UTF-8":O(e)?e.type||null:Buffer.isBuffer(e)?null:"[object ArrayBuffer]"===Object.prototype.toString.call(e)?null:ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?`multipart/form-data;boundary=${e.getBoundary()}`:e instanceof i.a?null:"text/plain;charset=UTF-8"}function A(e){const t=e.body;return null===t?0:O(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}_.prototype={get body(){return this[b].body},get bodyUsed(){return this[b].disturbed},arrayBuffer(){return x.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return x.call(this).then(function(t){return Object.assign(new y([],{type:e.toLowerCase()}),{[h]:t})})},json(){var e=this;return x.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(t){return _.Promise.reject(new g(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}})},text(){return x.call(this).then(function(e){return e.toString()})},buffer(){return x.call(this)},textConverted(){var e=this;return x.call(this).then(function(t){return function(e,t){if("function"!=typeof m)throw new Error("The package `encoding` must be installed to use the textConverted() function");const n=t.get("content-type");let r,i,o="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));i=e.slice(0,1024).toString(),!r&&i&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!r&&i&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(r=/charset=(.*)/i.exec(r.pop()));!r&&i&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));r&&("gb2312"!==(o=r.pop())&&"gbk"!==o||(o="gb18030"));return m(e,"UTF-8",o).toString()}(t,e.headers)})}},Object.defineProperties(_.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),_.mixIn=function(e){for(const t of Object.getOwnPropertyNames(_.prototype))if(!(t in e)){const n=Object.getOwnPropertyDescriptor(_.prototype,t);Object.defineProperty(e,t,n)}},_.Promise=global.Promise;const C=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,j=/[^\t\x20-\x7e\x80-\xff]/;function T(e){if(e=`${e}`,C.test(e)||""===e)throw new TypeError(`${e} is not a legal HTTP header name`)}function P(e){if(e=`${e}`,j.test(e))throw new TypeError(`${e} is not a legal HTTP header value`)}function R(e,t){t=t.toLowerCase();for(const n in e)if(n.toLowerCase()===t)return n}const M=Symbol("map");class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[M]=Object.create(null),e instanceof I){const t=e.raw(),n=Object.keys(t);for(const e of n)for(const n of t[e])this.append(e,n)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const n=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");n.push(Array.from(t))}for(const e of n){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const n=e[t];this.append(t,n)}}}}get(e){T(e=`${e}`);const t=R(this[M],e);return void 0===t?null:this[M][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=D(this),r=0;for(;r<n.length;){var i=n[r];const o=i[0],a=i[1];e.call(t,a,o,this),n=D(this),r++}}set(e,t){t=`${t}`,T(e=`${e}`),P(t);const n=R(this[M],e);this[M][void 0!==n?n:e]=[t]}append(e,t){t=`${t}`,T(e=`${e}`),P(t);const n=R(this[M],e);void 0!==n?this[M][n].push(t):this[M][e]=[t]}has(e){return T(e=`${e}`),void 0!==R(this[M],e)}delete(e){T(e=`${e}`);const t=R(this[M],e);void 0!==t&&delete this[M][t]}raw(){return this[M]}keys(){return L(this,"key")}values(){return L(this,"value")}[Symbol.iterator](){return L(this,"key+value")}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(e[M]).sort().map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[M][t].join(", ")}:function(t){return[t.toLowerCase(),e[M][t].join(", ")]})}I.prototype.entries=I.prototype[Symbol.iterator],Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(I.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const N=Symbol("internal");function L(e,t){const n=Object.create(B);return n[N]={target:e,kind:t,index:0},n}const B=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==B)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[N];const t=e.target,n=e.kind,r=e.index,i=D(t,n);return r>=i.length?{value:void 0,done:!0}:(this[N].index=r+1,{value:i[r],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function z(e){const t=Object.assign({__proto__:null},e[M]),n=R(e[M],"Host");return void 0!==n&&(t[n]=t[n][0]),t}Object.defineProperty(B,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const F=Symbol("Response internals"),U=a.a.STATUS_CODES;class q{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_.call(this,e,t);const n=t.status||200,r=new I(t.headers);if(null!=e&&!r.has("Content-Type")){const t=E(e);t&&r.append("Content-Type",t)}this[F]={url:t.url,status:n,statusText:t.statusText||U[n],headers:r,counter:t.counter}}get url(){return this[F].url||""}get status(){return this[F].status}get ok(){return this[F].status>=200&&this[F].status<300}get redirected(){return this[F].counter>0}get statusText(){return this[F].statusText}get headers(){return this[F].headers}clone(){return new q(S(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}_.mixIn(q.prototype),Object.defineProperties(q.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(q.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const $=Symbol("Request internals"),H=u.a.parse,G=u.a.format,V="destroy"in i.a.Readable.prototype;function J(e){return"object"==typeof e&&"object"==typeof e[$]}class Q{constructor(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};J(e)?t=H(e.url):(t=e&&e.href?H(e.href):H(`${e}`),e={});let r=n.method||e.method||"GET";if(r=r.toUpperCase(),(null!=n.body||J(e)&&null!==e.body)&&("GET"===r||"HEAD"===r))throw new TypeError("Request with GET/HEAD method cannot have body");let i=null!=n.body?n.body:J(e)&&null!==e.body?S(e):null;_.call(this,i,{timeout:n.timeout||e.timeout||0,size:n.size||e.size||0});const o=new I(n.headers||e.headers||{});if(null!=i&&!o.has("Content-Type")){const e=E(i);e&&o.append("Content-Type",e)}let a=J(e)?e.signal:null;if("signal"in n&&(a=n.signal),null!=a&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(a))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[$]={method:r,redirect:n.redirect||e.redirect||"follow",headers:o,parsedURL:t,signal:a},this.follow=void 0!==n.follow?n.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==n.compress?n.compress:void 0===e.compress||e.compress,this.counter=n.counter||e.counter||0,this.agent=n.agent||e.agent}get method(){return this[$].method}get url(){return G(this[$].parsedURL)}get headers(){return this[$].headers}get redirect(){return this[$].redirect}get signal(){return this[$].signal}clone(){return new Q(this)}}function Y(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}_.mixIn(Q.prototype),Object.defineProperty(Q.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Q.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),Y.prototype=Object.create(Error.prototype),Y.prototype.constructor=Y,Y.prototype.name="AbortError";const W=i.a.PassThrough,Z=u.a.resolve;function K(e,t){if(!K.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return _.Promise=K.Promise,new K.Promise(function(n,r){const o=new Q(e,t),s=function(e){const t=e[$].parsedURL,n=new I(e[$].headers);if(n.has("Accept")||n.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof i.a.Readable&&!V)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let r=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(r="0"),null!=e.body){const t=A(e);"number"==typeof t&&(r=String(t))}r&&n.set("Content-Length",r),n.has("User-Agent")||n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!n.has("Accept-Encoding")&&n.set("Accept-Encoding","gzip,deflate");let o=e.agent;return"function"==typeof o&&(o=o(t)),n.has("Connection")||o||n.set("Connection","close"),Object.assign({},t,{method:e.method,headers:z(n),agent:o})}(o),u=("https:"===s.protocol?l.a:a.a).request,c=o.signal;let f=null;const p=function(){let e=new Y("The user aborted a request.");r(e),o.body&&o.body instanceof i.a.Readable&&o.body.destroy(e),f&&f.body&&f.body.emit("error",e)};if(c&&c.aborted)return void p();const h=function(){p(),m()},v=u(s);let y;function m(){v.abort(),c&&c.removeEventListener("abort",h),clearTimeout(y)}c&&c.addEventListener("abort",h),o.timeout&&v.once("socket",function(e){y=setTimeout(function(){r(new g(`network timeout at: ${o.url}`,"request-timeout")),m()},o.timeout)}),v.on("error",function(e){r(new g(`request to ${o.url} failed, reason: ${e.message}`,"system",e)),m()}),v.on("response",function(e){clearTimeout(y);const t=function(e){const t=new I;for(const n of Object.keys(e))if(!C.test(n))if(Array.isArray(e[n]))for(const r of e[n])j.test(r)||(void 0===t[M][n]?t[M][n]=[r]:t[M][n].push(r));else j.test(e[n])||(t[M][n]=[e[n]]);return t}(e.headers);if(K.isRedirect(e.statusCode)){const i=t.get("Location"),a=null===i?null:Z(o.url,i);switch(o.redirect){case"error":return r(new g(`redirect mode is set to error: ${o.url}`,"no-redirect")),void m();case"manual":if(null!==a)try{t.set("Location",a)}catch(e){r(e)}break;case"follow":if(null===a)break;if(o.counter>=o.follow)return r(new g(`maximum redirect reached at: ${o.url}`,"max-redirect")),void m();const i={headers:new I(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body,signal:o.signal,timeout:o.timeout};return 303!==e.statusCode&&o.body&&null===A(o)?(r(new g("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void m()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(i.method="GET",i.body=void 0,i.headers.delete("content-length")),n(K(new Q(a,i))),void m())}}e.once("end",function(){c&&c.removeEventListener("abort",h)});let i=e.pipe(new W);const a={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout,counter:o.counter},s=t.get("Content-Encoding");if(!o.compress||"HEAD"===o.method||null===s||204===e.statusCode||304===e.statusCode)return f=new q(i,a),void n(f);const u={flush:d.a.Z_SYNC_FLUSH,finishFlush:d.a.Z_SYNC_FLUSH};if("gzip"==s||"x-gzip"==s)return i=i.pipe(d.a.createGunzip(u)),f=new q(i,a),void n(f);if("deflate"!=s&&"x-deflate"!=s){if("br"==s&&"function"==typeof d.a.createBrotliDecompress)return i=i.pipe(d.a.createBrotliDecompress()),f=new q(i,a),void n(f);f=new q(i,a),n(f)}else{e.pipe(new W).once("data",function(e){i=8==(15&e[0])?i.pipe(d.a.createInflate()):i.pipe(d.a.createInflateRaw()),f=new q(i,a),n(f)})}}),function(e,t){const n=t.body;null===n?e.end():O(n)?n.stream().pipe(e):Buffer.isBuffer(n)?(e.write(n),e.end()):n.pipe(e)}(v,o)})}K.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},K.Promise=global.Promise,t.a=K},function(e,t){e.exports=require("os")},function(e,t,n){var r=n(187),i=n(502),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},function(e,t,n){var r=n(418),i=n(310),o=r?function(e){return r.get(e)}:i;e.exports=o},function(e,t){e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},,function(e,t,n){var r=function(){return this||"object"==typeof self&&self}()||Function("return this")(),i=r.regeneratorRuntime&&Object.getOwnPropertyNames(r).indexOf("regeneratorRuntime")>=0,o=i&&r.regeneratorRuntime;if(r.regeneratorRuntime=void 0,e.exports=n(462),i)r.regeneratorRuntime=o;else try{delete r.regeneratorRuntime}catch(e){r.regeneratorRuntime=void 0}},function(e,t,n){var r=n(465),i={};for(var o in r)r.hasOwnProperty(o)&&(i[r[o]]=o);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,c=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:c})}a.rgb.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),u=s-a;return s===a?t=0:r===s?t=(i-o)/u:i===s?t=2+(o-r)/u:o===s&&(t=4+(r-i)/u),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?u/(s+a):u/(2-s-a)),100*n]},a.rgb.hsv=function(e){var t,n,r,i,o,a=e[0]/255,s=e[1]/255,u=e[2]/255,c=Math.max(a,s,u),l=c-Math.min(a,s,u),f=function(e){return(c-e)/6/l+.5};return 0===l?i=o=0:(o=l/c,t=f(a),n=f(s),r=f(u),a===c?i=r-n:s===c?i=1/3+t-r:u===c&&(i=2/3+n-t),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},a.rgb.hwb=function(e){var t=e[0],n=e[1],r=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]},a.rgb.cmyk=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255;return[100*((1-n-(t=Math.min(1-n,1-r,1-i)))/(1-t)||0),100*((1-r-t)/(1-t)||0),100*((1-i-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=i[e];if(t)return t;var n,o,a,s=1/0;for(var u in r)if(r.hasOwnProperty(u)){var c=r[u],l=(o=e,a=c,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));l<s&&(s=l,n=u)}return n},a.keyword.rgb=function(e){return r[e]},a.rgb.xyz=function(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),n=t[0],r=t[1],i=t[2];return r/=100,i/=108.883,n=(n/=95.047)>.008856?Math.pow(n,1/3):7.787*n+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(n-r),200*(r-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,u=e[2]/100;if(0===s)return[o=255*u,o,o];t=2*u-(n=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var c=0;c<3;c++)(r=a+1/3*-(c-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[c]=255*o;return i},a.hsl.hsv=function(e){var t=e[0],n=e[1]/100,r=e[2]/100,i=n,o=Math.max(r,.01);return n*=(r*=2)<=1?r:2-r,i*=o<=1?o:2-o,[t,100*(0===r?2*i/(o+i):2*n/(r+n)),100*((r+n)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),u=255*r*(1-n*(1-o));switch(r*=255,i){case 0:return[r,u,a];case 1:return[s,r,a];case 2:return[a,r,u];case 3:return[a,s,r];case 4:return[u,a,r];case 5:return[r,a,s]}},a.hsv.hsl=function(e){var t,n,r,i=e[0],o=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return r=(2-o)*a,n=o*s,[i,100*(n=(n/=(t=(2-o)*s)<=1?t:2-t)||0),100*(r/=2)]},a.hwb.rgb=function(e){var t,n,r,i,o,a,s,u=e[0]/360,c=e[1]/100,l=e[2]/100,f=c+l;switch(f>1&&(c/=f,l/=f),r=6*u-(t=Math.floor(6*u)),0!=(1&t)&&(r=1-r),i=c+r*((n=1-l)-c),t){default:case 6:case 0:o=n,a=i,s=c;break;case 1:o=i,a=n,s=c;break;case 2:o=c,a=n,s=i;break;case 3:o=c,a=i,s=n;break;case 4:o=i,a=c,s=n;break;case 5:o=n,a=c,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,n=e[1]/100,r=e[2]/100,i=e[3]/100;return[255*(1-Math.min(1,t*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i))]},a.xyz.rgb=function(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=(t=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,[255*(t=Math.min(Math.max(0,t),1)),255*(n=Math.min(Math.max(0,n),1)),255*(r=Math.min(Math.max(0,r),1))]},a.xyz.lab=function(e){var t=e[0],n=e[1],r=e[2];return n/=100,r/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(t-n),200*(n-(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116))]},a.lab.xyz=function(e){var t,n,r,i=e[0];t=e[1]/500+(n=(i+16)/116),r=n-e[2]/200;var o=Math.pow(n,3),a=Math.pow(t,3),s=Math.pow(r,3);return n=o>.008856?o:(n-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,r=s>.008856?s:(r-16/116)/7.787,[t*=95.047,n*=100,r*=108.883]},a.lab.lch=function(e){var t,n=e[0],r=e[1],i=e[2];return(t=360*Math.atan2(i,r)/2/Math.PI)<0&&(t+=360),[n,Math.sqrt(r*r+i*i),t]},a.lch.lab=function(e){var t,n=e[0],r=e[1];return t=e[2]/360*2*Math.PI,[n,r*Math.cos(t),r*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],n=e[1],r=e[2],i=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(r/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],n=e[1],r=e[2];return t===n&&n===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var n=.5*(1+~~(e>50));return[(1&t)*n*255,(t>>1&1)*n*255,(t>>2&1)*n*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var n;return e-=16,[Math.floor(e/36)/5*255,Math.floor((n=e%36)/6)/5*255,n%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var n=t[0];3===t[0].length&&(n=n.split("").map(function(e){return e+e}).join(""));var r=parseInt(n,16);return[r>>16&255,r>>8&255,255&r]},a.rgb.hcg=function(e){var t,n=e[0]/255,r=e[1]/255,i=e[2]/255,o=Math.max(Math.max(n,r),i),a=Math.min(Math.min(n,r),i),s=o-a;return t=s<=0?0:o===n?(r-i)/s%6:o===r?2+(i-n)/s:4+(n-r)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=1,i=0;return(r=n<.5?2*t*n:2*t*(1-n))<1&&(i=(n-.5*r)/(1-r)),[e[0],100*r,100*i]},a.hsv.hcg=function(e){var t=e[1]/100,n=e[2]/100,r=t*n,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.hcg.rgb=function(e){var t=e[0]/360,n=e[1]/100,r=e[2]/100;if(0===n)return[255*r,255*r,255*r];var i,o=[0,0,0],a=t%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-n)*r,[255*(n*o[0]+i),255*(n*o[1]+i),255*(n*o[2]+i)]},a.hcg.hsv=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t),r=0;return n>0&&(r=t/n),[e[0],100*r,100*n]},a.hcg.hsl=function(e){var t=e[1]/100,n=e[2]/100*(1-t)+.5*t,r=0;return n>0&&n<.5?r=t/(2*n):n>=.5&&n<1&&(r=t/(2*(1-n))),[e[0],100*r,100*n]},a.hcg.hwb=function(e){var t=e[1]/100,n=t+e[2]/100*(1-t);return[e[0],100*(n-t),100*(1-n)]},a.hwb.hcg=function(e){var t=e[1]/100,n=1-e[2]/100,r=n-t,i=0;return r<1&&(i=(n-r)/(1-r)),[e[0],100*r,100*i]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),n=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(n.length)+n},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t){function n(e,t){var n=[],r=[];return null==t&&(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"}),function(i,o){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?r.splice(a,1/0,i):r.push(i),~n.indexOf(o)&&(o=t.call(this,i,o))}else n.push(o);return null==e?o:e.call(this,i,o)}}(e.exports=function(e,t,r,i){return JSON.stringify(e,n(t,i),r)}).getSerialize=n},function(e,t){var n="object"==typeof global&&global&&global.Object===Object&&global;e.exports=n},function(e,t){e.exports=function(e){return void 0===e}},,,,,,,,function(e,t,n){"use strict";var r=n(482),i=n(483),o=n(299);e.exports={formats:o,parse:i,stringify:r}},function(e,t,n){"use strict";var r=Object.prototype.hasOwnProperty,i=Array.isArray,o=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),a=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)void 0!==e[r]&&(n[r]=e[r]);return n};e.exports={arrayToObject:a,assign:function(e,t){return Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var o=t[r],a=o.obj[o.prop],s=Object.keys(a),u=0;u<s.length;++u){var c=s[u],l=a[c];"object"==typeof l&&null!==l&&-1===n.indexOf(l)&&(t.push({obj:a,prop:c}),n.push(l))}return function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(i(n)){for(var r=[],o=0;o<n.length;++o)void 0!==n[o]&&r.push(n[o]);t.obj[t.prop]=r}}}(t),e},decode:function(e,t,n){var r=e.replace(/\+/g," ");if("iso-8859-1"===n)return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch(e){return r}},encode:function(e,t,n){if(0===e.length)return e;var r="string"==typeof e?e:String(e);if("iso-8859-1"===n)return escape(r).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});for(var i="",a=0;a<r.length;++a){var s=r.charCodeAt(a);45===s||46===s||95===s||126===s||s>=48&&s<=57||s>=65&&s<=90||s>=97&&s<=122?i+=r.charAt(a):s<128?i+=o[s]:s<2048?i+=o[192|s>>6]+o[128|63&s]:s<55296||s>=57344?i+=o[224|s>>12]+o[128|s>>6&63]+o[128|63&s]:(a+=1,s=65536+((1023&s)<<10|1023&r.charCodeAt(a)),i+=o[240|s>>18]+o[128|s>>12&63]+o[128|s>>6&63]+o[128|63&s])}return i},isBuffer:function(e){return!(!e||"object"!=typeof e||!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e)))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,n,o){if(!n)return t;if("object"!=typeof n){if(i(t))t.push(n);else{if(!t||"object"!=typeof t)return[t,n];(o&&(o.plainObjects||o.allowPrototypes)||!r.call(Object.prototype,n))&&(t[n]=!0)}return t}if(!t||"object"!=typeof t)return[t].concat(n);var s=t;return i(t)&&!i(n)&&(s=a(t,o)),i(t)&&i(n)?(n.forEach(function(n,i){if(r.call(t,i)){var a=t[i];a&&"object"==typeof a&&n&&"object"==typeof n?t[i]=e(a,n,o):t.push(n)}else t[i]=n}),t):Object.keys(n).reduce(function(t,i){var a=n[i];return r.call(t,i)?t[i]=e(t[i],a,o):t[i]=a,t},s)}}},function(e,t,n){"use strict";var r=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return r.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},,function(e,t,n){var r=n(77),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},function(e,t){var n=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},function(e,t,n){var r=n(56),i=n(146);e.exports=function(e){return r(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var u=n[r];u&&e(t,u,r,a)}return t})}},function(e,t,n){var r=n(265),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),u=Array(s);++a<s;)u[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(u),r(e,this,c)}}},function(e,t,n){var r=n(306),i=n(147),o=n(12),a=n(117),s=n(134),u=n(148),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),l=!n&&i(e),f=!n&&!l&&a(e),d=!n&&!l&&!f&&u(e),p=n||l||f||d,h=p?r(e.length,String):[],v=h.length;for(var y in e)!t&&!c.call(e,y)||p&&("length"==y||f&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||s(y,v))||h.push(y);return h}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t){e.exports=function(e,t){return function(n){return e(t(n))}}},,function(e,t,n){var r=n(77)(n(37),"WeakMap");e.exports=r},function(e,t){e.exports=function(){}},function(e,t){e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},function(e,t,n){var r=n(513)();e.exports=r},,function(e,t,n){var r=n(95),i=n(108);e.exports=function(e,t,n){(void 0===n||i(e[t],n))&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){(function(e){var r=n(37),i=t&&!t.nodeType&&t,o=i&&"object"==typeof e&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(67)(e))},function(e,t,n){var r=n(209);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(37).Uint8Array;e.exports=r},function(e,t,n){var r=n(135),i=n(155),o=n(187);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t,n){var r=n(156),i=n(422),o=n(157),a=1,s=2;e.exports=function(e,t,n,u,c,l){var f=n&a,d=e.length,p=t.length;if(d!=p&&!(f&&p>d))return!1;var h=l.get(e);if(h&&l.get(t))return h==t;var v=-1,y=!0,g=n&s?new r:void 0;for(l.set(e,t),l.set(t,e);++v<d;){var m=e[v],b=t[v];if(u)var w=f?u(b,m,v,t,e,l):u(m,b,v,e,t,l);if(void 0!==w){if(w)continue;y=!1;break}if(g){if(!i(t,function(e,t){if(!o(g,t)&&(m===e||c(m,e,n,u,l)))return g.push(t)})){y=!1;break}}else if(m!==b&&!c(m,b,n,u,l)){y=!1;break}}return l.delete(e),l.delete(t),y}},function(e,t,n){var r=n(322),i=n(211),o=n(74);e.exports=function(e){return r(e,o,i)}},function(e,t,n){var r=n(195),i=n(12);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(77)(n(37),"Set");e.exports=r},function(e,t,n){var r=n(31);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&n[e]===t&&(void 0!==t||e in Object(n))}}},function(e,t,n){var r=n(556),i=n(328);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t,n){var r=n(97),i=n(147),o=n(12),a=n(134),s=n(202),u=n(92);e.exports=function(e,t,n){for(var c=-1,l=(t=r(t,e)).length,f=!1;++c<l;){var d=u(t[c]);if(!(f=null!=e&&n(e,d)))break;e=e[d]}return f||++c!=l?f:!!(l=null==e?0:e.length)&&s(l)&&a(d,l)&&(o(e)||i(e))}},function(e,t,n){var r=n(158),i=n(330),o=n(97);e.exports=function(e,t,n){for(var a=-1,s=t.length,u={};++a<s;){var c=t[a],l=r(e,c);n(l,c)&&i(u,o(c,e),l)}return u}},function(e,t,n){var r=n(186),i=n(97),o=n(134),a=n(31),s=n(92);e.exports=function(e,t,n,u){if(!a(e))return e;for(var c=-1,l=(t=i(t,e)).length,f=l-1,d=e;null!=d&&++c<l;){var p=s(t[c]),h=n;if(c!=f){var v=d[p];void 0===(h=u?u(v,p,d):void 0)&&(h=a(v)?v:o(t[c+1])?[]:{})}r(d,p,h),d=d[p]}return e}},function(e,t,n){var r=n(136),i=n(57);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,function(e,r,i){o[++n]=t(e,r,i)}),o}},function(e){e.exports=JSON.parse('[["a140","",62],["a180","",32],["a240","",62],["a280","",32],["a2ab","",5],["a2e3",""],["a2ef",""],["a2fd",""],["a340","",62],["a380","",31,""],["a440","",62],["a480","",32],["a4f4","",10],["a540","",62],["a580","",32],["a5f7","",7],["a640","",62],["a680","",32],["a6b9","",7],["a6d9","",6],["a6ec",""],["a6f3",""],["a6f6","",8],["a740","",62],["a780","",32],["a7c2","",14],["a7f2","",12],["a896","",10],["a8bc",""],["a8bf",""],["a8c1",""],["a8ea","",20],["a958",""],["a95b",""],["a95d",""],["a989","",11],["a997","",12],["a9f0","",14],["aaa1","",93],["aba1","",93],["aca1","",93],["ada1","",93],["aea1","",93],["afa1","",93],["d7fa","",4],["f8a1","",93],["f9a1","",93],["faa1","",93],["fba1","",93],["fca1","",93],["fda1","",93],["fe50",""],["fe80","",6,"",93]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["a140",""],["a1a1","",4,""],["a240","",7,""],["a2a1","",9,"",9,"",8,"",25,"",21],["a340","",16,"",6,"",16,"",6,"",10],["a3a1","",25,""],["a3e1",""],["a440",""],["a4a1",""],["a540",""],["a5a1",""],["a640",""],["a6a1",""],["a740",""],["a7a1",""],["a840",""],["a8a1",""],["a940",""],["a9a1",""],["aa40",""],["aaa1",""],["ab40",""],["aba1",""],["ac40",""],["aca1",""],["ad40",""],["ada1",""],["ae40",""],["aea1",""],["af40",""],["afa1",""],["b040",""],["b0a1",""],["b140",""],["b1a1",""],["b240",""],["b2a1",""],["b340",""],["b3a1",""],["b440",""],["b4a1",""],["b540",""],["b5a1",""],["b640",""],["b6a1",""],["b740",""],["b7a1",""],["b840",""],["b8a1",""],["b940",""],["b9a1",""],["ba40",""],["baa1",""],["bb40",""],["bba1",""],["bc40",""],["bca1",""],["bd40",""],["bda1",""],["be40",""],["bea1",""],["bf40",""],["bfa1",""],["c040",""],["c0a1",""],["c140",""],["c1a1",""],["c240",""],["c2a1",""],["c340",""],["c3a1",""],["c440",""],["c4a1",""],["c540",""],["c5a1",""],["c640",""],["c940",""],["c9a1",""],["ca40",""],["caa1",""],["cb40",""],["cba1",""],["cc40",""],["cca1",""],["cd40",""],["cda1",""],["ce40",""],["cea1",""],["cf40",""],["cfa1",""],["d040",""],["d0a1",""],["d140",""],["d1a1",""],["d240",""],["d2a1",""],["d340",""],["d3a1",""],["d440",""],["d4a1",""],["d540",""],["d5a1",""],["d640",""],["d6a1",""],["d740",""],["d7a1",""],["d840",""],["d8a1",""],["d940",""],["d9a1",""],["da40",""],["daa1",""],["db40",""],["dba1",""],["dc40",""],["dca1",""],["dd40",""],["dda1",""],["de40",""],["dea1",""],["df40",""],["dfa1",""],["e040",""],["e0a1",""],["e140",""],["e1a1",""],["e240",""],["e2a1",""],["e340",""],["e3a1",""],["e440",""],["e4a1",""],["e540",""],["e5a1",""],["e640",""],["e6a1",""],["e740",""],["e7a1",""],["e840",""],["e8a1",""],["e940",""],["e9a1",""],["ea40",""],["eaa1",""],["eb40",""],["eba1",""],["ec40",""],["eca1",""],["ed40",""],["eda1",""],["ee40",""],["eea1",""],["ef40",""],["efa1",""],["f040",""],["f0a1",""],["f140",""],["f1a1",""],["f240",""],["f2a1",""],["f340",""],["f3a1",""],["f440",""],["f4a1",""],["f540",""],["f5a1",""],["f640",""],["f6a1",""],["f740",""],["f7a1",""],["f840",""],["f8a1",""],["f940",""],["f9a1",""]]')},,,function(e,t,n){var r=n(596),i=n(597),o=n(20),a=n(12);e.exports=function(e,t){return function(n,s){var u=a(n)?r:i,c=t?t():{};return u(n,e,o(s,2),c)}}},function(e,t,n){var r=n(195),i=n(155),o=n(211),a=n(323),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},,function(e,t){const n=function(e){return Object.assign(this,e),this};n.prototype.toString=function(){throw new Error("Cannot convert Secret to string")},e.exports=n},function(e,t){function n(){this._events={}}n.prototype={on:function(e,t){this._events||(this._events={});var n=this._events;return(n[e]||(n[e]=[])).push(t),this},removeListener:function(e,t){var n,r=this._events[e]||[];for(n=r.length-1;n>=0&&r[n];n--)r[n]!==t&&r[n].cb!==t||r.splice(n,1)},removeAllListeners:function(e){e?this._events[e]&&(this._events[e]=[]):this._events={}},listeners:function(e){return this._events&&this._events[e]||[]},emit:function(e){this._events||(this._events={});var t,n=Array.prototype.slice.call(arguments,1),r=this._events[e]||[];for(t=r.length-1;t>=0&&r[t];t--)r[t].apply(this,n);return this},when:function(e,t){return this.once(e,t,!0)},once:function(e,t,n){if(!t)return this;function r(){n||this.removeListener(e,r),t.apply(this,arguments)&&n&&this.removeListener(e,r)}return r.cb=t,this.on(e,r),this}},n.mixin=function(e){var t,r=n.prototype;for(t in r)r.hasOwnProperty(t)&&(e.prototype[t]=r[t])},e.exports=n},function(e,t,n){e.exports=!n(28)&&!n(80)(function(){return 7!=Object.defineProperty(n(228)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports=n(61)},function(e,t,n){var r=n(44),i=n(46),o=n(99);e.exports=n(28)?Object.defineProperties:function(e,t){i(e);for(var n,a=o(t),s=a.length,u=0;s>u;)r.f(e,n=a[u++],t[n]);return e}},function(e,t,n){var r=n(81),i=n(62),o=n(654)(!1),a=n(231)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),u=0,c=[];for(n in s)n!=a&&r(s,n)&&c.push(n);for(;t.length>u;)r(s,n=t[u++])&&(~o(c,n)||c.push(n));return c}},function(e,t,n){var r=n(21).document;e.exports=r&&r.documentElement},function(e,t,n){var r=n(81),i=n(82),o=n(231)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var r=n(46);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&r(o.call(e)),t}}},function(e,t,n){var r=n(98),i=n(22)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[i]===e)}},function(e,t,n){var r=n(22)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},e(o)}catch(e){}return n}},function(e,t,n){e.exports={default:n(658),__esModule:!0}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(123);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(344),i=n(233).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){e.exports={default:n(681),__esModule:!0}},function(e,t,n){var r=n(28),i=n(99),o=n(62),a=n(125).f;e.exports=function(e){return function(t){for(var n,s=o(t),u=i(s),c=u.length,l=0,f=[];c>l;)n=u[l++],r&&!a.call(s,n)||f.push(e?[n,s[n]]:s[n]);return f}}},function(e,t,n){var r=n(46),i=n(121),o=n(22)("species");e.exports=function(e,t){var n,a=r(e).constructor;return void 0===a||null==(n=r(a)[o])?t:i(n)}},function(e,t,n){var r,i,o,a=n(49),s=n(700),u=n(345),c=n(228),l=n(21),f=l.process,d=l.setImmediate,p=l.clearImmediate,h=l.MessageChannel,v=l.Dispatch,y=0,g={},m=function(){var e=+this;if(g.hasOwnProperty(e)){var t=g[e];delete g[e],t()}},b=function(e){m.call(e.data)};d&&p||(d=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return g[++y]=function(){s("function"==typeof e?e:Function(e),t)},r(y),y},p=function(e){delete g[e]},"process"==n(123)(f)?r=function(e){f.nextTick(a(m,e,1))}:v&&v.now?r=function(e){v.now(a(m,e,1))}:h?(o=(i=new h).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(e){l.postMessage(e+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in c("script")?function(e){u.appendChild(c("script")).onreadystatechange=function(){u.removeChild(this),m.call(e)}}:function(e){setTimeout(a(m,e,1),0)}),e.exports={set:d,clear:p}},function(e,t){e.exports=function(e){try{return{e:!1,v:e()}}catch(e){return{e:!0,v:e}}}},function(e,t,n){var r=n(46),i=n(38),o=n(241);e.exports=function(e,t){if(r(e),i(t)&&t.constructor===e)return t;var n=o.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var r=n(21),i=n(6),o=n(44),a=n(28),s=n(22)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];a&&t&&!t[s]&&o.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(44).f,i=n(162),o=n(242),a=n(49),s=n(240),u=n(126),c=n(227),l=n(351),f=n(360),d=n(28),p=n(167).fastKey,h=n(243),v=d?"_s":"size",y=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,c){var l=e(function(e,r){s(e,l,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[v]=0,null!=r&&u(r,n,e[c],e)});return o(l.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[v]=0},delete:function(e){var n=h(this,t),r=y(n,e);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(e){h(this,t);for(var n,r=a(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!y(h(this,t),e)}}),d&&r(l.prototype,"size",{get:function(){return h(this,t)[v]}}),l},def:function(e,t,n){var r,i,o=y(e,t);return o?o.v=n:(e._l=o={i:i=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[v]++,"F"!==i&&(e._i[i]=o)),e},getEntry:y,setStrong:function(e,t,n){c(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this._k,t=this._l;t&&t.r;)t=t.p;return this._t&&(this._l=t=t?t.n:this._t._f)?l(0,"keys"==e?t.k:"values"==e?t.v:[t.k,t.v]):(this._t=void 0,l(1))},n?"entries":"values",!n,!0),f(t)}}},function(e,t,n){"use strict";var r=n(21),i=n(13),o=n(167),a=n(80),s=n(61),u=n(242),c=n(126),l=n(240),f=n(38),d=n(124),p=n(44).f,h=n(708)(0),v=n(28);e.exports=function(e,t,n,y,g,m){var b=r[e],w=b,_=g?"set":"add",x=w&&w.prototype,k={};return v&&"function"==typeof w&&(m||x.forEach&&!a(function(){(new w).entries().next()}))?(w=t(function(t,n){l(t,w,e,"_c"),t._c=new b,null!=n&&c(n,g,t[_],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in x&&(!m||"clear"!=e)&&s(w.prototype,e,function(n,r){if(l(this,w,e),!t&&m&&!f(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),m||p(w.prototype,"size",{get:function(){return this._c.size}})):(w=y.getConstructor(t,e,g,_),u(w.prototype,n),o.NEED=!0),d(w,e),k[e]=w,i(i.G+i.W+i.F,k),m||y.setStrong(w,e,g),w}},function(e,t,n){var r=n(165),i=n(712);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){"use strict";var r=n(13);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){"use strict";var r=n(13),i=n(121),o=n(49),a=n(126);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,u=arguments[1];return i(this),(t=void 0!==u)&&i(u),null==e?new this:(n=[],t?(r=0,s=o(u,arguments[2],2),a(e,!1,function(e){n.push(s(e,r++))})):a(e,!1,n.push,n),new this(n))}})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.REGISTRATION_ABORT="REGISTRATION_ABORT"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.resolveClass=t.attachRelationships=t.responseToRelationship=t.pickTypeAndId=void 0;var r=d(n(4)),i=d(n(159)),o=d(n(138)),a=d(n(102)),s=d(n(368)),u=d(n(369)),c=d(n(172)),l=d(n(376)),f=d(n(377));function d(e){return e&&e.__esModule?e:{default:e}}var p=t.pickTypeAndId=function(e){return(0,i.default)(e,"_type","_id")},h=(t.responseToRelationship=function(e){return(0,o.default)({data:(t=p,n=e.data,Array.isArray(n)?n.map(t):t(n)),meta:e.meta,next:e.next,skip:e.skip});var t,n},function(e,t){return(0,r.default)({},e,{relationships:(0,r.default)({},e.relationships,t)})}),v=(t.attachRelationships=function(e,t){if(Array.isArray(e.data))return(0,r.default)({},e,{data:e.data.map(function(e){return h(e,t[e._id])})});var n=e.data;return(0,r.default)({},e,{data:h(n,t[n._id])})},{"io.cozy.files:has-many":f.default,"has-many":c.default,"belongs-to-in-place":u.default,"has-one":s.default,"has-one-in-place":u.default,"has-many-in-place":l.default});t.resolveClass=function(e,t){if(void 0===t)throw new Error("Undefined type for "+e);if("string"!=typeof t)return t;var n=v[e+":"+t]||v[t];if(n)return n;throw new Error("Unknown association '"+t+"'")},t.create=function(e,t,n){var r=t.name,i=t.type,o=t.doctype;if(e[r]instanceof a.default)throw new Error("Association "+r+" already exists");return new i(e,r,o,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(48)),i=d(n(4)),o=d(n(7)),a=d(n(1)),s=d(n(2)),u=d(n(8)),c=d(n(9)),l=d(n(11)),f=d(n(718));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"set",value:function(e){if(e&&e._type!==this.doctype)throw new Error("Tried to associate a "+e._type+" document to a HasOne relationship on "+this.doctype+" document");var t="relationships["+this.name+"].data";e?(0,f.default)(this.target,t,{_id:e._id,_type:e._type}):(0,f.default)(this.target,t,void 0)}},{key:"unset",value:function(){this.set(void 0)}},{key:"dehydrate",value:function(e){return(0,i.default)({},e,{relationships:(0,i.default)({},e.relationships,(0,r.default)({},this.name,{data:this.raw}))})}},{key:"raw",get:function(){return(0,l.default)(this.target,"relationships["+this.name+"].data",null)}},{key:"data",get:function(){return this.raw?this.get(this.doctype,this.raw._id):null}}],[{key:"query",value:function(e,t,n){var r=(0,l.default)(e,"relationships."+n.name+".data",{});return t.get(n.doctype,r._id)}}]),t}(d(n(102)).default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BelongsToInPlace=void 0;var r=l(n(48)),i=l(n(4)),o=l(n(7)),a=l(n(1)),s=l(n(2)),u=l(n(8)),c=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"dehydrate",value:function(e){return(0,i.default)({},e,(0,r.default)({},this.name,this.raw||void 0))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){return this.get(this.doctype,this.raw)}}],[{key:"query",value:function(e,t,n){var r=e[n.name];return t.getDocumentFromState(n.doctype,r)||t.get(n.doctype,r)}}]),t}(l(n(102)).default);t.default=f;t.BelongsToInPlace=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getQueryFromSlice=t.receiveQueryError=t.receiveQueryResult=t.initQuery=t.convert$gtNullSelectors=t.isReceivingData=t.isQueryAction=void 0;var r=b(n(48)),i=b(n(169)),o=b(n(64)),a=b(n(170)),s=b(n(76)),u=b(n(4)),c=b(n(130)),l=b(n(719)),f=b(n(444)),d=b(n(721)),p=b(n(194)),h=n(373),v=n(244),y=n(375),g=b(n(722)),m=b(n(11));function b(e){return e&&e.__esModule?e:{default:e}}var w="INIT_QUERY",_="RECEIVE_QUERY_RESULT",x="RECEIVE_QUERY_ERROR",k=t.isQueryAction=function(e){return-1!==[w,_,x].indexOf(e.type)},O=(t.isReceivingData=function(e){return e.type===_},{id:null,definition:null,fetchStatus:"pending",lastFetch:null,lastUpdate:null,lastError:null,hasMore:!1,count:0,data:[]}),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1];switch(t.type){case w:return(0,u.default)({},e,{id:t.queryId,definition:t.queryDefinition,fetchStatus:"loading"});case _:var n=t.response,r={fetchStatus:"loaded",lastFetch:Date.now(),lastUpdate:Date.now()};return n.data?Array.isArray(n.data)?(0,u.default)({},e,r,{hasMore:void 0!==n.next?n.next:e.hasMore,count:n.meta&&n.meta.count?n.meta.count:n.data.length,data:0===n.skip?n.data.map(y.properId):[].concat((0,s.default)(e.data),(0,s.default)(n.data.map(y.properId)))}):(0,u.default)({},e,r,{hasMore:!1,count:1,data:[(0,y.properId)(n.data)]}):e;case x:return(0,u.default)({},e,{id:t.queryId,fetchStatus:"failed",lastError:t.error});default:return e}},E=t.convert$gtNullSelectors=function e(t){var n={},r=!0,s=!1,u=void 0;try{for(var c,l=(0,o.default)((0,i.default)(t));!(r=(c=l.next()).done);r=!0){var f=c.value,d=(0,a.default)(f,2),h=d[0],v=d[1],y=(0,p.default)(v)?e(v):v;n["$gt"===h&&null===y?"$gtnull":h]=y}}catch(e){s=!0,u=e}finally{try{!r&&l.return&&l.return()}finally{if(s)throw u}}return n},A=function(e){var t,n=e.definition.doctype,r=(t=e.definition).selector?(g.default.use({$gtnull:function(e,t){return!!t}}),(0,g.default)(E(t.selector))):t.id?(0,g.default)({_id:t.id}):null;return function(e){return e._type===n&&(!(r&&!r(e))&&!e._deleted)}},C=function(e){return function(t){var n=(0,m.default)(e,"response.data")||(0,m.default)(e,"definition.document");return n?(Array.isArray(n)||(n=[n]),n.length?t.definition.doctype!==n[0]._type?t:function(e,t){var n=A(e),r=t.filter(function(e){return n(e)}).map(y.properId),i=t.filter(function(e){return!n(e)}).map(y.properId),o=e.data,a=(0,d.default)(o,i),s=(0,f.default)(r,o),c=(0,d.default)(o,r),p=a.length||s.length||c.length,h=(0,f.default)((0,l.default)(o,s),a);return(0,u.default)({},e,{data:h,count:h.length,lastUpdate:p?Date.now():e.lastUpdate})}(t,n):t):t}},j=function(e,t){return function(n){var r=e.updateQueries,i=e.response,o=r[n.id];if(!o)return n;var a=n.definition.doctype,s=n.data,c=o(T(t,a,s),i).map(y.properId);return(0,u.default)({},n,{data:c,count:c.length,lastUpdate:Date.now()})}};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t.type==w)return(0,u.default)({},e,(0,r.default)({},t.queryId,S(e[t.queryId],t)));if(k(t)){var o=C(t);return(0,c.default)(e,function(e){return e.id==t.queryId?S(e,t):i?o(e):e})}if((0,v.isReceivingMutationResult)(t)){var a=t.updateQueries?j(t,n):C(t);return(0,c.default)(e,a)}return e};t.initQuery=function(e,t){if(!t.doctype)throw new Error("Cannot init query with no doctype");return{type:w,queryId:e,queryDefinition:t}},t.receiveQueryResult=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,u.default)({type:_,queryId:e,response:t},n)},t.receiveQueryError=function(e,t){return{type:x,queryId:e,error:t}};var T=function(e,t,n){return n.map(function(n){return(0,h.getDocumentFromSlice)(e,t,n)})};t.getQueryFromSlice=function(e,t,n){if(!e||!e[t])return(0,u.default)({},O,{data:null});var r=e[t];return n?(0,u.default)({},r,{data:T(n,r.definition.doctype,r.data)}):r}},function(e,t,n){var r=n(156),i=n(188),o=n(216),a=n(43),s=n(87),u=n(157),c=Math.min;e.exports=function(e,t,n){for(var l=n?o:i,f=e[0].length,d=e.length,p=d,h=Array(d),v=1/0,y=[];p--;){var g=e[p];p&&t&&(g=a(g,s(t))),v=c(g.length,v),h[p]=!n&&(t||f>=120&&g.length>=120)?new r(p&&g):void 0}g=e[0];var m=-1,b=h[0];e:for(;++m<f&&y.length<v;){var w=g[m],_=t?t(w):w;if(w=n||0!==w?w:0,!(b?u(b,_):l(y,_,n))){for(p=d;--p;){var x=h[p];if(!(x?u(x,_):l(e[p],_,n)))continue e}b&&b.push(_),y.push(w)}}return y}},function(e,t,n){var r=n(119);e.exports=function(e){return r(e)?e:[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndMergeDocument=t.getCollectionFromSlice=t.getDocumentFromSlice=t.mergeDocumentsWithRelationships=void 0;var r=d(n(127)),i=d(n(48)),o=d(n(4)),a=n(370),s=n(244),u=d(n(71)),c=d(n(11)),l=d(n(374)),f=n(375);function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e,t){var n=t._type;if(!n)throw new Error("Document without _type");if(!(0,f.properId)(t))throw new Error("Document without id");var r=(0,c.default)(e,[n,(0,f.properId)(t)]);return(0,l.default)(r,t)?e:(0,o.default)({},e,(0,i.default)({},n,(0,o.default)({},e[n],(0,i.default)({},(0,f.properId)(t),h(r,t)))))},h=t.mergeDocumentsWithRelationships=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o.default)({},e,t);return(e.relationships||t.relationships)&&(n.relationships=(0,o.default)({},e.relationships,t.relationships)),n};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(!(0,a.isReceivingData)(t)&&!(0,s.isReceivingMutationResult)(t))return e;var n=t.response,r=n.data,i=n.included;if(!r||Array.isArray(r)&&0===r.length)return e;var o=i?i.reduce(p,e):e;return Array.isArray(r)?v(r,o):p(o,r)};t.getDocumentFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2];if(!t)throw new Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");if(!n)throw new Error("getDocumentFromSlice: Cannot retrieve document with undefined id");return e[t]&&e[t][n]?e[t][n]:null},t.getCollectionFromSlice=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(!t)throw new Error("getDocumentFromSlice: Cannot retrieve document with undefined doctype");return e[t]?(0,r.default)(e[t]):null};var v=t.extractAndMergeDocument=function(e,t){var n=e[0]._type;if(!n)throw new Error("Document without _type",e[0]);var i=(0,u.default)(e,f.properId),a={};return t&&t[n]&&(0,r.default)(t[n]).map(function(e){a[n]||(a[n]={});var t=(0,f.properId)(e);i[t]?a[n][t]=(0,o.default)({},e,i[t],a[n][t]):a[n][t]=(0,o.default)({},e,a[n][t])}),(0,r.default)(i).map(function(e){a[n]||(a[n]={});var t=(0,f.properId)(e);a[n][t]?a[n][t]=(0,o.default)({},a[n][t],e):a[n][t]=e}),(0,o.default)({},t,a)}},function(e,t,n){var r=n(189);e.exports=function(e,t){return r(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.properId=function(e){return e.id||e._id}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=d(n(48)),i=d(n(4)),o=d(n(7)),a=d(n(1)),s=d(n(2)),u=d(n(8)),c=d(n(9)),l=d(n(102)),f=d(n(85));function d(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(){return(0,a.default)(this,t),(0,u.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,c.default)(t,e),(0,s.default)(t,[{key:"addById",value:function(e){this.getRelationship().push(e)}},{key:"removeById",value:function(e){var t=this.getRelationship(),n=t.indexOf(e);-1!==n&&t.splice(n,1)}},{key:"existsById",value:function(e){return-1!==this.getRelationship().indexOf(e)}},{key:"getRelationship",value:function(){return this.target[this.name]=this.target[this.name]||[],this.target[this.name]}},{key:"dehydrate",value:function(e){return(0,i.default)({},e,(0,r.default)({},this.name,this.raw||[]))}},{key:"raw",get:function(){return this.target[this.name]}},{key:"data",get:function(){var e=this,t=this.doctype;return(this.raw||[]).map(function(n){return e.get(t,n)})}}],[{key:"query",value:function(){return this.raw&&this.raw.length>0?(0,f.default)({doctype:this.doctype,ids:this.raw}):null}}]),t}(l.default);t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(15)),i=g(n(76)),o=g(n(4)),a=g(n(16)),s=g(n(7)),u=g(n(1)),c=g(n(2)),l=g(n(8)),f=g(n(173)),d=g(n(9)),p=g(n(86)),h=g(n(172)),v=n(85),y=n(131);function g(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,u.default)(this,t),(0,l.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}var n,h,g;return(0,d.default)(t,e),(0,c.default)(t,[{key:"fetchMore",value:(g=(0,a.default)(r.default.mark(function e(){var t,n,s,u=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=new v.QueryDefinition({doctype:"io.cozy.files"}),n=this.getRelationship().data,s=n[n.length-1],e.next=5,this.dispatch(function(){var e=(0,a.default)(r.default.mark(function e(a,c){var l,f,d,p,h,v;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=(0,y.getDocumentFromState)(c(),s._type,s._id),f=l.attributes.metadata.datetime,d=[u.target._type,u.target._id,f],p=n[n.length-1]._id,h=[d,p],e.next=7,u.query(t.referencedBy(u.target).offsetCursor(h));case 7:return(v=e.sent).data.shift(),e.next=11,u.dispatch(u.updateRelationshipData(function(e){return(0,o.default)({},e,{data:[].concat((0,i.default)(e.data),(0,i.default)(v.data)),next:v.next})}));case 11:case"end":return e.stop()}},e,u)}));return function(t,n){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}},e,this)})),function(){return g.apply(this,arguments)})},{key:"addById",value:(h=(0,a.default)(r.default.mark(function e(n){var i,o=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(n)?n:[n],i=n.map(function(e){return{_id:e,_type:o.doctype}}),e.next=4,this.mutate(this.insertDocuments(i));case 4:return e.next=6,(0,f.default)(t.prototype.__proto__||(0,s.default)(t.prototype),"addById",this).call(this,n);case 6:case"end":return e.stop()}},e,this)})),function(e){return h.apply(this,arguments)})},{key:"removeById",value:(n=(0,a.default)(r.default.mark(function e(n){var i,o=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Array.isArray(n)?n:[n],i=n.map(function(e){return{_id:e,_type:o.doctype}}),e.next=4,this.mutate(this.removeDocuments(i));case 4:return e.next=6,(0,f.default)(t.prototype.__proto__||(0,s.default)(t.prototype),"removeById",this).call(this,n);case 6:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"insertDocuments",value:function(e){if("io.cozy.files"===this.target._type)return v.Mutations.addReferencedBy(this.target,e);if("io.cozy.files"===e[0]._type)return v.Mutations.addReferencesTo(this.target,e);throw new Error("Either the document or the references should be io.cozy.files")}},{key:"removeDocuments",value:function(e){if("io.cozy.files"===this.target._type)return v.Mutations.removeReferencedBy(this.target,e);if("io.cozy.files"===e[0]._type)return v.Mutations.removeReferencesTo(this.target,e);throw new Error("Either the document or the references should be io.cozy.files")}},{key:"dehydrate",value:function(e){return(0,p.default)(e,[this.name,"relationships."+this.name])}}],[{key:"query",value:function(e,t,n){var r=[[e._type,e._id],""];return t.find(n.doctype).referencedBy(e).offsetCursor(r)}}]),t}(h.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FetchError=void 0;var r=C(n(7)),i=C(n(8)),o=C(n(9)),a=C(n(171)),s=C(n(15)),u=C(n(16)),c=C(n(4)),l=C(n(1)),f=C(n(2)),d=n(379),p=C(d),h=C(n(745)),v=C(n(65)),y=C(n(246)),g=n(381),m=C(g),b=n(751),w=C(b),_=C(n(752)),x=C(n(753)),k=n(382),O=C(k),S=C(n(754)),E=C(n(383)),A=C(n(756));function C(e){return e&&e.__esModule?e:{default:e}}var j=function(){function e(t){(0,l.default)(this,e);var n=(0,c.default)({},t),r=n.token,i=n.uri,o=void 0===i?"":i;this.options=n,this.setUri(o),this.setToken(r),this.konnectors=new w.default(this),this.jobs=new m.default(this)}var t,n,r,i;return(0,f.default)(e,[{key:"collection",value:function(e){if(!e)throw new Error("CozyStackClient.collection() called without a doctype");switch(e){case d.APPS_DOCTYPE:return new p.default(this);case b.KONNECTORS_DOCTYPE:return new w.default(this);case"io.cozy.files":return new y.default(e,this);case"io.cozy.sharings":return new _.default(e,this);case"io.cozy.permissions":return new x.default(e,this);case k.TRIGGERS_DOCTYPE:return new O.default(this);case g.JOBS_DOCTYPE:return new m.default(this);default:return new v.default(e,this)}}},{key:"fetch",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((i=(0,u.default)(s.default.mark(function e(t,n,r){var i,o,a=this,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=(0,c.default)({},u)).method=t,o=i.headers=(0,c.default)({},u.headers),"GET"!==t&&"HEAD"!==t&&void 0!==r&&o["Content-Type"]&&(i.body=r),o.Authorization||(o.Authorization=this.getAuthorizationHeader()),i.credentials="include",e.abrupt("return",fetch(this.fullpath(n),i).catch(function(e){throw a.checkForRevocation(e),e}));case 7:case"end":return e.stop()}},e,this)})),function(e,t,n){return i.apply(this,arguments)}))},{key:"checkForRevocation",value:function(e){e.message&&A.default.CLIENT_NOT_FOUND.test(e.message)&&this.onRevocationChange(!0)}},{key:"onRevocationChange",value:function(e){this.options&&this.options.onRevocationChange&&this.options.onRevocationChange(e)}},{key:"refreshToken",value:(r=(0,u.default)(s.default.mark(function e(){var t,n,r,i,o,a,u,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.token){e.next=2;break}throw new Error("Cannot refresh an empty token");case 2:if(t={method:"GET",credentials:"include"},global.document){e.next=5;break}throw new Error("Not in a web context, cannot refresh token");case 5:return e.next=7,fetch("/",t);case 7:if((n=e.sent).ok){e.next=10;break}throw new Error("couldn't fetch a new token - response "+n.statusCode);case 10:return e.next=12,n.text();case 12:if(r=e.sent,i=new DOMParser,o=i.parseFromString(r,"text/html")){e.next=17;break}throw Error("couldn't fetch a new token - doc is not html");case 17:if(a=o.querySelector('div[role="application"]')){e.next=20;break}throw Error("couldn't fetch a new token - no div[role=application]");case 20:if(u=a.dataset.cozyToken){e.next=23;break}throw Error("couldn't fetch a new token -- missing data-cozy-token attribute");case 23:return c=new h.default(u),this.onTokenRefresh&&"function"==typeof this.onTokenRefresh&&this.onTokenRefresh(c),e.abrupt("return",c);case 26:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},{key:"fetchJSON",value:(n=(0,u.default)(s.default.mark(function e(t,n,r){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchJSONWithCurrentToken(t,n,r,o);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!A.default.EXPIRED_TOKEN.test(e.t0.message)){e.next=25;break}return i=void 0,e.prev=10,e.next=13,this.refreshToken();case 13:i=e.sent,e.next=19;break;case 16:throw e.prev=16,e.t1=e.catch(10),e.t0;case 19:return this.setToken(i),e.next=22,this.fetchJSONWithCurrentToken(t,n,r,o);case 22:return e.abrupt("return",e.sent);case 25:throw e.t0;case 26:case"end":return e.stop()}},e,this,[[0,6],[10,16]])})),function(e,t,r){return n.apply(this,arguments)})},{key:"fetchJSONWithCurrentToken",value:(t=(0,u.default)(s.default.mark(function e(t,n,r){var i,o,u,c,l,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(i=f.headers=f.headers||{}).Accept="application/json","GET"!==t&&"HEAD"!==t&&void 0!==r&&(i["Content-Type"]||(i["Content-Type"]="application/json",r=(0,a.default)(r))),e.next=5,this.fetch(t,n,r,f);case 5:return o=e.sent,u=o.headers.get("content-type"),c=u&&u.indexOf("json")>=0,e.next=10,c?o.json():o.text();case 10:if(l=e.sent,!o.ok){e.next=13;break}return e.abrupt("return",l);case 13:throw new T(o,l);case 14:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})},{key:"fullpath",value:function(e){return e.startsWith("http")?e:this.uri+e}},{key:"getAuthorizationHeader",value:function(){return this.token?this.token.toAuthHeader():null}},{key:"setCredentials",value:function(e){return(0,E.default)("CozyStackClient::setCredentials is deprecated, use CozyStackClient::setToken"),this.setToken(e)}},{key:"getCredentials",value:function(){return(0,E.default)("CozyStackClient::getCredentials is deprecated, use CozyStackClient::getAuthorizationHeader"),this.getAuthorizationHeader()}},{key:"setToken",value:function(e){this.token=e?new h.default(e):null,e&&this.onRevocationChange(!1)}},{key:"getAccessToken",value:function(){return this.token&&this.token.getAccessToken()}},{key:"setUri",value:function(e){this.uri=function(e){if(null===e)return null;for(;"/"===e[e.length-1];)e=e.slice(0,-1);return e}(e)}},{key:"getIconURL",value:function(e){return(0,S.default)(this,e)}}]),e}(),T=t.FetchError=function(e){function t(e,n){(0,l.default)(this,t);var o=(0,i.default)(this,(t.__proto__||(0,r.default)(t)).call(this));return Error.captureStackTrace&&Error.captureStackTrace(o,o.constructor),o.name="FetchError",o.response=e,o.url=e.url,o.status=e.status,o.reason=n,Object.defineProperty(o,"message",{value:n.message||("string"==typeof n?n:(0,a.default)(n))}),o}return(0,o.default)(t,e),t}(Error);t.default=j},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeApp=t.APPS_DOCTYPE=void 0;var r=p(n(15)),i=p(n(16)),o=p(n(7)),a=p(n(1)),s=p(n(2)),u=p(n(8)),c=p(n(9)),l=p(n(4)),f=n(65),d=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var h=t.APPS_DOCTYPE="io.cozy.apps",v=t.normalizeApp=function(e,t){return(0,l.default)({},e,(0,f.normalizeDoc)(e,t),e.attributes)},y=function(e){function t(e){(0,a.default)(this,t);var n=(0,u.default)(this,(t.__proto__||(0,o.default)(t)).call(this,h,e));return n.endpoint="/apps/",n}var n,l,f,d,p;return(0,c.default)(t,e),(0,s.default)(t,[{key:"all",value:(p=(0,i.default)(r.default.mark(function e(){var t,n=this;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",this.endpoint);case 2:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return v(e,n.doctype)}),meta:{count:t.meta.count},skip:0,next:!1});case 4:case"end":return e.stop()}},e,this)})),function(){return p.apply(this,arguments)})},{key:"get",value:(d=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("get() method is not yet implemented");case 1:case"end":return e.stop()}},e,this)})),function(){return d.apply(this,arguments)})},{key:"create",value:(f=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("create() method is not available for applications");case 1:case"end":return e.stop()}},e,this)})),function(){return f.apply(this,arguments)})},{key:"update",value:(l=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("update() method is not available for applications");case 1:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)})},{key:"destroy",value:(n=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("destroy() method is not available for applications");case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(d.default);y.normalizeDoctype=d.default.normalizeDoctypeJsonApi,t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildURL=t.encode=void 0;var r=a(n(170)),i=a(n(169)),o=a(n(138));function a(e){return e&&e.__esModule?e:{default:e}}var s=t.encode=function(e){return(0,i.default)(e).map(function(e){var t=(0,r.default)(e,2);return t[0]+"="+function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Array.isArray(t)?"["+t.map(function(t){return e(t,!0)}).join(",")+"]":n?encodeURIComponent('"'+t+'"'):encodeURIComponent(t)}(t[1])}).join("&")};t.buildURL=function(e,t){var n=s((0,o.default)(t));return n?e+"?"+n:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasJobFinished=t.normalizeJob=t.JOBS_DOCTYPE=void 0;var r=h(n(15)),i=h(n(103)),o=h(n(16)),a=h(n(1)),s=h(n(2)),u=h(n(4)),c=h(n(68)),l=(0,i.default)(["/jobs/",""],["/jobs/",""]),f=h(n(245)),d=n(65),p=n(104);function h(e){return e&&e.__esModule?e:{default:e}}var v=t.JOBS_DOCTYPE="io.cozy.jobs",y=function(e){return new c.default(function(t){return setTimeout(t,e)})},g=t.normalizeJob=function(e){return(0,u.default)({},e,(0,d.normalizeDoc)(e,v),e.attributes)},m=t.hasJobFinished=function(e){return"done"===e.state||"errored"===e.state},b=function(){function e(t){(0,a.default)(this,e),this.stackClient=t}var t,n;return(0,s.default)(e,[{key:"queued",value:function(e){return this.stackClient.fetchJSON("GET","/jobs/queue/"+e)}},{key:"create",value:function(e,t,n){return this.stackClient.fetchJSON("POST","/jobs/queue/"+e,{data:{type:v,attributes:{arguments:t||{},options:n||{}}}})}},{key:"get",value:(n=(0,o.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.default.get(this.stackClient,(0,p.uri)(l,t),{normalize:g}));case 1:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"waitFor",value:(t=(0,o.default)(r.default.mark(function e(t){var n,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.onUpdate,u=void 0===s?null:s,c=a.until,l=void 0===c?m:c,f=a.delay,d=void 0===f?5e3:f,p=a.timeout,h=void 0===p?3e5:p;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Date.now(),e.next=3,this.get(t);case 3:i=e.sent.data.attributes;case 4:if(i&&l(i)){e.next=16;break}return e.next=7,y(d);case 7:return e.next=9,this.get(t);case 9:if(i=e.sent.data.attributes,u&&u(i),o=Date.now(),!(n-o>h)){e.next=14;break}throw new Error("Timeout for JobCollection::waitFor");case 14:e.next=4;break;case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})}]),e}();t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isForAccount=t.isForKonnector=t.normalizeTrigger=t.TRIGGERS_DOCTYPE=t.JOBS_DOCTYPE=void 0;var r=k(n(63)),i=k(n(103)),o=k(n(15)),a=k(n(16)),s=k(n(7)),u=k(n(1)),c=k(n(2)),l=k(n(8)),f=k(n(173)),d=k(n(9)),p=k(n(4)),h=(0,i.default)(["/jobs/triggers"],["/jobs/triggers"]),v=(0,i.default)(["/jobs/triggers/",""],["/jobs/triggers/",""]),y=(0,i.default)(["/jobs/triggers/","/launch"],["/jobs/triggers/","/launch"]),g=n(245),m=k(g),b=n(65),w=k(b),_=n(381),x=n(104);function k(e){return e&&e.__esModule?e:{default:e}}t.JOBS_DOCTYPE="io.cozy.jobs";var O=t.TRIGGERS_DOCTYPE="io.cozy.triggers",S=t.normalizeTrigger=function(e){return(0,p.default)({},e,(0,b.normalizeDoc)(e,O),e.attributes)},E=(t.isForKonnector=function(e,t){return"konnector"===e.worker&&e.message.konnector==t},t.isForAccount=function(e,t){return e.message.account==t},function(e){function t(e){return(0,u.default)(this,t),(0,l.default)(this,(t.__proto__||(0,s.default)(t)).call(this,O,e))}var n,i,b,w,k,E,A;return(0,d.default)(t,e),(0,c.default)(t,[{key:"all",value:(A=(0,a.default)(o.default.mark(function e(){var t;arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.stackClient.fetchJSON("GET","/jobs/triggers");case 3:return t=e.sent,e.abrupt("return",{data:t.data.map(function(e){return S(e,O)}),meta:{count:t.data.length},next:!1,skip:0});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",(0,g.dontThrowNotFoundError)(e.t0));case 10:case"end":return e.stop()}},e,this,[[0,7]])})),function(){return A.apply(this,arguments)})},{key:"create",value:(E=(0,a.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,x.uri)(h),e.next=3,this.stackClient.fetchJSON("POST",n,{data:{attributes:t}});case 3:return r=e.sent,e.abrupt("return",{data:S(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return E.apply(this,arguments)})},{key:"destroy",value:(k=(0,a.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t._id){e.next=3;break}throw new Error("TriggerCollection.destroy needs a document with an _id");case 3:return e.next=5,this.stackClient.fetchJSON("DELETE",(0,x.uri)(v,n));case 5:return e.abrupt("return",{data:S((0,p.default)({},t,{_deleted:!0}))});case 6:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"find",value:(w=(0,a.default)(o.default.mark(function e(){var n,i,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!==(0,r.default)(a).length||!a.worker){e.next=14;break}return n="/jobs/triggers?Worker="+a.worker,e.prev=2,e.next=5,this.stackClient.fetchJSON("GET",n);case 5:return i=e.sent,e.abrupt("return",{data:i.data.map(function(e){return S(e,O)}),meta:{count:i.data.length},next:!1,skip:0});case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",(0,g.dontThrowNotFoundError)(e.t0));case 12:e.next=15;break;case 14:return e.abrupt("return",(0,f.default)(t.prototype.__proto__||(0,s.default)(t.prototype),"find",this).call(this,a,u));case 15:case"end":return e.stop()}},e,this,[[2,9]])})),function(){return w.apply(this,arguments)})},{key:"get",value:(b=(0,a.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m.default.get(this.stackClient,(0,x.uri)(v,t),{normalize:S}));case 1:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"launch",value:(i=(0,a.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,x.uri)(y,t._id),e.next=3,this.stackClient.fetchJSON("POST",n);case 3:return r=e.sent,e.abrupt("return",{data:(0,_.normalizeJob)(r.data)});case 5:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)})},{key:"update",value:(n=(0,a.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("update() method is not available for triggers");case 1:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(w.default));E.normalizeDoctype=w.default.normalizeDoctypeJsonApi,t.default=E},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e;(e=console).warn.apply(e,arguments)}},function(e,t,n){var r=n(283);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},function(e,t,n){var r=n(764),i=n(220),o=n(765);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){const r=n(141),i=n(11),o=n(387),a=n(39),s=e=>t=>t[e]&&0!==t[e].length?t[e].find(e=>e.primary)||t[e][0]:"";class u extends a{static isContact(e){return e._type===u.doctype}static getInitials(e){if("string"==typeof e)return o("warn","Passing a string to Contact.getInitials will be deprecated soon."),e[0].toUpperCase();if(e.name)return["givenName","familyName"].map(t=>i(e,["name",t,0],"")).join("").toUpperCase();const t=u.getPrimaryEmail(e);return t?t[0].toUpperCase():(o("warn","Contact has no name and no email."),"")}static getPrimaryEmail(e){return Array.isArray(e.email)?s("email")(e).address:e.email}static getPrimaryCozy(e){return Array.isArray(e.cozy)?s("cozy")(e).url:e.url}static getPrimaryPhone(e){return s("phone")(e).number}static getPrimaryAddress(e){return s("address")(e).formattedAddress}static getFullname(e){return e.fullname?e.fullname:e.name?["namePrefix","givenName","additionalName","familyName","nameSuffix"].map(t=>e.name[t]).filter(e=>void 0!==e).join(" ").trim():void 0}static getDisplayName(e){return u.getFullname(e)||u.getPrimaryEmail(e)}}const c=r.shape({_id:r.string.isRequired,_type:r.string.isRequired,fullname:r.string,name:r.shape({givenName:r.string,familyName:r.string,additionalName:r.string,namePrefix:r.string,nameSuffix:r.string}),birthday:r.string,note:r.string,email:r.arrayOf(r.shape({address:r.string.isRequired,label:r.string,type:r.string,primary:r.bool})),address:r.arrayOf(r.shape({street:r.string,pobox:r.string,city:r.string,region:r.string,postcode:r.string,country:r.string,type:r.string,primary:r.bool,label:r.string,formattedAddress:r.string})),phone:r.arrayOf(r.shape({number:r.string.isRequired,type:r.string,label:r.string,primary:r.bool})),cozy:r.arrayOf(r.shape({url:r.string.isRequired,label:r.string,primary:r.bool})),company:r.string,jobTitle:r.string,trashed:r.bool,me:r.bool,relationships:r.shape({accounts:r.shape({data:r.arrayOf(r.shape({_id:r.string.isRequired,_type:r.string.isRequired}))}),groups:r.shape({data:r.arrayOf(r.shape({_id:r.string.isRequired,_type:r.string.isRequired}))})})});u.doctype="io.cozy.contacts",u.propType=c,e.exports=u},function(e,t,n){const r=n(40).namespace("doctypes");e.exports=r},function(e,t,n){const r=n(39),i="store";class o extends r{static getStoreInstallationURL(e=[],t={}){if(!t.slug)throw new Error("Expected app / konnector with the defined slug");const n=this.isInstalled(e,{slug:i});if(!n)return null;const r=n.links&&n.links.related;return r?`${r}#/discover/${t.slug}/install`:null}static isInstalled(e=[],t={}){return e.find(e=>e.attributes&&e.attributes.slug===t.slug)}static getUrl(e){return e.links&&e.links.related}}o.schema={doctype:"io.cozy.apps",attributes:{}},o.doctype="io.cozy.apps",e.exports=o},function(e,t){e.exports={eitherIncludes:(e,t)=>Boolean(e&&t&&(e.includes(t)||t.includes(e)))}},function(e,t,n){const r=n(781),i=Object.entries(r).map(([e,t])=>"/"===e[0]&&"/"===e[e.length-1]?[new RegExp(e.substr(1,e.length-2),"i"),t]:[e,t]);e.exports={getSlugFromInstitutionLabel:e=>{if(e)for(const[t,n]of i)if(t instanceof RegExp){if(e.match(t))return n}else if(t.toLowerCase()===e.toLowerCase())return n}}},function(e,t,n){const r=n(786),i=n(39),o=/(.+)(\..*)$/;class a extends i{static async getFullpath(e,t){if(!e)throw new Error("You must provide a dirId");const n=await this.get(e);return`${r(n.path,"/")}/${t}`}static async move(e,t,n=!1){const{folderId:r,path:i}=t,o=this.cozyClient.collection("io.cozy.files");try{return{moved:(await o.updateFileMetadata(e,{dir_id:r})).data,deleted:null}}catch(t){if(409===t.status&&n){let t;if(i)t=i;else{const n=(await this.get(e)).name;t=await this.getFullpath(r,n)}const n=await o.statByPath(t);return await o.destroy(n.data),{moved:(await o.updateFileMetadata(e,{dir_id:r})).data,deleted:n.data.id}}throw t}}static splitFilename(e){if(!e.name)throw new Error("file should have a name property ");if("file"===e.type){const t=e.name.match(o);if(t)return{filename:t[1],extension:t[2]}}return{filename:e.name,extension:""}}static async overrideFileForPath(e,t,n){e.endsWith("/")||(e+="/");const r=this.cozyClient.collection("io.cozy.files");try{const i=await r.statByPath(e+t.name),{id:o,dir_id:a}=i.data;return await r.updateFile(t,{dirId:a,fileId:o,metadata:n})}catch(i){if(/Not Found/.test(i)){const i=await r.ensureDirectoryExists(e);return await r.createFile(t,{dirId:i,metadata:n})}throw i}}static generateNewFileNameOnConflict(e){const t=new RegExp("(_)([0-9]+)$"),n=e.match(t);if(n){let t=parseInt(n[2]);return t++,e.replace(new RegExp("(_)([0-9]+)$"),`_${t}`)}return`${e}_1`}static async uploadFileWithConflictStrategy(e,t,n,r){const i=this.cozyClient.collection("io.cozy.files");try{const o=await a.getFullpath(n,e),s=await i.statByPath(o),{id:u}=s.data;if("erase"===r){return await i.updateFile(t,{dirId:n,fileId:u,name:e})}{const{filename:i,extension:o}=a.splitFilename({name:e,type:"file"}),s=a.generateNewFileNameOnConflict(i)+o;return a.uploadFileWithConflictStrategy(s,t,n,r)}}catch(r){if(/Not found/.test(r))return await a.upload(e,t,n);throw r}}static async upload(e,t,n){return this.cozyClient.collection("io.cozy.files").createFile(t,{name:e,dirId:n,contentType:"image/jpeg"})}}a.doctype="io.cozy.files",e.exports=a},function(e,t,n){"use strict";e.exports.EOL="\n",e.exports.SUPPRESS="==SUPPRESS==",e.exports.OPTIONAL="?",e.exports.ZERO_OR_MORE="*",e.exports.ONE_OR_MORE="+",e.exports.PARSER="A...",e.exports.REMAINDER="...",e.exports._UNRECOGNIZED_ARGS_ATTR="_unrecognized_args"},function(e,t,n){var r=n(115),i=n(196);e.exports=function(e,t){return r(i(e,t),1)}},function(e,t,n){var r=n(903),i=6e4,o=864e5;e.exports=function(e,t){var n=r(e),a=r(t),s=n.getTime()-n.getTimezoneOffset()*i,u=a.getTime()-a.getTimezoneOffset()*i;return Math.round((s-u)/o)}},function(e,t){e.exports="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)},function(e,t){e.exports={black:"var(--black)",white:"var(--white)",paleGrey:"var(--paleGrey)",silver:"var(--silver)",coolGrey:"var(--coolGrey)",slateGrey:"var(--slateGrey)",charcoalGrey:"var(--charcoalGrey)",overlay:"var(--overlay)",zircon:"var(--zircon)",frenchPass:"var(--frenchPass)",dodgerBlue:"var(--dodgerBlue)",scienceBlue:"var(--scienceBlue)",puertoRico:"var(--puertoRico)",grannyApple:"var(--grannyApple)",emerald:"var(--emerald)",malachite:"var(--malachite)",seafoamGreen:"var(--seafoamGreen)",brightSun:"var(--brightSun)",texasRose:"var(--texasRose)",chablis:"var(--chablis)",yourPink:"var(--yourPink)",fuchsia:"var(--fuchsia)",pomegranate:"var(--pomegranate)",monza:"var(--monza)",portage:"var(--portage)",azure:"var(--azure)",melon:"var(--melon)",blazeOrange:"var(--blazeOrange)",mango:"var(--mango)",pumpkinOrange:"var(--pumpkinOrange)",lavender:"var(--lavender)",darkPeriwinkle:"var(--darkPeriwinkle)",purpley:"var(--purpley)",lightishPurple:"var(--lightishPurple)",barney:"var(--barney)",weirdGreen:"var(--weirdGreen)",primaryColor:"var(--primaryColor)",primaryColorLight:"var(--primaryColorLight)",primaryContrastTextColor:"var(--primaryContrastTextColor)"}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){var r=n(506),i=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=r[t],o=i.call(r,t)?n.length:0;o--;){var a=n[o],s=a.func;if(null==s||s==e)return a.name}return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=U(n(169)),i=U(n(692)),o=U(n(170)),a=U(n(68)),s=U(n(705)),u=U(n(63)),c=U(n(127)),l=U(n(76)),f=U(n(4)),d=U(n(15)),p=U(n(16)),h=U(n(64)),v=U(n(84)),y=U(n(1)),g=U(n(2)),m=n(366),b=U(n(400)),w=n(178),_=n(367),x=n(401),k=n(85),O=n(729),S=U(O),E=n(759),A=U(n(769)),C=n(131),j=U(C),T=U(n(771)),P=n(257),R=U(n(773)),M=U(n(130)),I=U(n(89)),D=U(n(107)),N=U(n(424)),L=U(n(774)),B=U(n(177)),z=U(n(11)),F=U(n(340));function U(e){return e&&e.__esModule?e:{default:e}}var q=function(e){return Array.isArray(e)?e:[e]},$=function(e){return{get:function(t,n){return console.warn(e),t[n]}}},H=function(){function e(t){var n=t.link,r=t.links,i=t.schema,o=void 0===i?{}:i,a=t.appMetadata,s=void 0===a?{}:a,u=(0,v.default)(t,["link","links","schema","appMetadata"]);(0,y.default)(this,e),n&&console.warn("`link` is deprecated, use `links`"),this.appMetadata=s,this.options=u,this.idCounter=1,this.isLogged=!1,this.handleRevocationChange=this.handleRevocationChange.bind(this),this.handleTokenRefresh=this.handleTokenRefresh.bind(this),this.createClient(),this.links=q(n||r||new b.default),this.registerClientOnLinks(),this.chain=(0,P.chain)(this.links),this.schema=new T.default(o,this.getStackClient()),this.plugins={},u.uri&&u.token&&this.login()}var t,n,F,U,H,G,V,J,Q,Y,W,Z,K;return(0,g.default)(e,[{key:"registerPlugin",value:function(e,t){if(!e.pluginName)throw new Error("Cannot register a plugin whose class does not have `pluginName` attribute.");if(this.plugins[e.pluginName])throw new Error("Cannot register plugin "+e.pluginName+". A plugin with the same name has already been registered.");var n=new e(this,t);return this.plugins[e.pluginName]=n,n}},{key:"addSchema",value:function(e){this.schema.add(e)}},{key:"registerClientOnLinks",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=(0,h.default)(this.links);!(e=(r=i.next()).done);e=!0){var o=r.value;if(o.registerClient)try{o.registerClient(this)}catch(e){console.warn(e)}}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}}},{key:"login",value:function(e){return this.isLogged&&!this.isRevoked?(console.warn("CozyClient is already logged."),this.loginPromise):this.loginPromise=this._login(e)}},{key:"_login",value:(K=(0,p.default)(d.default.mark(function e(t){var n,r,i,o,a,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.emit("beforeLogin"),this.registerClientOnLinks(),t&&(t.uri&&this.stackClient.setUri(t.uri),t.token&&this.stackClient.setToken(t.token)),n=!0,r=!1,i=void 0,e.prev=6,o=(0,h.default)(this.links);case 8:if(n=(a=o.next()).done){e.next=16;break}if(!(s=a.value).onLogin){e.next=13;break}return e.next=13,s.onLogin();case 13:n=!0,e.next=8;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(6),r=!0,i=e.t0;case 22:e.prev=22,e.prev=23,!n&&o.return&&o.return();case 25:if(e.prev=25,!r){e.next=28;break}throw i;case 28:return e.finish(25);case 29:return e.finish(22);case 30:this.isLogged=!0,this.isRevoked=!1,this.emit("login");case 33:case"end":return e.stop()}},e,this,[[6,18,22,30],[23,,25,29]])})),function(e){return K.apply(this,arguments)})},{key:"logout",value:(Z=(0,p.default)(d.default.mark(function e(){var t,n,r,i,o,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isLogged){e.next=3;break}return console.warn("CozyClient isn't logged."),e.abrupt("return");case 3:if(this.emit("beforeLogout"),this.isLogged=!1,e.prev=5,!this.stackClient.unregister||this.stackClient.isRegistered&&!this.stackClient.isRegistered()){e.next=9;break}return e.next=9,this.stackClient.unregister();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(5),console.warn("Impossible to unregister client on stack: "+e.t0);case 14:t=!0,n=!1,r=void 0,e.prev=17,i=(0,h.default)(this.links);case 19:if(t=(o=i.next()).done){e.next=33;break}if(!(a=o.value).reset){e.next=30;break}return e.prev=22,e.next=25,a.reset();case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(22),console.warn(e.t1);case 30:t=!0,e.next=19;break;case 33:e.next=39;break;case 35:e.prev=35,e.t2=e.catch(17),n=!0,r=e.t2;case 39:e.prev=39,e.prev=40,!t&&i.return&&i.return();case 42:if(e.prev=42,!n){e.next=45;break}throw r;case 45:return e.finish(42);case 46:return e.finish(39);case 47:this.emit("logout");case 48:case"end":return e.stop()}},e,this,[[5,11],[17,35,39,47],[22,27],[40,,42,46]])})),function(){return Z.apply(this,arguments)})},{key:"collection",value:function(e){return this.getStackClient().collection(e)}},{key:"fetch",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.getStackClient().fetch(e,t,n,r)}},{key:"all",value:function(e){return new k.QueryDefinition({doctype:e})}},{key:"find",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new k.QueryDefinition({doctype:e,selector:t})}},{key:"get",value:function(e,t){return new k.QueryDefinition({doctype:e,id:t})}},{key:"create",value:(W=(0,p.default)(d.default.mark(function e(t,n,r){n._type;var i,o=(0,v.default)(n,["_type"]),a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,f.default)({_type:t},o),e.next=3,this.schema.validate(i);case 3:if(!0===e.sent){e.next=6;break}throw new Error("Validation failed");case 6:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(i,r),a));case 7:case"end":return e.stop()}},e,this)})),function(e,t,n){return W.apply(this,arguments)})},{key:"validate",value:function(e){return this.schema.validate(e)}},{key:"save",value:(Y=(0,p.default)(d.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.schema.validate(t);case 2:if(!0===e.sent){e.next=5;break}throw new Error("Validation failed");case 5:return e.abrupt("return",this.mutate(this.getDocumentSavePlan(t),n));case 6:case"end":return e.stop()}},e,this)})),function(e){return Y.apply(this,arguments)})},{key:"ensureCozyMetadata",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{event:"creation"},n=1;if(void 0===this.appMetadata)return e;var r=void 0;if(e._type){var i=this.schema.getDoctypeSchema(e._type);r=(0,z.default)(i,"doctypeVersion")}var o=this.appMetadata,a=o.slug,s=o.sourceAccount,u=o.version,c=(new Date).toISOString(),d=(0,z.default)(e,"cozyMetadata",{});return"creation"===t.event?d=(0,f.default)({metadataVersion:n,doctypeVersion:r,createdByApp:a,sourceAccount:s,createdAt:c,createdByAppVersion:u,updatedAt:c,updatedByApps:a?[{date:c,slug:a,version:u}]:[]},d):"update"===t.event&&(d=(0,f.default)({},d,{updatedAt:c,updatedByApps:[{date:c,slug:a,version:u}].concat((0,l.default)((0,z.default)(e,"cozyMetadata.updatedByApps",[]).filter(function(e){return e.slug!==a})))})),(0,f.default)({},e,{cozyMetadata:d})}},{key:"getDocumentSavePlan",value:function(e,t){var n=this,r=!e._rev,i=this.ensureCozyMetadata((0,x.dehydrate)(e),{event:r?"creation":"update"}),o=r?k.Mutations.createDocument(i):k.Mutations.updateDocument(i);if(!(t&&(0,c.default)(t).filter(function(e){return Array.isArray(e)?e.length>0:e}).length>0))return o;if(t&&!r)throw new Error("Unable to save relationships on a not-new document");return[o,function(e){var r=n.hydrateDocument(e.data);return(0,u.default)(t).map(function(e){var n=t[e];return Array.isArray(n)?r[e].insertDocuments(n):r[e].setDocument(n)})}]}},{key:"triggerHook",value:function(t,n){if(e.hooks){var r=(e.hooks[n._type]||{})[t]||[],i=!0,o=!1,a=void 0;try{for(var s,u=(0,h.default)(r);!(i=(s=u.next()).done);i=!0){(0,s.value)(this,n)}}catch(e){o=!0,a=e}finally{try{!i&&u.return&&u.return()}finally{if(o)throw a}}}}},{key:"destroy",value:(Q=(0,p.default)(d.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.triggerHook("before:destroy",t);case 2:return e.next=4,this.mutate(k.Mutations.deleteDocument(t),r);case 4:return n=e.sent,e.next=7,this.triggerHook("after:destroy",t);case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e,this)})),function(e){return Q.apply(this,arguments)})},{key:"upload",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.mutate(k.Mutations.uploadFile(e,t),n)}},{key:"ensureQueryExists",value:function(e,t){this.ensureStore(),"loaded"===(0,C.getQueryFromState)(this.store.getState(),e).fetchStatus&&t.skip||this.dispatch((0,C.initQuery)(e,t))}},{key:"query",value:(J=(0,p.default)(d.default.mark(function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.update,a=(0,v.default)(i,["update"]);return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureStore(),n=a.as||this.generateId(),this.ensureQueryExists(n,t),e.prev=3,e.next=6,this.requestQuery(t);case 6:return r=e.sent,this.dispatch((0,C.receiveQueryResult)(n,r,{update:o})),e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(3),this.dispatch((0,C.receiveQueryError)(n,e.t0)),e.t0;case 15:case"end":return e.stop()}},e,this,[[3,11]])})),function(e){return J.apply(this,arguments)})},{key:"queryAll",value:(V=(0,p.default)(d.default.mark(function e(t,n){var r,i;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=[],i={next:!0};case 2:if(!i||!i.next){e.next=9;break}return e.next=5,this.query(t.offset(r.length),n);case 5:i=e.sent,r.push.apply(r,(0,l.default)(i.data)),e.next=2;break;case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)})),function(e,t){return V.apply(this,arguments)})},{key:"watchQuery",value:function(){return console.warn("client.watchQuery is deprecated, please use client.makeObservableQuery."),this.makeObservableQuery.apply(this,arguments)}},{key:"makeObservableQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ensureStore();var n=t.as||this.generateId();return this.ensureQueryExists(n,e),new R.default(n,e,this)}},{key:"mutate",value:(G=(0,p.default)(d.default.mark(function e(t){var n,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.update,a=i.updateQueries,s=(0,v.default)(i,["update","updateQueries"]);return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.ensureStore(),n=s.as||this.generateId(),this.dispatch((0,C.initMutation)(n,t)),e.prev=3,e.next=6,this.requestMutation(t);case 6:return r=e.sent,this.dispatch((0,C.receiveMutationResult)(n,r,{update:o,updateQueries:a},t)),e.abrupt("return",r);case 11:throw e.prev=11,e.t0=e.catch(3),this.dispatch((0,C.receiveMutationError)(n,e.t0,t)),e.t0;case 15:case"end":return e.stop()}},e,this,[[3,11]])})),function(e){return G.apply(this,arguments)})},{key:"requestQuery",value:(H=(0,p.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.chain.request(t);case 2:if(n=e.sent,t.includes){e.next=5;break}return e.abrupt("return",n);case 5:return e.next=7,this.fetchRelationships(n,this.getIncludesRelationships(t));case 7:return r=e.sent,e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)})),function(e){return H.apply(this,arguments)})},{key:"fetchRelationships",value:(U=(0,p.default)(d.default.mark(function e(t,n){var r,i,u,c,l,p,v,y,g,m,b,w,x,O,S,E,C,j,T,P,R,M,I,z=this;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=!Array.isArray(t.data))||0!==t.data.length){e.next=3;break}return e.abrupt("return",t);case 3:return i=r?[t.data]:t.data,u=new s.default,c=[],l=[],i.forEach(function(e){return(0,B.default)(n,function(t,n){var r=t.type.query(e,z,t),i=e._id;u.set(r,[i,n]),r instanceof k.QueryDefinition?l.push(r):c.push(r)})}),p=(0,A.default)(l),e.next=11,a.default.all(p.map(function(e){return z.chain.request(e)}));case 11:for(v=e.sent,y=(0,N.default)((0,D.default)(c),"_id"),g=(0,D.default)(v.map(function(e){return e.included||e.data})).concat(y).filter(Boolean),m={},b=!0,w=!1,x=void 0,e.prev=18,O=(0,h.default)((0,L.default)(p,v));!(b=(S=O.next()).done);b=!0)E=S.value,C=(0,o.default)(E,2),j=C[0],T=C[1],(P=u.get(j))&&(R=(0,o.default)(P,2),M=R[0],I=R[1],m[M]=m[M]||{},m[M][I]=(0,_.responseToRelationship)(T));e.next=26;break;case 22:e.prev=22,e.t0=e.catch(18),w=!0,x=e.t0;case 26:e.prev=26,e.prev=27,!b&&O.return&&O.return();case 29:if(e.prev=29,!w){e.next=32;break}throw x;case 32:return e.finish(29);case 33:return e.finish(26);case 34:return e.abrupt("return",(0,f.default)({},(0,_.attachRelationships)(t,m),{included:g}));case 35:case"end":return e.stop()}},e,this,[[18,22,26,34],[27,,29,33]])})),function(e,t){return U.apply(this,arguments)})},{key:"requestMutation",value:(F=(0,p.default)(d.default.mark(function e(t){var n,r,o,s,u=this;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Array.isArray(t)){e.next=8;break}return n=(0,i.default)(t),r=n[0],o=n.slice(1),e.next=4,this.requestMutation(r);case 4:return s=e.sent,e.next=7,a.default.all(o.map(function(e){return"function"==typeof e?u.requestMutation(e(s)):u.requestMutation(e)}));case 7:return e.abrupt("return",s);case 8:return e.abrupt("return",this.chain.request(t));case 9:case"end":return e.stop()}},e,this)})),function(e){return F.apply(this,arguments)})},{key:"getIncludesRelationships",value:function(e){var t=this,n=e.includes,r=e.doctype;return n?(0,I.default)(n.map(function(e){return[e,t.schema.getRelationship(r,e)]})):{}}},{key:"hydrateDocuments",value:function(e,t){var n=this;if(!1===this.options.autoHydrate)return t;var r=this.schema.getDoctypeSchema(e);return r.relationships?t.map(function(e){return n.hydrateDocument(e,r)}):t}},{key:"hydrateDocument",value:function(e,t){return e?(t=t||this.schema.getDoctypeSchema(e._type),(0,f.default)({},e,this.hydrateRelationships(e,t.relationships))):e}},{key:"hydrateRelationships",value:function(e,t){var n=this.getRelationshipStoreAccessors();return(0,M.default)(t,function(t,r){return(0,w.create)(e,t,n)})}},{key:"makeNewDocument",value:function(e){var t={_type:e};return this.hydrateDocument(t)}},{key:"getAssociation",value:function(e,t){return(0,w.create)(e,this.schema.getAssociation(e._type,t),this.getRelationshipStoreAccessors())}},{key:"getRelationshipStoreAccessors",value:function(){var e=this;return this.storeAccesors||(this.storeAccessors={get:this.getDocumentFromState.bind(this),save:function(t,n){return e.save.call(e,t,n)},dispatch:this.dispatch.bind(this),query:function(t,n){return e.query.call(e,t,n)},mutate:function(t,n){return e.mutate.call(e,t,n)}}),this.storeAccessors}},{key:"getCollectionFromState",value:function(e){try{return(0,C.getCollectionFromState)(this.store.getState(),e)}catch(t){return console.warn("Could not getCollectionFromState",e,t.message),null}}},{key:"getDocumentFromState",value:function(e,t){try{return(0,C.getDocumentFromState)(this.store.getState(),e,t)}catch(n){return console.warn("Could not getDocumentFromState",e,t,n.message),null}}},{key:"getQueryFromState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hydrated||!1;try{var r=(0,C.getQueryFromState)(this.store.getState(),e),i=r.definition&&r.definition.doctype,o=n&&i?this.hydrateDocuments(i,r.data):r.data;return(0,f.default)({},r,{data:o})}catch(t){return console.warn("Could not getQueryFromState",e,t.message),null}}},{key:"register",value:function(e){return this.getStackClient().setUri(e),this.startOAuthFlow(E.authenticateWithCordova)}},{key:"startOAuthFlow",value:(n=(0,p.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getStackClient(),e.next=3,n.register();case 3:return e.abrupt("return",this.authorize(t));case 4:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"authorize",value:(t=(0,p.default)(d.default.mark(function e(t){var n,r,i,o,a,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=this.getStackClient(),r=n.generateStateCode(),i=n.getAuthCodeURL(r),e.next=6,t(i);case 6:return o=e.sent,a=n.getAccessCodeFromURL(o,r),e.next=10,n.fetchAccessToken(a);case 10:return s=e.sent,n.setToken(s),e.abrupt("return",{token:s,infos:n.oauthOptions,client:n.oauthOptions});case 15:throw e.prev=15,e.t0=e.catch(0),e.t0.message===m.REGISTRATION_ABORT&&this.getStackClient().unregister(),e.t0;case 19:case"end":return e.stop()}},e,this,[[0,15]])})),function(e){return t.apply(this,arguments)})},{key:"renewAuthorization",value:function(){return this.authorize(E.authenticateWithCordova)}},{key:"setStore",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.force,r=void 0!==n&&n;if(void 0===e)throw new Error("Store is undefined");if(this.store&&!r)throw new Error("Client already has a store, it is forbidden to change store.");this.store=e}},{key:"ensureStore",value:function(){this.store||this.setStore((0,C.createStore)())}},{key:"handleRevocationChange",value:function(e){e?(this.isRevoked=!0,this.emit("revoked")):(this.isRevoked=!1,this.emit("unrevoked"))}},{key:"handleTokenRefresh",value:function(e){this.emit("tokenRefreshed"),this.options.onTokenRefresh&&($("Using onTokenRefresh is deprecated, please use events like this: cozyClient.on('tokenUpdated', token => console.log('Token is updated', token)). https://git.io/fj3M3"),this.options.onTokenRefresh(e))}},{key:"createClient",value:function(){this.options.client&&console.warn("CozyClient: Using options.client is deprecated, please use options.stackClient.");var e=void 0===this.options.warningForCustomHandlers||this.options.warningForCustomHandlers,t=this.options.client||this.options.stackClient,n={onRevocationChange:this.handleRevocationChange,onTokenRefresh:this.handleTokenRefresh};if(t){this.stackClient=t,t.options||(t.options={});var r=!0,i=!1,o=void 0;try{for(var a,s=(0,h.default)((0,u.default)(n));!(r=(a=s.next()).done);r=!0){var c=a.value;t.options[c]?e&&console.warn("You passed a stackClient with its own "+c+". It is not supported, unexpected things might happen."):t.options[c]=n[c]}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}else{var l=(0,f.default)({},this.options,n);this.stackClient=this.options.oauth?new O.OAuthClient(l):new S.default(l)}this.client=new Proxy(this.stackClient,$("Using cozyClient.client is deprecated, please use cozyClient.stackClient."))}},{key:"getClient",value:function(){return console.warn("CozyClient: getClient() is deprecated, please use getStackClient()."),this.getStackClient()}},{key:"getStackClient",value:function(){return this.stackClient||this.createClient(),this.stackClient}},{key:"reducer",value:function(){return j.default}},{key:"dispatch",value:function(e){return this.store.dispatch(e)}},{key:"generateId",value:function(){var e=this.idCounter;return this.idCounter++,e}},{key:"setData",value:function(e){var t=this;this.ensureStore(),(0,r.default)(e).forEach(function(e){var n=(0,o.default)(e,2),r=(n[0],n[1]);t.dispatch((0,C.receiveQueryResult)(null,{data:r}))})}}],[{key:"fromOldClient",value:function(t,n){return new e((0,f.default)({uri:t._url,token:t._token.token},n))}},{key:"fromEnv",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t=t||("undefined"!=typeof process?process.env:{}),i=r.COZY_URL,o=r.COZY_CREDENTIALS,a=r.NODE_ENV;if(!i||!o)throw new Error("Env used to instantiate CozyClient must have COZY_URL and COZY_CREDENTIALS");return"development"===a?n.oauth=JSON.parse(o):n.token=o.trim(),n.uri=i.trim(),new e((0,f.default)({},n))}},{key:"registerHook",value:function(t,n,r){e.hooks=e.hooks||{};var i=e.hooks[t]=e.hooks[t]||{};i[n]=i[n]||[],i[n].push(r)}}]),e}();H.fetchPolicies={olderThan:function(e){return function(t){return!t||!t.lastUpdate||Date.now()-t.lastUpdate>e}},noFetch:function(){return!1}},F.default.mixin(H),t.default=H},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(84)),i=l(n(7)),o=l(n(1)),a=l(n(2)),s=l(n(8)),u=l(n(9)),c=n(85);function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.client,r=e.stackClient;(0,o.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,i.default)(t)).call(this));return n&&console.info("Using options.client is deprecated, prefer options.stackClient"),a.stackClient=r||n,a}return(0,u.default)(t,e),(0,a.default)(t,[{key:"registerClient",value:function(e){this.stackClient=e.stackClient||e.client}},{key:"reset",value:function(){this.stackClient=null}},{key:"request",value:function(e,t,n){return e.mutationType?this.executeMutation(e,t,n):this.executeQuery(e)}},{key:"executeQuery",value:function(e){var t=e.doctype,n=e.selector,i=e.id,o=e.ids,a=e.referenced,s=(0,r.default)(e,["doctype","selector","id","ids","referenced"]);if(!t)throw console.warn("Bad query",e),new Error("No doctype found in a query definition");var u=this.stackClient.collection(t);return i?u.get(i):o?u.getAll(o):a?u.findReferencedBy(a,s):n||s.sort?u.find(n,s):u.all(s)}},{key:"executeMutation",value:function(e,t,n){var i=e.mutationType,o=(0,r.default)(e,["mutationType"]);switch(i){case c.MutationTypes.CREATE_DOCUMENT:return this.stackClient.collection(o.document._type).create(o.document);case c.MutationTypes.UPDATE_DOCUMENT:return this.stackClient.collection(o.document._type).update(o.document);case c.MutationTypes.DELETE_DOCUMENT:return this.stackClient.collection(o.document._type).destroy(o.document);case c.MutationTypes.ADD_REFERENCES_TO:return this.stackClient.collection(o.referencedDocuments[0]._type).addReferencesTo(o.document,o.referencedDocuments);case c.MutationTypes.REMOVE_REFERENCES_TO:return this.stackClient.collection(o.referencedDocuments[0]._type).removeReferencesTo(o.document,o.referencedDocuments);case c.MutationTypes.ADD_REFERENCED_BY:if("io.cozy.files"===o.document._type)return this.stackClient.collection("io.cozy.files").addReferencedBy(o.document,o.referencedDocuments);throw new Error("The document type should be io.cozy.files");case c.MutationTypes.REMOVE_REFERENCED_BY:if("io.cozy.files"===o.document._type)return this.stackClient.collection("io.cozy.files").removeReferencedBy(o.document,o.referencedDocuments);throw new Error("The document type should be io.cozy.files");case c.MutationTypes.UPLOAD_FILE:return this.stackClient.collection("io.cozy.files").upload(o.file,o.dirPath);default:return n(e,t)}}}]),t}(l(n(257)).default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dehydrate=void 0;var r=a(n(170)),i=a(n(169)),o=n(178);function a(e){return e&&e.__esModule?e:{default:e}}t.dehydrate=function(e){return(0,i.default)(e).reduce(function(e,t){var n=(0,r.default)(t,2),i=n[0],a=n[1];if(a instanceof o.Association){if(!a.dehydrate)throw new Error("Association on key "+i+" should have a dehydrate method");e=a.dehydrate(e)}else e[i]=a;return e},{})}},,function(e,t,n){"use strict";const r=n(451),i=n(463),o=n(467).stdout,a=n(469),s="win32"===process.platform&&!(process.env.TERM||"").toLowerCase().startsWith("xterm"),u=["ansi","ansi","ansi256","ansi16m"],c=new Set(["gray"]),l=Object.create(null);function f(e,t){t=t||{};const n=o?o.level:0;e.level=void 0===t.level?n:t.level,e.enabled="enabled"in t?t.enabled:e.level>0}function d(e){if(!this||!(this instanceof d)||this.template){const t={};return f(t,e),t.template=function(){const e=[].slice.call(arguments);return y.apply(null,[t.template].concat(e))},Object.setPrototypeOf(t,d.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=d,t.template}f(this,e)}s&&(i.blue.open="[94m");for(const e of Object.keys(i))i[e].closeRe=new RegExp(r(i[e].close),"g"),l[e]={get(){const t=i[e];return h.call(this,this._styles?this._styles.concat(t):[t],this._empty,e)}};l.visible={get(){return h.call(this,this._styles||[],!0,"visible")}},i.color.closeRe=new RegExp(r(i.color.close),"g");for(const e of Object.keys(i.color.ansi))c.has(e)||(l[e]={get(){const t=this.level;return function(){const n=i.color[u[t]][e].apply(null,arguments),r={open:n,close:i.color.close,closeRe:i.color.closeRe};return h.call(this,this._styles?this._styles.concat(r):[r],this._empty,e)}}});i.bgColor.closeRe=new RegExp(r(i.bgColor.close),"g");for(const e of Object.keys(i.bgColor.ansi)){if(c.has(e))continue;l["bg"+e[0].toUpperCase()+e.slice(1)]={get(){const t=this.level;return function(){const n=i.bgColor[u[t]][e].apply(null,arguments),r={open:n,close:i.bgColor.close,closeRe:i.bgColor.closeRe};return h.call(this,this._styles?this._styles.concat(r):[r],this._empty,e)}}}}const p=Object.defineProperties(()=>{},l);function h(e,t,n){const r=function(){return v.apply(r,arguments)};r._styles=e,r._empty=t;const i=this;return Object.defineProperty(r,"level",{enumerable:!0,get:()=>i.level,set(e){i.level=e}}),Object.defineProperty(r,"enabled",{enumerable:!0,get:()=>i.enabled,set(e){i.enabled=e}}),r.hasGrey=this.hasGrey||"gray"===n||"grey"===n,r.__proto__=p,r}function v(){const e=arguments,t=e.length;let n=String(arguments[0]);if(0===t)return"";if(t>1)for(let r=1;r<t;r++)n+=" "+e[r];if(!this.enabled||this.level<=0||!n)return this._empty?"":n;const r=i.dim.open;s&&this.hasGrey&&(i.dim.open="");for(const e of this._styles.slice().reverse())n=(n=e.open+n.replace(e.closeRe,e.open)+e.close).replace(/\r?\n/g,`${e.close}$&${e.open}`);return i.dim.open=r,n}function y(e,t){if(!Array.isArray(t))return[].slice.call(arguments,1).join(" ");const n=[].slice.call(arguments,2),r=[t.raw[0]];for(let e=1;e<t.length;e++)r.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&")),r.push(String(t.raw[e]));return a(e,r.join(""))}Object.defineProperties(d.prototype,l),e.exports=d(),e.exports.supportsColor=o,e.exports.default=e.exports},,,,,,,,,,,function(e,t){e.exports=require("string_decoder")},,,function(e,t){var n=800,r=16,i=Date.now;e.exports=function(e){var t=0,o=0;return function(){var a=i(),s=r-(a-o);if(o=a,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(309),i=r&&new r;e.exports=i},,,function(e,t,n){var r=n(512),i=1/0,o=17976931348623157e292;e.exports=function(e){return e?(e=r(e))===i||e===-i?(e<0?-1:1)*o:e==e?e:0:0===e?e:0}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t){var n="Expected a function";e.exports=function(e){if("function"!=typeof e)throw new TypeError(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},function(e,t,n){var r=n(20),i=n(160);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},,function(e,t,n){"use strict";var r=n(427),i=n(580);function o(e,t,n){return"UTF-8"===t?r.decode(e,n):"UTF-8"===n?r.encode(e,t):r.encode(r.decode(e,n),t)}function a(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}e.exports.convert=function(e,t,n,r){var s;n=a(n||"UTF-8"),t=a(t||"UTF-8"),e=e||"","UTF-8"!==n&&"string"==typeof e&&(e=new Buffer(e,"binary"));if(n===t)s="string"==typeof e?new Buffer(e):e;else if(i&&!r)try{s=function(e,t,n){var r,o;return o=new i(n,t+"//TRANSLIT//IGNORE"),(r=o.convert(e)).slice(0,r.length)}(e,t,n)}catch(r){console.error(r);try{s=o(e,t,n)}catch(t){console.error(t),s=e}}else try{s=o(e,t,n)}catch(t){console.error(t),s=e}"string"==typeof s&&(s=new Buffer(s,"utf-8"));return s}},function(e,t,n){"use strict";var r=n(14).Buffer,i=n(563),o=e.exports;o.encodings=null,o.defaultCharUnicode="",o.defaultCharSingleByte="?",o.encode=function(e,t,n){e=""+(e||"");var i=o.getEncoder(t,n),a=i.write(e),s=i.end();return s&&s.length>0?r.concat([a,s]):a},o.decode=function(e,t,n){"string"==typeof e&&(o.skipDecodeWarning||(console.error("Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding"),o.skipDecodeWarning=!0),e=r.from(""+(e||""),"binary"));var i=o.getDecoder(t,n),a=i.write(e),s=i.end();return s?a+s:a},o.encodingExists=function(e){try{return o.getCodec(e),!0}catch(e){return!1}},o.toEncoding=o.encode,o.fromEncoding=o.decode,o._codecDataCache={},o.getCodec=function(e){o.encodings||(o.encodings=n(564));for(var t=o._canonicalizeEncoding(e),r={};;){var i=o._codecDataCache[t];if(i)return i;var a=o.encodings[t];switch(typeof a){case"string":t=a;break;case"object":for(var s in a)r[s]=a[s];r.encodingName||(r.encodingName=t),t=a.type;break;case"function":return r.encodingName||(r.encodingName=t),i=new a(r,o),o._codecDataCache[r.encodingName]=i,i;default:throw new Error("Encoding not recognized: '"+e+"' (searched as: '"+t+"')")}}},o._canonicalizeEncoding=function(e){return(""+e).toLowerCase().replace(/:\d{4}$|[^0-9a-z]/g,"")},o.getEncoder=function(e,t){var n=o.getCodec(e),r=new n.encoder(t,n);return n.bomAware&&t&&t.addBOM&&(r=new i.PrependBOM(r,t)),r},o.getDecoder=function(e,t){var n=o.getCodec(e),r=new n.decoder(t,n);return!n.bomAware||t&&!1===t.stripBOM||(r=new i.StripBOM(r,t)),r};var a="undefined"!=typeof process&&process.versions&&process.versions.node;if(a){var s=a.split(".").map(Number);(s[0]>0||s[1]>=10)&&n(578)(o),n(579)(o)}},,,,,function(e,t){e.exports=function(e){return e instanceof Date}},,function(e,t,n){var r=n(91);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===u?s==s&&!r(s):n(s,u)))var u=s,c=a}return c}},function(e,t,n){var r=n(150),i=n(175),o=n(186),a=n(457),s=n(604),u=n(315),c=n(149),l=n(605),f=n(606),d=n(321),p=n(219),h=n(109),v=n(607),y=n(608),g=n(318),m=n(12),b=n(117),w=n(612),_=n(31),x=n(614),k=n(74),O=1,S=2,E=4,A="[object Arguments]",C="[object Function]",j="[object GeneratorFunction]",T="[object Object]",P={};P[A]=P["[object Array]"]=P["[object ArrayBuffer]"]=P["[object DataView]"]=P["[object Boolean]"]=P["[object Date]"]=P["[object Float32Array]"]=P["[object Float64Array]"]=P["[object Int8Array]"]=P["[object Int16Array]"]=P["[object Int32Array]"]=P["[object Map]"]=P["[object Number]"]=P[T]=P["[object RegExp]"]=P["[object Set]"]=P["[object String]"]=P["[object Symbol]"]=P["[object Uint8Array]"]=P["[object Uint8ClampedArray]"]=P["[object Uint16Array]"]=P["[object Uint32Array]"]=!0,P["[object Error]"]=P[C]=P["[object WeakMap]"]=!1,e.exports=function e(t,n,R,M,I,D){var N,L=n&O,B=n&S,z=n&E;if(R&&(N=I?R(t,M,I,D):R(t)),void 0!==N)return N;if(!_(t))return t;var F=m(t);if(F){if(N=v(t),!L)return c(t,N)}else{var U=h(t),q=U==C||U==j;if(b(t))return u(t,L);if(U==T||U==A||q&&!I){if(N=B||q?{}:g(t),!L)return B?f(t,s(N,t)):l(t,a(N,t))}else{if(!P[U])return I?t:{};N=y(t,U,L)}}D||(D=new r);var $=D.get(t);if($)return $;D.set(t,N),x(t)?t.forEach(function(r){N.add(e(r,n,R,r,t,D))}):w(t)&&t.forEach(function(r,i){N.set(i,e(r,n,R,i,t,D))});var H=z?B?p:d:B?keysIn:k,G=F?void 0:H(t);return i(G||t,function(r,i){G&&(r=t[i=r]),o(N,i,e(r,n,R,i,t,D))}),N}},function(e,t,n){var r=n(20),i=n(423),o=n(138);e.exports=function(e,t){return o(e,i(r(t)))}},function(e,t,n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";var e=function(){this._listeners={}};e.prototype.addEventListener=function(e,t){this._listeners[e]=this._listeners[e]||[],this._listeners[e].indexOf(t)<0&&this._listeners[e].push(t)},e.prototype.removeEventListener=function(e,t){if(this._listeners[e]){var n=this._listeners[e].indexOf(t);n>=0&&this._listeners[e].splice(n,1)}},e.prototype.dispatchEvent=function(e){if(this._listeners[e.type]&&this._listeners[e.type].length)for(var t=this._listeners[e.type].slice(),n=0,r=t.length;n<r;++n)t[n].call(this,e)};var t=function(e){var t=!1;return{next:function(){return t?{done:!0}:(t=!0,{value:e})}}},n=function(e,t,n){this.target=e,this.type=t,this.data=n},r=function(n,r,i){if(e.call(this),"number"!=typeof r||Math.floor(r)!==r||r<1)throw new Error("Invalid concurrency");this._concurrency=r,this._options=i||{},this._options.promise=this._options.promise||Promise,this._iterator=function(e,n){var r,i=typeof e;if("object"===i){if("function"==typeof e.next)return e;if("function"==typeof e.then)return t(e)}return"function"===i?"function"==typeof(r=e).constructor&&"GeneratorFunction"===r.constructor.name?e():function(e){return{next:function(){var t=e();return t?{value:t}:{done:!0}}}}(e):t(n.resolve(e))}(n,this._options.promise),this._done=!1,this._size=0,this._promise=null,this._callbacks=null};return(r.prototype=new e).constructor=r,r.prototype.concurrency=function(e){return void 0!==e&&(this._concurrency=e,this.active()&&this._proceed()),this._concurrency},r.prototype.size=function(){return this._size},r.prototype.active=function(){return!!this._promise},r.prototype.promise=function(){return this._promise},r.prototype.start=function(){var e=this,t=this._options.promise;return this._promise=new t(function(t,n){e._callbacks={reject:n,resolve:t},e._proceed()}),this._promise},r.prototype._fireEvent=function(e,t){this.dispatchEvent(new n(this,e,t))},r.prototype._settle=function(e){e?this._callbacks.reject(e):this._callbacks.resolve(),this._promise=null,this._callbacks=null},r.prototype._onPooledPromiseFulfilled=function(e,t){this._size--,this.active()&&(this._fireEvent("fulfilled",{promise:e,result:t}),this._proceed())},r.prototype._onPooledPromiseRejected=function(e,t){this._size--,this.active()&&(this._fireEvent("rejected",{promise:e,error:t}),this._settle(t||new Error("Unknown error")))},r.prototype._trackPromise=function(e){var t=this;e.then(function(n){t._onPooledPromiseFulfilled(e,n)},function(n){t._onPooledPromiseRejected(e,n)}).catch(function(e){t._settle(new Error("Promise processing failed: "+e))})},r.prototype._proceed=function(){if(!this._done){for(var e={done:!1};this._size<this._concurrency&&!(e=this._iterator.next()).done;)this._size++,this._trackPromise(e.value);this._done=null===e||!!e.done}this._done&&0===this._size&&this._settle()},r.PromisePoolEvent=n,r.PromisePool=r,r})?r.apply(t,i):r)||(e.exports=o)},function(e,t,n){var r=n(45);e.exports=function(e,t){var n=r(e),i=r(t);return n.getTime()>i.getTime()}},,,,,function(e,t,n){"use strict";var r=n(392),i=e.exports=function(e){if(e=e||{},this.optionStrings=e.optionStrings||[],this.dest=e.dest,this.nargs=void 0!==e.nargs?e.nargs:null,this.constant=void 0!==e.constant?e.constant:null,this.defaultValue=e.defaultValue,this.type=void 0!==e.type?e.type:null,this.choices=void 0!==e.choices?e.choices:null,this.required=void 0!==e.required&&e.required,this.help=void 0!==e.help?e.help:null,this.metavar=void 0!==e.metavar?e.metavar:null,!(this.optionStrings instanceof Array))throw new Error("optionStrings should be an array");if(void 0!==this.required&&"boolean"!=typeof this.required)throw new Error("required should be a boolean")};i.prototype.getName=function(){return this.optionStrings.length>0?this.optionStrings.join("/"):null!==this.metavar&&this.metavar!==r.SUPPRESS?this.metavar:void 0!==this.dest&&this.dest!==r.SUPPRESS?this.dest:null},i.prototype.isOptional=function(){return!this.isPositional()},i.prototype.isPositional=function(){return 0===this.optionStrings.length},i.prototype.call=function(){throw new Error(".call() not defined")}},function(e,t,n){var r=n(720),i=n(115),o=n(56),a=n(119),s=o(function(e,t){return a(e)?r(e,i(t,1,a,!0)):[]});e.exports=s},function(e,t){e.exports=function(e){return e&&e.length?e[0]:void 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getPlatform",{enumerable:!0,get:function(){return r.getPlatform}}),Object.defineProperty(t,"isIOSApp",{enumerable:!0,get:function(){return r.isIOSApp}}),Object.defineProperty(t,"isAndroidApp",{enumerable:!0,get:function(){return r.isAndroidApp}}),Object.defineProperty(t,"isWebApp",{enumerable:!0,get:function(){return r.isWebApp}}),Object.defineProperty(t,"isMobileApp",{enumerable:!0,get:function(){return r.isMobileApp}}),Object.defineProperty(t,"isAndroid",{enumerable:!0,get:function(){return r.isAndroid}}),Object.defineProperty(t,"isIOS",{enumerable:!0,get:function(){return r.isIOS}}),Object.defineProperty(t,"isMobile",{enumerable:!0,get:function(){return r.isMobile}}),Object.defineProperty(t,"getDeviceName",{enumerable:!0,get:function(){return i.getDeviceName}}),Object.defineProperty(t,"checkApp",{enumerable:!0,get:function(){return o.checkApp}}),Object.defineProperty(t,"startApp",{enumerable:!0,get:function(){return o.startApp}}),Object.defineProperty(t,"hasDevicePlugin",{enumerable:!0,get:function(){return a.hasDevicePlugin}}),Object.defineProperty(t,"hasInAppBrowserPlugin",{enumerable:!0,get:function(){return a.hasInAppBrowserPlugin}}),Object.defineProperty(t,"hasSafariPlugin",{enumerable:!0,get:function(){return a.hasSafariPlugin}}),Object.defineProperty(t,"nativeLinkOpen",{enumerable:!0,get:function(){return s.nativeLinkOpen}}),Object.defineProperty(t,"openDeeplinkOrRedirect",{enumerable:!0,get:function(){return u.openDeeplinkOrRedirect}});var r=n(247),i=n(760),o=n(766),a=n(249),s=n(767),u=n(768)},function(e,t,n){var r=n(45),i=n(394),o=n(914);e.exports=function(e,t){var n=r(e),a=r(t),s=o(n,a),u=Math.abs(i(n,a));return n.setDate(n.getDate()-s*u),s*(u-(o(n,a)===-s))}},function(e,t,n){var r=n(938)(n(1379));e.exports=r},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p}),n.d(t,"c",function(){return h});var r=n(0),i=n.n(r),o=n(3),a=n.n(o),s=n(11),u=n.n(s),c=n(251),l=n.n(c),f=n(179),d=function(e){return l()({},f.a,e)},p=function(){var e=a()(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.query(t.find(f.b));case 2:return n=e.sent,e.abrupt("return",v(n));case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=a()(i.a.mark(function e(t,n){var r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.collection(f.b),e.next=3,r.update(n);case 3:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),v=function(e){var t=u()(e,"data[0]");return d(t)}},,function(e,t,n){"use strict";var r=/[|\\{}()[\]^$+*?.]/g;e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected a string");return e.replace(r,"\\$&")}},function(e,t,n){var r=n(204),i=n(282),o=n(398),a=n(507);e.exports=function(e){var t=o(e),n=a[t];if("function"!=typeof n||!(t in r.prototype))return!1;if(e===n)return!0;var s=i(n);return!!s&&e===s[0]}},,function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}},function(e,t,n){var r=n(555),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)}),t});e.exports=a},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(78),i=n(74);e.exports=function(e,t){return e&&r(t,i(t),e)}},,,,function(e,t,n){var r=n(683)();e.exports=r},function(e,t){!function(t){"use strict";var n,r=Object.prototype,i=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",s=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag",c="object"==typeof e,l=t.regeneratorRuntime;if(l)c&&(e.exports=l);else{(l=t.regeneratorRuntime=c?e.exports:{}).wrap=w;var f="suspendedStart",d="suspendedYield",p="executing",h="completed",v={},y={};y[a]=function(){return this};var g=Object.getPrototypeOf,m=g&&g(g(P([])));m&&m!==r&&i.call(m,a)&&(y=m);var b=O.prototype=x.prototype=Object.create(y);k.prototype=b.constructor=O,O.constructor=k,O[u]=k.displayName="GeneratorFunction",l.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===k||"GeneratorFunction"===(t.displayName||t.name))},l.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u in e||(e[u]="GeneratorFunction")),e.prototype=Object.create(b),e},l.awrap=function(e){return{__await:e}},S(E.prototype),E.prototype[s]=function(){return this},l.AsyncIterator=E,l.async=function(e,t,n,r){var i=new E(w(e,t,n,r));return l.isGeneratorFunction(t)?i:i.next().then(function(e){return e.done?e.value:i.next()})},S(b),b[u]="Generator",b[a]=function(){return this},b.toString=function(){return"[object Generator]"},l.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},l.values=P,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(j),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=n),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(u&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;j(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:P(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=n),v}}}function w(e,t,n,r){var i=t&&t.prototype instanceof x?t:x,o=Object.create(i.prototype),a=new T(r||[]);return o._invoke=function(e,t,n){var r=f;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===h){if("throw"===i)throw o;return R()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===f)throw r=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=_(e,t,n);if("normal"===u.type){if(r=n.done?h:d,u.arg===v)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=h,n.method="throw",n.arg=u.arg)}}}(e,n,a),o}function _(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function x(){}function k(){}function O(){}function S(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function E(e){var t;this._invoke=function(n,r){function o(){return new Promise(function(t,o){!function t(n,r,o,a){var s=_(e[n],e,r);if("throw"!==s.type){var u=s.arg,c=u.value;return c&&"object"==typeof c&&i.call(c,"__await")?Promise.resolve(c.__await).then(function(e){t("next",e,o,a)},function(e){t("throw",e,o,a)}):Promise.resolve(c).then(function(e){u.value=e,o(u)},function(e){return t("throw",e,o,a)})}a(s.arg)}(n,r,t,o)})}return t=t?t.then(o,o):o()}}function A(e,t){var r=e.iterator[t.method];if(r===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,A(e,t),"throw"===t.method))return v;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=_(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,v;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function P(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=n,t.done=!0,t};return o.next=o}}return{next:R}}function R(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t,n){"use strict";(function(e){const t=n(464),r=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${r+n}m`}),i=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${38+n};5;${r}m`}),o=(e,n)=>(function(){const r=e.apply(t,arguments);return`[${38+n};2;${r[0]};${r[1]};${r[2]}m`});Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,n={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};n.color.grey=n.color.gray;for(const t of Object.keys(n)){const r=n[t];for(const t of Object.keys(r)){const i=r[t];n[t]={open:`[${i[0]}m`,close:`[${i[1]}m`},r[t]=n[t],e.set(i[0],i[1])}Object.defineProperty(n,t,{value:r,enumerable:!1}),Object.defineProperty(n,"codes",{value:e,enumerable:!1})}const a=e=>e,s=(e,t,n)=>[e,t,n];n.color.close="[39m",n.bgColor.close="[49m",n.color.ansi={ansi:r(a,0)},n.color.ansi256={ansi256:i(a,0)},n.color.ansi16m={rgb:o(s,0)},n.bgColor.ansi={ansi:r(a,10)},n.bgColor.ansi256={ansi256:i(a,10)},n.bgColor.ansi16m={rgb:o(s,10)};for(let e of Object.keys(t)){if("object"!=typeof t[e])continue;const a=t[e];"ansi16"===e&&(e="ansi"),"ansi16"in a&&(n.color.ansi[e]=r(a.ansi16,0),n.bgColor.ansi[e]=r(a.ansi16,10)),"ansi256"in a&&(n.color.ansi256[e]=i(a.ansi256,0),n.bgColor.ansi256[e]=i(a.ansi256,10)),"rgb"in a&&(n.color.ansi16m[e]=o(a.rgb,0),n.bgColor.ansi16m[e]=o(a.rgb,10))}return n}})}).call(this,n(67)(e))},function(e,t,n){var r=n(286),i=n(466),o={};Object.keys(r).forEach(function(e){o[e]={},Object.defineProperty(o[e],"channels",{value:r[e].channels}),Object.defineProperty(o[e],"labels",{value:r[e].labels});var t=i(e);Object.keys(t).forEach(function(n){var r=t[n];o[e][n]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var n=e(t);if("object"==typeof n)for(var r=n.length,i=0;i<r;i++)n[i]=Math.round(n[i]);return n};return"conversion"in e&&(t.conversion=e.conversion),t}(r),o[e][n].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(r)})}),e.exports=o},function(e,t,n){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,n){var r=n(286);function i(e){var t=function(){for(var e={},t=Object.keys(r),n=t.length,i=0;i<n;i++)e[t[i]]={distance:-1,parent:null};return e}(),n=[e];for(t[e].distance=0;n.length;)for(var i=n.pop(),o=Object.keys(r[i]),a=o.length,s=0;s<a;s++){var u=o[s],c=t[u];-1===c.distance&&(c.distance=t[i].distance+1,c.parent=i,n.unshift(u))}return t}function o(e,t){return function(n){return t(e(n))}}function a(e,t){for(var n=[t[e].parent,e],i=r[t[e].parent][e],a=t[e].parent;t[a].parent;)n.unshift(t[a].parent),i=o(r[t[a].parent][a],i),a=t[a].parent;return i.conversion=n,i}e.exports=function(e){for(var t=i(e),n={},r=Object.keys(t),o=r.length,s=0;s<o;s++){var u=r[s];null!==t[u].parent&&(n[u]=a(u,t))}return n}},function(e,t,n){"use strict";const r=n(280),i=n(468),o=process.env;let a;function s(e){return function(e){return 0!==e&&{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}(function(e){if(!1===a)return 0;if(i("color=16m")||i("color=full")||i("color=truecolor"))return 3;if(i("color=256"))return 2;if(e&&!e.isTTY&&!0!==a)return 0;const t=a?1:0;if("win32"===process.platform){const e=r.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(e[0])>=10&&Number(e[2])>=10586?Number(e[2])>=14931?3:2:1}if("CI"in o)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(e=>e in o)||"codeship"===o.CI_NAME?1:t;if("TEAMCITY_VERSION"in o)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0;if("truecolor"===o.COLORTERM)return 3;if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(o.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)?1:"COLORTERM"in o?1:(o.TERM,t)}(e))}i("no-color")||i("no-colors")||i("color=false")?a=!1:(i("color")||i("colors")||i("color=true")||i("color=always"))&&(a=!0),"FORCE_COLOR"in o&&(a=0===o.FORCE_COLOR.length||0!==parseInt(o.FORCE_COLOR,10)),e.exports={supportsColor:s,stdout:s(process.stdout),stderr:s(process.stderr)}},function(e,t,n){"use strict";e.exports=(e,t)=>{t=t||process.argv;const n=e.startsWith("-")?"":1===e.length?"-":"--",r=t.indexOf(n+e),i=t.indexOf("--");return-1!==r&&(-1===i||r<i)}},function(e,t,n){"use strict";const r=/(?:\\(u[a-f\d]{4}|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,o=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,a=/\\(u[a-f\d]{4}|x[a-f\d]{2}|.)|([^\\])/gi,s=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function u(e){return"u"===e[0]&&5===e.length||"x"===e[0]&&3===e.length?String.fromCharCode(parseInt(e.slice(1),16)):s.get(e)||e}function c(e,t){const n=[],r=t.trim().split(/\s*,\s*/g);let i;for(const t of r)if(isNaN(t)){if(!(i=t.match(o)))throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`);n.push(i[2].replace(a,(e,t,n)=>t?u(t):n))}else n.push(Number(t));return n}function l(e){i.lastIndex=0;const t=[];let n;for(;null!==(n=i.exec(e));){const e=n[1];if(n[2]){const r=c(e,n[2]);t.push([e].concat(r))}else t.push([e])}return t}function f(e,t){const n={};for(const e of t)for(const t of e.styles)n[t[0]]=e.inverse?null:t.slice(1);let r=e;for(const e of Object.keys(n))if(Array.isArray(n[e])){if(!(e in r))throw new Error(`Unknown Chalk style: ${e}`);r=n[e].length>0?r[e].apply(r,n[e]):r[e]}return r}e.exports=(e,t)=>{const n=[],i=[];let o=[];if(t.replace(r,(t,r,a,s,c,d)=>{if(r)o.push(u(r));else if(s){const t=o.join("");o=[],i.push(0===n.length?t:f(e,n)(t)),n.push({inverse:a,styles:l(s)})}else if(c){if(0===n.length)throw new Error("Found extraneous } in Chalk template literal");i.push(f(e,n)(o.join(""))),o=[],n.pop()}else o.push(d)}),i.push(o.join("")),n.length>0){const e=`Chalk template literal is missing ${n.length} closing bracket${1===n.length?"":"s"} (\`}\`)`;throw new Error(e)}return i.join("")}},function(e,t,n){var r=n(94),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(e){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},function(e,t){var n=Object.prototype.toString;e.exports=function(e){return n.call(e)}},,,,,,,,,,,function(e,t,n){"use strict";var r=n(298),i=n(299),o=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,u=Array.prototype.push,c=function(e,t){u.apply(e,s(t)?t:[t])},l=Date.prototype.toISOString,f={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,formatter:i.formatters[i.default],indices:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},d=function e(t,n,i,o,a,u,l,d,p,h,v,y,g){var m=t;if("function"==typeof l?m=l(n,m):m instanceof Date?m=h(m):"comma"===i&&s(m)&&(m=m.join(",")),null===m){if(o)return u&&!y?u(n,f.encoder,g):n;m=""}if("string"==typeof m||"number"==typeof m||"boolean"==typeof m||r.isBuffer(m))return u?[v(y?n:u(n,f.encoder,g))+"="+v(u(m,f.encoder,g))]:[v(n)+"="+v(String(m))];var b,w=[];if(void 0===m)return w;if(s(l))b=l;else{var _=Object.keys(m);b=d?_.sort(d):_}for(var x=0;x<b.length;++x){var k=b[x];a&&null===m[k]||(s(m)?c(w,e(m[k],"function"==typeof i?i(n,k):n,i,o,a,u,l,d,p,h,v,y,g)):c(w,e(m[k],n+(p?"."+k:"["+k+"]"),i,o,a,u,l,d,p,h,v,y,g)))}return w};e.exports=function(e,t){var n,r=e,u=function(e){if(!e)return f;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||f.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=i.default;if(void 0!==e.format){if(!o.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var r=i.formatters[n],a=f.filter;return("function"==typeof e.filter||s(e.filter))&&(a=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:f.addQueryPrefix,allowDots:void 0===e.allowDots?f.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:f.charsetSentinel,delimiter:void 0===e.delimiter?f.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:f.encode,encoder:"function"==typeof e.encoder?e.encoder:f.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:f.encodeValuesOnly,filter:a,formatter:r,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:f.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:f.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:f.strictNullHandling}}(t);"function"==typeof u.filter?r=(0,u.filter)("",r):s(u.filter)&&(n=u.filter);var l,p=[];if("object"!=typeof r||null===r)return"";l=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var h=a[l];n||(n=Object.keys(r)),u.sort&&n.sort(u.sort);for(var v=0;v<n.length;++v){var y=n[v];u.skipNulls&&null===r[y]||c(p,d(r[y],y,h,u.strictNullHandling,u.skipNulls,u.encode?u.encoder:null,u.filter,u.sort,u.allowDots,u.serializeDate,u.formatter,u.encodeValuesOnly,u.charset))}var g=p.join(u.delimiter),m=!0===u.addQueryPrefix?"?":"";return u.charsetSentinel&&("iso-8859-1"===u.charset?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),g.length>0?m+g:""}},function(e,t,n){"use strict";var r=n(298),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:r.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},a=function(e){return e.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},s=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),s=a?r.slice(0,a.index):r,u=[];if(s){if(!n.plainObjects&&i.call(Object.prototype,s)&&!n.allowPrototypes)return;u.push(s)}for(var c=0;null!==(a=o.exec(r))&&c<n.depth;){if(c+=1,!n.plainObjects&&i.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(a[1])}return a&&u.push("["+r.slice(a.index)+"]"),function(e,t,n){for(var r=t,i=e.length-1;i>=0;--i){var o,a=e[i];if("[]"===a&&n.parseArrays)o=[].concat(r);else{o=n.plainObjects?Object.create(null):{};var s="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,u=parseInt(s,10);n.parseArrays||""!==s?!isNaN(u)&&a!==s&&String(u)===s&&u>=0&&n.parseArrays&&u<=n.arrayLimit?(o=[])[u]=r:o[s]=r:o={0:r}}r=o}return r}(u,t,n)}};e.exports=function(e,t){var n=function(e){if(!e)return o;if(null!==e.decoder&&void 0!==e.decoder&&"function"!=typeof e.decoder)throw new TypeError("Decoder has to be a function.");if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t=void 0===e.charset?o.charset:e.charset;return{allowDots:void 0===e.allowDots?o.allowDots:!!e.allowDots,allowPrototypes:"boolean"==typeof e.allowPrototypes?e.allowPrototypes:o.allowPrototypes,arrayLimit:"number"==typeof e.arrayLimit?e.arrayLimit:o.arrayLimit,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:o.charsetSentinel,comma:"boolean"==typeof e.comma?e.comma:o.comma,decoder:"function"==typeof e.decoder?e.decoder:o.decoder,delimiter:"string"==typeof e.delimiter||r.isRegExp(e.delimiter)?e.delimiter:o.delimiter,depth:"number"==typeof e.depth?e.depth:o.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"==typeof e.interpretNumericEntities?e.interpretNumericEntities:o.interpretNumericEntities,parameterLimit:"number"==typeof e.parameterLimit?e.parameterLimit:o.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"==typeof e.plainObjects?e.plainObjects:o.plainObjects,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:o.strictNullHandling}}(t);if(""===e||null==e)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof e?function(e,t){var n,s={},u=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,c=t.parameterLimit===1/0?void 0:t.parameterLimit,l=u.split(t.delimiter,c),f=-1,d=t.charset;if(t.charsetSentinel)for(n=0;n<l.length;++n)0===l[n].indexOf("utf8=")&&("utf8=%E2%9C%93"===l[n]?d="utf-8":"utf8=%26%2310003%3B"===l[n]&&(d="iso-8859-1"),f=n,n=l.length);for(n=0;n<l.length;++n)if(n!==f){var p,h,v=l[n],y=v.indexOf("]="),g=-1===y?v.indexOf("="):y+1;-1===g?(p=t.decoder(v,o.decoder,d),h=t.strictNullHandling?null:""):(p=t.decoder(v.slice(0,g),o.decoder,d),h=t.decoder(v.slice(g+1),o.decoder,d)),h&&t.interpretNumericEntities&&"iso-8859-1"===d&&(h=a(h)),h&&t.comma&&h.indexOf(",")>-1&&(h=h.split(",")),i.call(s,p)?s[p]=r.combine(s[p],h):s[p]=h}return s}(e,n):e,c=n.plainObjects?Object.create(null):{},l=Object.keys(u),f=0;f<l.length;++f){var d=l[f],p=s(d,u[d],n);c=r.merge(c,p,n)}return r.compact(c)}},,,,,,,,,,function(e,t,n){var r=n(114),i=n(494),o=n(31),a=n(302),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,f=c.hasOwnProperty,d=RegExp("^"+l.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},function(e,t,n){var r,i=n(495),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";e.exports=function(e){return!!o&&o in e}},function(e,t,n){var r=n(37)["__core-js_shared__"];e.exports=r},function(e,t){e.exports=function(e,t){return null==e?void 0:e[t]}},function(e,t,n){var r=n(498),i=n(301),o=n(96),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(73),i=n(34),o="[object Arguments]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t){e.exports=function(){return!1}},function(e,t,n){var r=n(73),i=n(202),o=n(34),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},function(e,t,n){var r=n(307)(Object.keys,Object);e.exports=r},function(e,t,n){var r=n(31),i=n(187),o=n(504),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},,function(e,t){e.exports={}},function(e,t,n){var r=n(204),i=n(255),o=n(205),a=n(12),s=n(34),u=n(508),c=Object.prototype.hasOwnProperty;function l(e){if(s(e)&&!a(e)&&!(e instanceof r)){if(e instanceof i)return e;if(c.call(e,"__wrapped__"))return u(e)}return new i(e)}l.prototype=o.prototype,l.prototype.constructor=l,e.exports=l},function(e,t,n){var r=n(204),i=n(255),o=n(149);e.exports=function(e){if(e instanceof r)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=o(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},,function(e,t,n){var r=n(31),i=n(91),o=NaN,a=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(i(e))return o;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(a,"");var n=u.test(e);return n||c.test(e)?l(e.slice(2),n?2:8):s.test(e)?o:+e}},function(e,t){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var u=a[e?s:++i];if(!1===n(o[u],u,o))break}return t}}},function(e,t,n){var r=n(57);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},function(e,t,n){var r=n(96);e.exports=function(e){return"function"==typeof e?e:r}},,,,function(e,t,n){var r=n(150),i=n(314),o=n(312),a=n(542),s=n(31),u=n(118),c=n(319);e.exports=function e(t,n,l,f,d){t!==n&&o(n,function(o,u){if(d||(d=new r),s(o))a(t,n,u,l,e,f,d);else{var p=f?f(c(t,u),o,u+"",t,n,d):void 0;void 0===p&&(p=o),i(t,u,p)}},u)}},function(e,t){e.exports=function(){this.__data__=[],this.size=0}},function(e,t,n){var r=n(152),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0||(n==t.length-1?t.pop():i.call(t,n,1),--this.size,0))}},function(e,t,n){var r=n(152);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},function(e,t,n){var r=n(152);e.exports=function(e){return r(this.__data__,e)>-1}},function(e,t,n){var r=n(152);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},function(e,t,n){var r=n(151);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(151),i=n(207),o=n(208),a=200;e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var s=n.__data__;if(!i||s.length<a-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(531),i=n(151),o=n(207);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},function(e,t,n){var r=n(532),i=n(533),o=n(534),a=n(535),s=n(536);function u(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,e.exports=u},function(e,t,n){var r=n(153);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},function(e,t){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},function(e,t,n){var r=n(153),i="__lodash_hash_undefined__",o=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return o.call(t,e)?t[e]:void 0}},function(e,t,n){var r=n(153),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},function(e,t,n){var r=n(153),i="__lodash_hash_undefined__";e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}},function(e,t,n){var r=n(154);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},function(e,t){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},function(e,t,n){var r=n(154);e.exports=function(e){return r(this,e).get(e)}},function(e,t,n){var r=n(154);e.exports=function(e){return r(this,e).has(e)}},function(e,t,n){var r=n(154);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},function(e,t,n){var r=n(314),i=n(315),o=n(316),a=n(149),s=n(318),u=n(147),c=n(12),l=n(119),f=n(117),d=n(114),p=n(31),h=n(194),v=n(148),y=n(319),g=n(543);e.exports=function(e,t,n,m,b,w,_){var x=y(e,n),k=y(t,n),O=_.get(k);if(O)r(e,n,O);else{var S=w?w(x,k,n+"",e,t,_):void 0,E=void 0===S;if(E){var A=c(k),C=!A&&f(k),j=!A&&!C&&v(k);S=k,A||C||j?c(x)?S=x:l(x)?S=a(x):C?(E=!1,S=i(k,!0)):j?(E=!1,S=o(k,!0)):S=[]:h(k)||u(k)?(S=x,u(x)?S=g(x):p(x)&&!d(x)||(S=s(k))):E=!1}E&&(_.set(k,S),b(S,k,m,w,_),_.delete(k)),r(e,n,S)}}},function(e,t,n){var r=n(78),i=n(118);e.exports=function(e){return r(e,i(e))}},function(e,t,n){var r=n(545),i=n(553),o=n(326);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(150),i=n(189),o=1,a=2;e.exports=function(e,t,n,s){var u=n.length,c=u,l=!s;if(null==e)return!c;for(e=Object(e);u--;){var f=n[u];if(l&&f[2]?f[1]!==e[f[0]]:!(f[0]in e))return!1}for(;++u<c;){var d=(f=n[u])[0],p=e[d],h=f[1];if(l&&f[2]){if(void 0===p&&!(d in e))return!1}else{var v=new r;if(s)var y=s(p,h,d,e,t,v);if(!(void 0===y?i(h,p,o|a,s,v):y))return!1}}return!0}},function(e,t,n){var r=n(150),i=n(320),o=n(549),a=n(550),s=n(109),u=n(12),c=n(117),l=n(148),f=1,d="[object Arguments]",p="[object Array]",h="[object Object]",v=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,y,g,m){var b=u(e),w=u(t),_=b?p:s(e),x=w?p:s(t),k=(_=_==d?h:_)==h,O=(x=x==d?h:x)==h,S=_==x;if(S&&c(e)){if(!c(t))return!1;b=!0,k=!1}if(S&&!k)return m||(m=new r),b||l(e)?i(e,t,n,y,g,m):o(e,t,_,n,y,g,m);if(!(n&f)){var E=k&&v.call(e,"__wrapped__"),A=O&&v.call(t,"__wrapped__");if(E||A){var C=E?e.value():e,j=A?t.value():t;return m||(m=new r),g(C,j,n,y,m)}}return!!S&&(m||(m=new r),a(e,t,n,y,g,m))}},function(e,t){var n="__lodash_hash_undefined__";e.exports=function(e){return this.__data__.set(e,n),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(94),i=n(317),o=n(108),a=n(320),s=n(454),u=n(210),c=1,l=2,f="[object Boolean]",d="[object Date]",p="[object Error]",h="[object Map]",v="[object Number]",y="[object RegExp]",g="[object Set]",m="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",_="[object DataView]",x=r?r.prototype:void 0,k=x?x.valueOf:void 0;e.exports=function(e,t,n,r,x,O,S){switch(n){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!O(new i(e),new i(t)));case f:case d:case v:return o(+e,+t);case p:return e.name==t.name&&e.message==t.message;case y:case m:return e==t+"";case h:var E=s;case g:var A=r&c;if(E||(E=u),e.size!=t.size&&!A)return!1;var C=S.get(e);if(C)return C==t;r|=l,S.set(e,t);var j=a(E(e),E(t),r,x,O,S);return S.delete(e),j;case b:if(k)return k.call(e)==k.call(t)}return!1}},function(e,t,n){var r=n(321),i=1,o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,s,u){var c=n&i,l=r(e),f=l.length;if(f!=r(t).length&&!c)return!1;for(var d=f;d--;){var p=l[d];if(!(c?p in t:o.call(t,p)))return!1}var h=u.get(e);if(h&&u.get(t))return h==t;var v=!0;u.set(e,t),u.set(t,e);for(var y=c;++d<f;){var g=e[p=l[d]],m=t[p];if(a)var b=c?a(m,g,p,t,e,u):a(g,m,p,e,t,u);if(!(void 0===b?g===m||s(g,m,n,a,u):b)){v=!1;break}y||(y="constructor"==p)}if(v&&!y){var w=e.constructor,_=t.constructor;w!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof _&&_ instanceof _)&&(v=!1)}return u.delete(e),u.delete(t),v}},function(e,t,n){var r=n(77)(n(37),"DataView");e.exports=r},function(e,t,n){var r=n(77)(n(37),"Promise");e.exports=r},function(e,t,n){var r=n(325),i=n(74);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},function(e,t,n){var r=n(189),i=n(11),o=n(327),a=n(213),s=n(325),u=n(326),c=n(92),l=1,f=2;e.exports=function(e,t){return a(e)&&s(t)?u(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,l|f)}}},function(e,t,n){var r=n(253),i=500;e.exports=function(e){var t=r(e,function(e){return n.size===i&&n.clear(),e}),n=t.cache;return t}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(215),i=n(558),o=n(213),a=n(92);e.exports=function(e){return o(e)?r(a(e)):i(e)}},function(e,t,n){var r=n(158);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t,n){var r=n(94),i=n(147),o=n(12),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},function(e,t,n){var r=n(329),i=n(327);e.exports=function(e,t){return r(e,t,function(t,n){return i(e,n)})}},function(e,t,n){var r=n(324),i=n(310),o=n(210),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},,function(e,t,n){"use strict";function r(e,t){this.encoder=e,this.addBOM=!0}function i(e,t){this.decoder=e,this.pass=!1,this.options=t||{}}t.PrependBOM=r,r.prototype.write=function(e){return this.addBOM&&(e="\ufeff"+e,this.addBOM=!1),this.encoder.write(e)},r.prototype.end=function(){return this.encoder.end()},t.StripBOM=i,i.prototype.write=function(e){var t=this.decoder.write(e);return this.pass||!t?t:("\ufeff"===t[0]&&(t=t.slice(1),"function"==typeof this.options.stripBOM&&this.options.stripBOM()),this.pass=!0,t)},i.prototype.end=function(){return this.decoder.end()}},function(e,t,n){"use strict";for(var r=[n(565),n(566),n(567),n(568),n(569),n(570),n(571),n(572)],i=0;i<r.length;i++){e=r[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}},function(e,t,n){"use strict";var r=n(14).Buffer;function i(e,t){this.enc=e.encodingName,this.bomAware=e.bomAware,"base64"===this.enc?this.encoder=u:"cesu8"===this.enc&&(this.enc="utf8",this.encoder=c,""!==r.from("eda0bdedb2a9","hex").toString()&&(this.decoder=l,this.defaultCharUnicode=t.defaultCharUnicode))}e.exports={utf8:{type:"_internal",bomAware:!0},cesu8:{type:"_internal",bomAware:!0},unicode11utf8:"utf8",ucs2:{type:"_internal",bomAware:!0},utf16le:"ucs2",binary:{type:"_internal"},base64:{type:"_internal"},hex:{type:"_internal"},_internal:i},i.prototype.encoder=s,i.prototype.decoder=a;var o=n(414).StringDecoder;function a(e,t){o.call(this,t.enc)}function s(e,t){this.enc=t.enc}function u(e,t){this.prevStr=""}function c(e,t){}function l(e,t){this.acc=0,this.contBytes=0,this.accBytes=0,this.defaultCharUnicode=t.defaultCharUnicode}o.prototype.end||(o.prototype.end=function(){}),a.prototype=o.prototype,s.prototype.write=function(e){return r.from(e,this.enc)},s.prototype.end=function(){},u.prototype.write=function(e){var t=(e=this.prevStr+e).length-e.length%4;return this.prevStr=e.slice(t),e=e.slice(0,t),r.from(e,"base64")},u.prototype.end=function(){return r.from(this.prevStr,"base64")},c.prototype.write=function(e){for(var t=r.alloc(3*e.length),n=0,i=0;i<e.length;i++){var o=e.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=192+(o>>>6),t[n++]=128+(63&o)):(t[n++]=224+(o>>>12),t[n++]=128+(o>>>6&63),t[n++]=128+(63&o))}return t.slice(0,n)},c.prototype.end=function(){},l.prototype.write=function(e){for(var t=this.acc,n=this.contBytes,r=this.accBytes,i="",o=0;o<e.length;o++){var a=e[o];128!=(192&a)?(n>0&&(i+=this.defaultCharUnicode,n=0),a<128?i+=String.fromCharCode(a):a<224?(t=31&a,n=1,r=1):a<240?(t=15&a,n=2,r=1):i+=this.defaultCharUnicode):n>0?(t=t<<6|63&a,r++,0===--n&&(i+=2===r&&t<128&&t>0?this.defaultCharUnicode:3===r&&t<2048?this.defaultCharUnicode:String.fromCharCode(t))):i+=this.defaultCharUnicode}return this.acc=t,this.contBytes=n,this.accBytes=r,i},l.prototype.end=function(){var e=0;return this.contBytes>0&&(e+=this.defaultCharUnicode),e}},function(e,t,n){"use strict";var r=n(14).Buffer;function i(){}function o(){}function a(){this.overflowByte=-1}function s(e,t){this.iconv=t}function u(e,t){void 0===(e=e||{}).addBOM&&(e.addBOM=!0),this.encoder=t.iconv.getEncoder("utf-16le",e)}function c(e,t){this.decoder=null,this.initialBytes=[],this.initialBytesLen=0,this.options=e||{},this.iconv=t.iconv}function l(e,t){var n=t||"utf-16le";if(e.length>=2)if(254==e[0]&&255==e[1])n="utf-16be";else if(255==e[0]&&254==e[1])n="utf-16le";else{for(var r=0,i=0,o=Math.min(e.length-e.length%2,64),a=0;a<o;a+=2)0===e[a]&&0!==e[a+1]&&i++,0!==e[a]&&0===e[a+1]&&r++;i>r?n="utf-16be":i<r&&(n="utf-16le")}return n}t.utf16be=i,i.prototype.encoder=o,i.prototype.decoder=a,i.prototype.bomAware=!0,o.prototype.write=function(e){for(var t=r.from(e,"ucs2"),n=0;n<t.length;n+=2){var i=t[n];t[n]=t[n+1],t[n+1]=i}return t},o.prototype.end=function(){},a.prototype.write=function(e){if(0==e.length)return"";var t=r.alloc(e.length+1),n=0,i=0;for(-1!==this.overflowByte&&(t[0]=e[0],t[1]=this.overflowByte,n=1,i=2);n<e.length-1;n+=2,i+=2)t[i]=e[n+1],t[i+1]=e[n];return this.overflowByte=n==e.length-1?e[e.length-1]:-1,t.slice(0,i).toString("ucs2")},a.prototype.end=function(){},t.utf16=s,s.prototype.encoder=u,s.prototype.decoder=c,u.prototype.write=function(e){return this.encoder.write(e)},u.prototype.end=function(){return this.encoder.end()},c.prototype.write=function(e){if(!this.decoder){if(this.initialBytes.push(e),this.initialBytesLen+=e.length,this.initialBytesLen<16)return"";var t=l(e=r.concat(this.initialBytes),this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options),this.initialBytes.length=this.initialBytesLen=0}return this.decoder.write(e)},c.prototype.end=function(){if(!this.decoder){var e=r.concat(this.initialBytes),t=l(e,this.options.defaultEncoding);this.decoder=this.iconv.getDecoder(t,this.options);var n=this.decoder.write(e),i=this.decoder.end();return i?n+i:n}return this.decoder.end()}},function(e,t,n){"use strict";var r=n(14).Buffer;function i(e,t){this.iconv=t}t.utf7=i,t.unicode11utf7="utf7",i.prototype.encoder=a,i.prototype.decoder=s,i.prototype.bomAware=!0;var o=/[^A-Za-z0-9'\(\),-\.\/:\? \n\r\t]+/g;function a(e,t){this.iconv=t.iconv}function s(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}a.prototype.write=function(e){return r.from(e.replace(o,function(e){return"+"+("+"===e?"":this.iconv.encode(e,"utf16-be").toString("base64").replace(/=+$/,""))+"-"}.bind(this)))},a.prototype.end=function(){};for(var u=/[A-Za-z0-9\/+]/,c=[],l=0;l<256;l++)c[l]=u.test(String.fromCharCode(l));var f="+".charCodeAt(0),d="-".charCodeAt(0),p="&".charCodeAt(0);function h(e,t){this.iconv=t}function v(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=r.alloc(6),this.base64AccumIdx=0}function y(e,t){this.iconv=t.iconv,this.inBase64=!1,this.base64Accum=""}s.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,a=0;a<e.length;a++)if(i){if(!c[e[a]]){if(a==n&&e[a]==d)t+="+";else{var s=o+e.slice(n,a).toString();t+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}e[a]!=d&&a--,n=a+1,i=!1,o=""}}else e[a]==f&&(t+=this.iconv.decode(e.slice(n,a),"ascii"),n=a+1,i=!0);if(i){var u=(s=o+e.slice(n).toString()).length-s.length%8;o=s.slice(u),s=s.slice(0,u),t+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},s.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e},t.utf7imap=h,h.prototype.encoder=v,h.prototype.decoder=y,h.prototype.bomAware=!0,v.prototype.write=function(e){for(var t=this.inBase64,n=this.base64Accum,i=this.base64AccumIdx,o=r.alloc(5*e.length+10),a=0,s=0;s<e.length;s++){var u=e.charCodeAt(s);32<=u&&u<=126?(t&&(i>0&&(a+=o.write(n.slice(0,i).toString("base64").replace(/\//g,",").replace(/=+$/,""),a),i=0),o[a++]=d,t=!1),t||(o[a++]=u,u===p&&(o[a++]=d))):(t||(o[a++]=p,t=!0),t&&(n[i++]=u>>8,n[i++]=255&u,i==n.length&&(a+=o.write(n.toString("base64").replace(/\//g,","),a),i=0)))}return this.inBase64=t,this.base64AccumIdx=i,o.slice(0,a)},v.prototype.end=function(){var e=r.alloc(10),t=0;return this.inBase64&&(this.base64AccumIdx>0&&(t+=e.write(this.base64Accum.slice(0,this.base64AccumIdx).toString("base64").replace(/\//g,",").replace(/=+$/,""),t),this.base64AccumIdx=0),e[t++]=d,this.inBase64=!1),e.slice(0,t)};var g=c.slice();g[",".charCodeAt(0)]=!0,y.prototype.write=function(e){for(var t="",n=0,i=this.inBase64,o=this.base64Accum,a=0;a<e.length;a++)if(i){if(!g[e[a]]){if(a==n&&e[a]==d)t+="&";else{var s=o+e.slice(n,a).toString().replace(/,/g,"/");t+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}e[a]!=d&&a--,n=a+1,i=!1,o=""}}else e[a]==p&&(t+=this.iconv.decode(e.slice(n,a),"ascii"),n=a+1,i=!0);if(i){var u=(s=o+e.slice(n).toString().replace(/,/g,"/")).length-s.length%8;o=s.slice(u),s=s.slice(0,u),t+=this.iconv.decode(r.from(s,"base64"),"utf16-be")}else t+=this.iconv.decode(e.slice(n),"ascii");return this.inBase64=i,this.base64Accum=o,t},y.prototype.end=function(){var e="";return this.inBase64&&this.base64Accum.length>0&&(e=this.iconv.decode(r.from(this.base64Accum,"base64"),"utf16-be")),this.inBase64=!1,this.base64Accum="",e}},function(e,t,n){"use strict";var r=n(14).Buffer;function i(e,t){if(!e)throw new Error("SBCS codec is called without the data.");if(!e.chars||128!==e.chars.length&&256!==e.chars.length)throw new Error("Encoding '"+e.type+"' has incorrect 'chars' (must be of len 128 or 256)");if(128===e.chars.length){for(var n="",i=0;i<128;i++)n+=String.fromCharCode(i);e.chars=n+e.chars}this.decodeBuf=r.from(e.chars,"ucs2");var o=r.alloc(65536,t.defaultCharSingleByte.charCodeAt(0));for(i=0;i<e.chars.length;i++)o[e.chars.charCodeAt(i)]=i;this.encodeBuf=o}function o(e,t){this.encodeBuf=t.encodeBuf}function a(e,t){this.decodeBuf=t.decodeBuf}t._sbcs=i,i.prototype.encoder=o,i.prototype.decoder=a,o.prototype.write=function(e){for(var t=r.alloc(e.length),n=0;n<e.length;n++)t[n]=this.encodeBuf[e.charCodeAt(n)];return t},o.prototype.end=function(){},a.prototype.write=function(e){for(var t=this.decodeBuf,n=r.alloc(2*e.length),i=0,o=0,a=0;a<e.length;a++)i=2*e[a],n[o=2*a]=t[i],n[o+1]=t[i+1];return n.toString("ucs2")},a.prototype.end=function(){}},function(e,t,n){"use strict";e.exports={10029:"maccenteuro",maccenteuro:{type:"_sbcs",chars:""},808:"cp808",ibm808:"cp808",cp808:{type:"_sbcs",chars:""},mik:{type:"_sbcs",chars:""},ascii8bit:"ascii",usascii:"ascii",ansix34:"ascii",ansix341968:"ascii",ansix341986:"ascii",csascii:"ascii",cp367:"ascii",ibm367:"ascii",isoir6:"ascii",iso646us:"ascii",iso646irv:"ascii",us:"ascii",latin1:"iso88591",latin2:"iso88592",latin3:"iso88593",latin4:"iso88594",latin5:"iso88599",latin6:"iso885910",latin7:"iso885913",latin8:"iso885914",latin9:"iso885915",latin10:"iso885916",csisolatin1:"iso88591",csisolatin2:"iso88592",csisolatin3:"iso88593",csisolatin4:"iso88594",csisolatincyrillic:"iso88595",csisolatinarabic:"iso88596",csisolatingreek:"iso88597",csisolatinhebrew:"iso88598",csisolatin5:"iso88599",csisolatin6:"iso885910",l1:"iso88591",l2:"iso88592",l3:"iso88593",l4:"iso88594",l5:"iso88599",l6:"iso885910",l7:"iso885913",l8:"iso885914",l9:"iso885915",l10:"iso885916",isoir14:"iso646jp",isoir57:"iso646cn",isoir100:"iso88591",isoir101:"iso88592",isoir109:"iso88593",isoir110:"iso88594",isoir144:"iso88595",isoir127:"iso88596",isoir126:"iso88597",isoir138:"iso88598",isoir148:"iso88599",isoir157:"iso885910",isoir166:"tis620",isoir179:"iso885913",isoir199:"iso885914",isoir203:"iso885915",isoir226:"iso885916",cp819:"iso88591",ibm819:"iso88591",cyrillic:"iso88595",arabic:"iso88596",arabic8:"iso88596",ecma114:"iso88596",asmo708:"iso88596",greek:"iso88597",greek8:"iso88597",ecma118:"iso88597",elot928:"iso88597",hebrew:"iso88598",hebrew8:"iso88598",turkish:"iso88599",turkish8:"iso88599",thai:"iso885911",thai8:"iso885911",celtic:"iso885914",celtic8:"iso885914",isoceltic:"iso885914",tis6200:"tis620",tis62025291:"tis620",tis62025330:"tis620",1e4:"macroman",10006:"macgreek",10007:"maccyrillic",10079:"maciceland",10081:"macturkish",cspc8codepage437:"cp437",cspc775baltic:"cp775",cspc850multilingual:"cp850",cspcp852:"cp852",cspc862latinhebrew:"cp862",cpgr:"cp869",msee:"cp1250",mscyrl:"cp1251",msansi:"cp1252",msgreek:"cp1253",msturk:"cp1254",mshebr:"cp1255",msarab:"cp1256",winbaltrim:"cp1257",cp20866:"koi8r",20866:"koi8r",ibm878:"koi8r",cskoi8r:"koi8r",cp21866:"koi8u",21866:"koi8u",ibm1168:"koi8u",strk10482002:"rk1048",tcvn5712:"tcvn",tcvn57121:"tcvn",gb198880:"iso646cn",cn:"iso646cn",csiso14jisc6220ro:"iso646jp",jisc62201969ro:"iso646jp",jp:"iso646jp",cshproman8:"hproman8",r8:"hproman8",roman8:"hproman8",xroman8:"hproman8",ibm1051:"hproman8",mac:"macintosh",csmacintosh:"macintosh"}},function(e,t,n){"use strict";e.exports={437:"cp437",737:"cp737",775:"cp775",850:"cp850",852:"cp852",855:"cp855",856:"cp856",857:"cp857",858:"cp858",860:"cp860",861:"cp861",862:"cp862",863:"cp863",864:"cp864",865:"cp865",866:"cp866",869:"cp869",874:"windows874",922:"cp922",1046:"cp1046",1124:"cp1124",1125:"cp1125",1129:"cp1129",1133:"cp1133",1161:"cp1161",1162:"cp1162",1163:"cp1163",1250:"windows1250",1251:"windows1251",1252:"windows1252",1253:"windows1253",1254:"windows1254",1255:"windows1255",1256:"windows1256",1257:"windows1257",1258:"windows1258",28591:"iso88591",28592:"iso88592",28593:"iso88593",28594:"iso88594",28595:"iso88595",28596:"iso88596",28597:"iso88597",28598:"iso88598",28599:"iso88599",28600:"iso885910",28601:"iso885911",28603:"iso885913",28604:"iso885914",28605:"iso885915",28606:"iso885916",windows874:{type:"_sbcs",chars:""},win874:"windows874",cp874:"windows874",windows1250:{type:"_sbcs",chars:""},win1250:"windows1250",cp1250:"windows1250",windows1251:{type:"_sbcs",chars:""},win1251:"windows1251",cp1251:"windows1251",windows1252:{type:"_sbcs",chars:""},win1252:"windows1252",cp1252:"windows1252",windows1253:{type:"_sbcs",chars:""},win1253:"windows1253",cp1253:"windows1253",windows1254:{type:"_sbcs",chars:""},win1254:"windows1254",cp1254:"windows1254",windows1255:{type:"_sbcs",chars:""},win1255:"windows1255",cp1255:"windows1255",windows1256:{type:"_sbcs",chars:""},win1256:"windows1256",cp1256:"windows1256",windows1257:{type:"_sbcs",chars:""},win1257:"windows1257",cp1257:"windows1257",windows1258:{type:"_sbcs",chars:""},win1258:"windows1258",cp1258:"windows1258",iso88591:{type:"_sbcs",chars:""},cp28591:"iso88591",iso88592:{type:"_sbcs",chars:""},cp28592:"iso88592",iso88593:{type:"_sbcs",chars:""},cp28593:"iso88593",iso88594:{type:"_sbcs",chars:""},cp28594:"iso88594",iso88595:{type:"_sbcs",chars:""},cp28595:"iso88595",iso88596:{type:"_sbcs",chars:""},cp28596:"iso88596",iso88597:{type:"_sbcs",chars:""},cp28597:"iso88597",iso88598:{type:"_sbcs",chars:""},cp28598:"iso88598",iso88599:{type:"_sbcs",chars:""},cp28599:"iso88599",iso885910:{type:"_sbcs",chars:""},cp28600:"iso885910",iso885911:{type:"_sbcs",chars:""},cp28601:"iso885911",iso885913:{type:"_sbcs",chars:""},cp28603:"iso885913",iso885914:{type:"_sbcs",chars:""},cp28604:"iso885914",iso885915:{type:"_sbcs",chars:""},cp28605:"iso885915",iso885916:{type:"_sbcs",chars:""},cp28606:"iso885916",cp437:{type:"_sbcs",chars:""},ibm437:"cp437",csibm437:"cp437",cp737:{type:"_sbcs",chars:""},ibm737:"cp737",csibm737:"cp737",cp775:{type:"_sbcs",chars:""},ibm775:"cp775",csibm775:"cp775",cp850:{type:"_sbcs",chars:""},ibm850:"cp850",csibm850:"cp850",cp852:{type:"_sbcs",chars:""},ibm852:"cp852",csibm852:"cp852",cp855:{type:"_sbcs",chars:""},ibm855:"cp855",csibm855:"cp855",cp856:{type:"_sbcs",chars:""},ibm856:"cp856",csibm856:"cp856",cp857:{type:"_sbcs",chars:""},ibm857:"cp857",csibm857:"cp857",cp858:{type:"_sbcs",chars:""},ibm858:"cp858",csibm858:"cp858",cp860:{type:"_sbcs",chars:""},ibm860:"cp860",csibm860:"cp860",cp861:{type:"_sbcs",chars:""},ibm861:"cp861",csibm861:"cp861",cp862:{type:"_sbcs",chars:""},ibm862:"cp862",csibm862:"cp862",cp863:{type:"_sbcs",chars:""},ibm863:"cp863",csibm863:"cp863",cp864:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},ibm864:"cp864",csibm864:"cp864",cp865:{type:"_sbcs",chars:""},ibm865:"cp865",csibm865:"cp865",cp866:{type:"_sbcs",chars:""},ibm866:"cp866",csibm866:"cp866",cp869:{type:"_sbcs",chars:""},ibm869:"cp869",csibm869:"cp869",cp922:{type:"_sbcs",chars:""},ibm922:"cp922",csibm922:"cp922",cp1046:{type:"_sbcs",chars:""},ibm1046:"cp1046",csibm1046:"cp1046",cp1124:{type:"_sbcs",chars:""},ibm1124:"cp1124",csibm1124:"cp1124",cp1125:{type:"_sbcs",chars:""},ibm1125:"cp1125",csibm1125:"cp1125",cp1129:{type:"_sbcs",chars:""},ibm1129:"cp1129",csibm1129:"cp1129",cp1133:{type:"_sbcs",chars:""},ibm1133:"cp1133",csibm1133:"cp1133",cp1161:{type:"_sbcs",chars:""},ibm1161:"cp1161",csibm1161:"cp1161",cp1162:{type:"_sbcs",chars:""},ibm1162:"cp1162",csibm1162:"cp1162",cp1163:{type:"_sbcs",chars:""},ibm1163:"cp1163",csibm1163:"cp1163",maccroatian:{type:"_sbcs",chars:""},maccyrillic:{type:"_sbcs",chars:""},macgreek:{type:"_sbcs",chars:""},maciceland:{type:"_sbcs",chars:""},macroman:{type:"_sbcs",chars:""},macromania:{type:"_sbcs",chars:""},macthai:{type:"_sbcs",chars:"\ufeff"},macturkish:{type:"_sbcs",chars:""},macukraine:{type:"_sbcs",chars:""},koi8r:{type:"_sbcs",chars:""},koi8u:{type:"_sbcs",chars:""},koi8ru:{type:"_sbcs",chars:""},koi8t:{type:"_sbcs",chars:""},armscii8:{type:"_sbcs",chars:")(.,-"},rk1048:{type:"_sbcs",chars:""},tcvn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},georgianacademy:{type:"_sbcs",chars:""},georgianps:{type:"_sbcs",chars:""},pt154:{type:"_sbcs",chars:""},viscii:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"},iso646cn:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}"},iso646jp:{type:"_sbcs",chars:"\0\b\t\n\v\f\r !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}"},hproman8:{type:"_sbcs",chars:""},macintosh:{type:"_sbcs",chars:""},ascii:{type:"_sbcs",chars:""},tis620:{type:"_sbcs",chars:""}}},function(e,t,n){"use strict";var r=n(14).Buffer;t._dbcs=c;for(var i=-1,o=-2,a=-1e3,s=new Array(256),u=0;u<256;u++)s[u]=i;function c(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var n=e.table();this.decodeTables=[],this.decodeTables[0]=s.slice(0),this.decodeTableSeq=[];for(var r=0;r<n.length;r++)this._addDecodeChunk(n[r]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var u={};if(e.encodeSkipVals)for(r=0;r<e.encodeSkipVals.length;r++){var c=e.encodeSkipVals[r];if("number"==typeof c)u[c]=!0;else for(var l=c.from;l<=c.to;l++)u[l]=!0}if(this._fillEncodeTable(0,0,u),e.encodeAdd)for(var f in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,f)&&this._setEncodeChar(f.charCodeAt(0),e.encodeAdd[f]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===i&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===i&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var d=this.decodeTables.length,p=this.decodeTables[d]=s.slice(0),h=this.decodeTables.length,v=this.decodeTables[h]=s.slice(0);for(r=129;r<=254;r++){var y=a-this.decodeTables[0][r],g=this.decodeTables[y];for(l=48;l<=57;l++)g[l]=a-d}for(r=129;r<=254;r++)p[r]=a-h;for(r=48;r<=57;r++)v[r]=o}}function l(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function f(e,t){this.nodeIdx=0,this.prevBuf=r.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function d(e,t){if(e[0]>t)return-1;for(var n=0,r=e.length;n<r-1;){var i=n+Math.floor((r-n+1)/2);e[i]<=t?n=i:r=i}return n}c.prototype.encoder=l,c.prototype.decoder=f,c.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var n=this.decodeTables[0],r=t.length-1;r>0;r--){var o=n[t[r]];if(o==i)n[t[r]]=a-this.decodeTables.length,this.decodeTables.push(n=s.slice(0));else{if(!(o<=a))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));n=this.decodeTables[a-o]}}return n},c.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),n=this._getDecodeTrieNode(t);t&=255;for(var r=1;r<e.length;r++){var i=e[r];if("string"==typeof i)for(var o=0;o<i.length;){var a=i.charCodeAt(o++);if(55296<=a&&a<56320){var s=i.charCodeAt(o++);if(!(56320<=s&&s<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);n[t++]=65536+1024*(a-55296)+(s-56320)}else if(4080<a&&a<=4095){for(var u=4095-a+2,c=[],l=0;l<u;l++)c.push(i.charCodeAt(o++));n[t++]=-10-this.decodeTableSeq.length,this.decodeTableSeq.push(c)}else n[t++]=a}else{if("number"!=typeof i)throw new Error("Incorrect type '"+typeof i+"' given in "+this.encodingName+" at chunk "+e[0]);var f=n[t-1]+1;for(o=0;o<i;o++)n[t++]=f++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},c.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=s.slice(0)),this.encodeTable[t]},c.prototype._setEncodeChar=function(e,t){var n=this._getEncodeBucket(e),r=255&e;n[r]<=-10?this.encodeTableSeq[-10-n[r]][-1]=t:n[r]==i&&(n[r]=t)},c.prototype._setEncodeSequence=function(e,t){var n,r=e[0],o=this._getEncodeBucket(r),a=255&r;o[a]<=-10?n=this.encodeTableSeq[-10-o[a]]:(n={},o[a]!==i&&(n[-1]=o[a]),o[a]=-10-this.encodeTableSeq.length,this.encodeTableSeq.push(n));for(var s=1;s<e.length-1;s++){var u=n[r];"object"==typeof u?n=u:(n=n[r]={},void 0!==u&&(n[-1]=u))}n[r=e[e.length-1]]=t},c.prototype._fillEncodeTable=function(e,t,n){for(var r=this.decodeTables[e],i=0;i<256;i++){var o=r[i],s=t+i;n[s]||(o>=0?this._setEncodeChar(o,s):o<=a?this._fillEncodeTable(a-o,s<<8,n):o<=-10&&this._setEncodeSequence(this.decodeTableSeq[-10-o],s))}},l.prototype.write=function(e){for(var t=r.alloc(e.length*(this.gb18030?4:3)),n=this.leadSurrogate,o=this.seqObj,a=-1,s=0,u=0;;){if(-1===a){if(s==e.length)break;var c=e.charCodeAt(s++)}else{c=a;a=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===n){n=c;continue}n=c,c=i}else-1!==n?(c=65536+1024*(n-55296)+(c-56320),n=-1):c=i;else-1!==n&&(a=c,c=i,n=-1);var l=i;if(void 0!==o&&c!=i){var f=o[c];if("object"==typeof f){o=f;continue}"number"==typeof f?l=f:null==f&&void 0!==(f=o[-1])&&(l=f,a=c),o=void 0}else if(c>=0){var p=this.encodeTable[c>>8];if(void 0!==p&&(l=p[255&c]),l<=-10){o=this.encodeTableSeq[-10-l];continue}if(l==i&&this.gb18030){var h=d(this.gb18030.uChars,c);if(-1!=h){l=this.gb18030.gbChars[h]+(c-this.gb18030.uChars[h]);t[u++]=129+Math.floor(l/12600),l%=12600,t[u++]=48+Math.floor(l/1260),l%=1260,t[u++]=129+Math.floor(l/10),l%=10,t[u++]=48+l;continue}}}l===i&&(l=this.defaultCharSingleByte),l<256?t[u++]=l:l<65536?(t[u++]=l>>8,t[u++]=255&l):(t[u++]=l>>16,t[u++]=l>>8&255,t[u++]=255&l)}return this.seqObj=o,this.leadSurrogate=n,t.slice(0,u)},l.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=r.alloc(10),t=0;if(this.seqObj){var n=this.seqObj[-1];void 0!==n&&(n<256?e[t++]=n:(e[t++]=n>>8,e[t++]=255&n)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},l.prototype.findIdx=d,f.prototype.write=function(e){var t=r.alloc(2*e.length),n=this.nodeIdx,s=this.prevBuf,u=this.prevBuf.length,c=-this.prevBuf.length;u>0&&(s=r.concat([s,e.slice(0,10)]));for(var l=0,f=0;l<e.length;l++){var p,h=l>=0?e[l]:s[l+u];if((p=this.decodeTables[n][h])>=0);else if(p===i)l=c,p=this.defaultCharUnicode.charCodeAt(0);else if(p===o){var v=c>=0?e.slice(c,l+1):s.slice(c+u,l+1+u),y=12600*(v[0]-129)+1260*(v[1]-48)+10*(v[2]-129)+(v[3]-48),g=d(this.gb18030.gbChars,y);p=this.gb18030.uChars[g]+y-this.gb18030.gbChars[g]}else{if(p<=a){n=a-p;continue}if(!(p<=-10))throw new Error("iconv-lite internal error: invalid decoding table value "+p+" at "+n+"/"+h);for(var m=this.decodeTableSeq[-10-p],b=0;b<m.length-1;b++)p=m[b],t[f++]=255&p,t[f++]=p>>8;p=m[m.length-1]}if(p>65535){p-=65536;var w=55296+Math.floor(p/1024);t[f++]=255&w,t[f++]=w>>8,p=56320+p%1024}t[f++]=255&p,t[f++]=p>>8,n=0,c=l+1}return this.nodeIdx=n,this.prevBuf=c>=0?e.slice(c):s.slice(c+u),t.slice(0,f).toString("ucs2")},f.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=r.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}},function(e,t,n){"use strict";e.exports={shiftjis:{type:"_dbcs",table:function(){return n(573)},encodeAdd:{"":92,"":126},encodeSkipVals:[{from:60736,to:63808}]},csshiftjis:"shiftjis",mskanji:"shiftjis",sjis:"shiftjis",windows31j:"shiftjis",ms31j:"shiftjis",xsjis:"shiftjis",windows932:"shiftjis",ms932:"shiftjis",932:"shiftjis",cp932:"shiftjis",eucjp:{type:"_dbcs",table:function(){return n(574)},encodeAdd:{"":92,"":126}},gb2312:"cp936",gb231280:"cp936",gb23121980:"cp936",csgb2312:"cp936",csiso58gb231280:"cp936",euccn:"cp936",windows936:"cp936",ms936:"cp936",936:"cp936",cp936:{type:"_dbcs",table:function(){return n(217)}},gbk:{type:"_dbcs",table:function(){return n(217).concat(n(332))}},xgbk:"gbk",isoir58:"gbk",gb18030:{type:"_dbcs",table:function(){return n(217).concat(n(332))},gb18030:function(){return n(575)},encodeSkipVals:[128],encodeAdd:{"":41699}},chinese:"gb18030",windows949:"cp949",ms949:"cp949",949:"cp949",cp949:{type:"_dbcs",table:function(){return n(576)}},cseuckr:"cp949",csksc56011987:"cp949",euckr:"cp949",isoir149:"cp949",korean:"cp949",ksc56011987:"cp949",ksc56011989:"cp949",ksc5601:"cp949",windows950:"cp950",ms950:"cp950",950:"cp950",cp950:{type:"_dbcs",table:function(){return n(333)}},big5:"big5hkscs",big5hkscs:{type:"_dbcs",table:function(){return n(333).concat(n(577))},encodeSkipVals:[41676]},cnbig5:"big5hkscs",csbig5:"big5hkscs",xxbig5:"big5hkscs"}},function(e){e.exports=JSON.parse('[["0","\\u0000",128],["a1","",62],["8140","",9,""],["8180",""],["81b8",""],["81c8",""],["81da",""],["81f0",""],["81fc",""],["824f","",9],["8260","",25],["8281","",25],["829f","",82],["8340","",62],["8380","",22],["839f","",16,"",6],["83bf","",16,"",6],["8440","",5,"",25],["8470","",5,"",7],["8480","",17],["849f",""],["8740","",19,"",9],["875f",""],["877e",""],["8780","",4,""],["889f",""],["8940",""],["8980",""],["8a40",""],["8a80",""],["8b40",""],["8b80",""],["8c40",""],["8c80",""],["8d40",""],["8d80",""],["8e40",""],["8e80",""],["8f40",""],["8f80",""],["9040",""],["9080",""],["9140",""],["9180",""],["9240",""],["9280",""],["9340",""],["9380",""],["9440",""],["9480",""],["9540",""],["9580",""],["9640",""],["9680",""],["9740",""],["9780",""],["9840",""],["989f",""],["9940",""],["9980",""],["9a40",""],["9a80",""],["9b40",""],["9b80",""],["9c40",""],["9c80",""],["9d40",""],["9d80",""],["9e40",""],["9e80",""],["9f40",""],["9f80",""],["e040",""],["e080",""],["e140",""],["e180",""],["e240",""],["e280",""],["e340",""],["e380",""],["e440",""],["e480",""],["e540",""],["e580",""],["e640",""],["e680",""],["e740",""],["e780",""],["e840",""],["e880",""],["e940",""],["e980",""],["ea40",""],["ea80",""],["ed40",""],["ed80",""],["ee40",""],["ee80",""],["eeef","",9,""],["f040","",62],["f080","",124],["f140","",62],["f180","",124],["f240","",62],["f280","",124],["f340","",62],["f380","",124],["f440","",62],["f480","",124],["f540","",62],["f580","",124],["f640","",62],["f680","",124],["f740","",62],["f780","",124],["f840","",62],["f880","",124],["f940",""],["fa40","",9,"",9,""],["fa80",""],["fb40",""],["fb80",""],["fc40",""]]')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8ea1","",62],["a1a1","",9,""],["a2a1",""],["a2ba",""],["a2ca",""],["a2dc",""],["a2f2",""],["a2fe",""],["a3b0","",9],["a3c1","",25],["a3e1","",25],["a4a1","",82],["a5a1","",85],["a6a1","",16,"",6],["a6c1","",16,"",6],["a7a1","",5,"",25],["a7d1","",5,"",25],["a8a1",""],["ada1","",19,"",9],["adc0",""],["addf","",4,""],["b0a1",""],["b1a1",""],["b2a1",""],["b3a1",""],["b4a1",""],["b5a1",""],["b6a1",""],["b7a1",""],["b8a1",""],["b9a1",""],["baa1",""],["bba1",""],["bca1",""],["bda1",""],["bea1",""],["bfa1",""],["c0a1",""],["c1a1",""],["c2a1",""],["c3a1",""],["c4a1",""],["c5a1",""],["c6a1",""],["c7a1",""],["c8a1",""],["c9a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1",""],["d2a1",""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fcf1","",9,""],["8fa2af",""],["8fa2c2",""],["8fa2eb",""],["8fa6e1",""],["8fa6e7",""],["8fa6e9",""],["8fa6ec",""],["8fa6f1",""],["8fa7c2","",10,""],["8fa7f2","",10,""],["8fa9a1",""],["8fa9a4",""],["8fa9a6",""],["8fa9a8",""],["8fa9ab",""],["8fa9af",""],["8fa9c1",""],["8faaa1",""],["8faaba",""],["8faba1",""],["8fabbd",""],["8fabc5",""],["8fb0a1",""],["8fb1a1",""],["8fb2a1","",4,""],["8fb3a1",""],["8fb4a1",""],["8fb5a1",""],["8fb6a1","",5,"",4,""],["8fb7a1","",4,""],["8fb8a1",""],["8fb9a1",""],["8fbaa1","",4,""],["8fbba1",""],["8fbca1","",4,""],["8fbda1","",4,""],["8fbea1","",4,""],["8fbfa1",""],["8fc0a1",""],["8fc1a1",""],["8fc2a1",""],["8fc3a1","",4,""],["8fc4a1",""],["8fc5a1",""],["8fc6a1",""],["8fc7a1",""],["8fc8a1",""],["8fc9a1","",4,"",4,""],["8fcaa1",""],["8fcba1",""],["8fcca1","",9,""],["8fcda1","",5,""],["8fcea1","",6,""],["8fcfa1",""],["8fd0a1",""],["8fd1a1",""],["8fd2a1","",5],["8fd3a1",""],["8fd4a1","",4,""],["8fd5a1",""],["8fd6a1",""],["8fd7a1",""],["8fd8a1",""],["8fd9a1","",4,"",6,""],["8fdaa1","",4,""],["8fdba1","",6,""],["8fdca1","",4,""],["8fdda1","",4,""],["8fdea1","",4,""],["8fdfa1",""],["8fe0a1",""],["8fe1a1","",4,""],["8fe2a1",""],["8fe3a1","",5,"",4,""],["8fe4a1","",4,""],["8fe5a1","",4,""],["8fe6a1",""],["8fe7a1",""],["8fe8a1","",4,""],["8fe9a1","",4],["8feaa1","",4,""],["8feba1","",4,""],["8feca1",""],["8feda1","",4,"",4,""]]')},function(e){e.exports=JSON.parse('{"uChars":[128,165,169,178,184,216,226,235,238,244,248,251,253,258,276,284,300,325,329,334,364,463,465,467,469,471,473,475,477,506,594,610,712,716,730,930,938,962,970,1026,1104,1106,8209,8215,8218,8222,8231,8241,8244,8246,8252,8365,8452,8454,8458,8471,8482,8556,8570,8596,8602,8713,8720,8722,8726,8731,8737,8740,8742,8748,8751,8760,8766,8777,8781,8787,8802,8808,8816,8854,8858,8870,8896,8979,9322,9372,9548,9588,9616,9622,9634,9652,9662,9672,9676,9680,9702,9735,9738,9793,9795,11906,11909,11913,11917,11928,11944,11947,11951,11956,11960,11964,11979,12284,12292,12312,12319,12330,12351,12436,12447,12535,12543,12586,12842,12850,12964,13200,13215,13218,13253,13263,13267,13270,13384,13428,13727,13839,13851,14617,14703,14801,14816,14964,15183,15471,15585,16471,16736,17208,17325,17330,17374,17623,17997,18018,18212,18218,18301,18318,18760,18811,18814,18820,18823,18844,18848,18872,19576,19620,19738,19887,40870,59244,59336,59367,59413,59417,59423,59431,59437,59443,59452,59460,59478,59493,63789,63866,63894,63976,63986,64016,64018,64021,64025,64034,64037,64042,65074,65093,65107,65112,65127,65132,65375,65510,65536],"gbChars":[0,36,38,45,50,81,89,95,96,100,103,104,105,109,126,133,148,172,175,179,208,306,307,308,309,310,311,312,313,341,428,443,544,545,558,741,742,749,750,805,819,820,7922,7924,7925,7927,7934,7943,7944,7945,7950,8062,8148,8149,8152,8164,8174,8236,8240,8262,8264,8374,8380,8381,8384,8388,8390,8392,8393,8394,8396,8401,8406,8416,8419,8424,8437,8439,8445,8482,8485,8496,8521,8603,8936,8946,9046,9050,9063,9066,9076,9092,9100,9108,9111,9113,9131,9162,9164,9218,9219,11329,11331,11334,11336,11346,11361,11363,11366,11370,11372,11375,11389,11682,11686,11687,11692,11694,11714,11716,11723,11725,11730,11736,11982,11989,12102,12336,12348,12350,12384,12393,12395,12397,12510,12553,12851,12962,12973,13738,13823,13919,13933,14080,14298,14585,14698,15583,15847,16318,16434,16438,16481,16729,17102,17122,17315,17320,17402,17418,17859,17909,17911,17915,17916,17936,17939,17961,18664,18703,18814,18962,19043,33469,33470,33471,33484,33485,33490,33497,33501,33505,33513,33520,33536,33550,37845,37921,37948,38029,38038,38064,38065,38066,38069,38075,38076,38078,39108,39109,39113,39114,39115,39116,39265,39394,189000]}')},function(e){e.exports=JSON.parse('[["0","\\u0000",127],["8141","",4,"",6,""],["8161","",9,"",5,""],["8181","",18,"",4,"",6,"",5,"",6,"",7,"",7,"",4,"",4,""],["8241","",7,"",5],["8261","",6,"",5,""],["8281","",7,"",7,"",4,"",10,"",5,"",17,"",7,"",6,"",7,"",18],["8341","",5,"",5,"",7],["8361","",18,""],["8381","",4,"",6,"",5,"",5,"",46,"",6,"",5,"",8],["8441","",5,"",8],["8461","",18],["8481","",7,"",6,"",5,"",10,"",5,"",18,"",5,"",6,"",5,"",26,""],["8541","",5,"",4,"",6,"",4],["8561","",5,"",5,"",6,""],["8581","",6,"",6,"",9,"",26,"",29,"",6,"",5,""],["8641","",6,"",5,""],["8661","",6,"",10],["8681","",22,"",4,"",6,"",5,"",6,"",22,"",4,""],["8741","",9,"",15],["8761","",18,""],["8781","",5,"",7,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",4],["8841","",4,"",5,"",6,"",4],["8861","",4,""],["8881","",15,"",4,"",6,"",5,"",54,""],["8941","",6,"",5,""],["8961","",10,"",5,""],["8981","",21,"",18,"",18,"",6,"",6,"",7,"",15],["8a41","",10,"",6,""],["8a61","",4,"",18,""],["8a81","",4,"",19,"",5,"",7,"",5,"",6,"",5,"",4,"",5,"",26,""],["8b41","",5,"",4,"",6,""],["8b61","",6,"",8],["8b81","",52,"",4,"",6,"",5,"",18,"",18],["8c41","",15,"",4],["8c61","",6,"",5,"",6,"",5],["8c81","",12,"",26,"",50,"",5,"",16],["8d41","",16,"",8],["8d61","",17,""],["8d81","",4,"",33,"",6,"",7,"",6,"",9,"",6,"",5,"",6,""],["8e41","",6,"",5,"",8],["8e61","",4,"",19],["8e81","",13,"",6,"",4,"",6,"",5,"",6,"",5,"",11,"",7,"",6,"",5,"",7],["8f41","",7,"",17],["8f61","",7,"",6,"",4],["8f81","",5,"",7,"",5,"",6,"",5,"",18,"",6,"",26,"",6,"",5],["9041","",6,"",5,""],["9061","",5,"",15],["9081","",12,"",6,"",5,"",4,"",6,"",4,"",5,"",11,"",33,""],["9141","",6,"",5],["9161","",9,"",5],["9181","",20,"",4,"",5,"",14,"",33,"",7,"",5,"",6],["9241","",7,"",4,""],["9261","",7,"",7,"",4],["9281","",21,"",18,"",6,"",7,"",6,"",35,""],["9341","",4,""],["9361","",6,"",8],["9381","",37,"",4,"",4,"",6,"",5,"",7,"",22,""],["9441","",5,"",5,"",8],["9461","",5,"",6,"",12],["9481","",5,"",6,"",6,"",9,"",22,"",4,"",6,"",10,"",6,"",24],["9541","",11,"",5,""],["9561","",6,"",5,""],["9581","",6,"",35,"",4,"",4,"",4,"",6,"",5,"",13,"",14],["9641","",23,""],["9661","",6,"",5,"",8],["9681","",10,"",5,"",13,"",33,"",6,"",44],["9741","",16,"",8],["9761","",17,"",7],["9781","",11,"",5,"",6,"",89,""],["9841","",16,"",5,""],["9861","",6,"",15],["9881","",21,"",6,"",5,"",4,"",6,"",5,"",6,"",5,"",6,"",5,""],["9941","",6,"",5,""],["9961","",6,"",5,""],["9981","",8,"",5,"",4,"",11,"",5,"",6,"",6,"",6,"",7,"",6,"",5,""],["9a41","",16],["9a61","",6,"",6,""],["9a81","",4,"",6,"",5,"",5,"",6,"",5,"",5,"",33,"",5,"",6,""],["9b41","",6,"",8],["9b61","",17,"",7],["9b81","",25,"",4,"",5,"",50,"",22,""],["9c41","",4,"",5,"",5],["9c61","",8,"",6,"",9],["9c81","",8,"",6,"",6,"",9,"",26,"",6,"",5,"",18,"",6,"",12],["9d41","",13,"",8],["9d61","",25],["9d81","",8,"",5,"",9,"",6,"",10,"",6,"",5,"",6,"",5,""],["9e41","",7,"",9,""],["9e61","",4,"",6,""],["9e81","",6,"",6,"",6,"",5,"",10,"",5,"",6,"",5,"",6,""],["9f41","",5,"",4,"",5,""],["9f61","",6,"",5,""],["9f81","",4,"",5,"",6,"",5,"",6,"",4,"",6,"",7,"",4,"",4,""],["a041","",5,"",6,""],["a061","",5,"",13],["a081","",4,"",4,"",4,"",6,"",5,"",6,"",5,"",26,"",4,"",5,"",7,""],["a141","",18,""],["a161","",6,"",5,""],["a181","",14,"",5,"",4,"",9,""],["a241","",5,"",18],["a261","",6,"",18],["a281","",7,"",6,"",7,""],["a341","",6,"",10,""],["a361","",6,"",16],["a381","",16,"",4,"",58,"",32,""],["a441","",5,""],["a461","",5,"",12],["a481","",28,"",93],["a541","",4,"",6,"",5,""],["a561","",17,"",5,""],["a581","",16,"",14,"",9],["a5b0","",9],["a5c1","",16,"",6],["a5e1","",16,"",6],["a641","",19,""],["a661","",5,"",5,"",6],["a681","",6,"",18,"",7],["a741","",4,"",6,"",7],["a761","",22,""],["a781","",6,"",5,"",7,"",9,"",9,"",4,"",5,"",4,""],["a841","",10,"",14],["a861","",18,"",6],["a881","",19,"",11,""],["a8a6",""],["a8a8",""],["a8b1","",27,"",25,"",14,""],["a941","",14,"",10],["a961","",18],["a981","",14,"",6,"",27,"",25,"",14,""],["aa41","",6,"",4,""],["aa61","",4,"",5,"",6,""],["aa81","",29,"",82],["ab41","",6,"",5,""],["ab61","",6,"",5,"",5],["ab81","",8,"",6,"",12,"",85],["ac41","",5,"",6,""],["ac61","",11,"",4],["ac81","",28,"",5,"",25],["acd1","",5,"",25],["ad41","",6,"",5,"",7],["ad61","",6,"",10,""],["ad81","",5,"",18,""],["ae41","",5,"",16],["ae61","",5,"",6,"",4],["ae81","",6,"",5,""],["af41","",19],["af61","",13,"",5,""],["af81","",5,"",6,"",5,""],["b041","",5,"",5,"",12],["b061","",5,"",19],["b081","",13,"",6,"",5,"",7,"",4,""],["b141","",6,"",5,""],["b161","",6,"",5,"",11],["b181","",14,"",6,""],["b241","",6,"",5,""],["b261","",18,"",5,""],["b281","",5,"",18,"",6,""],["b341","",19,""],["b361","",5,"",5,"",5],["b381","",5,"",5,"",19,"",4,""],["b441","",5,"",6,"",5],["b461","",6,"",10,""],["b481","",6,"",18,"",4,"",4,""],["b541","",14,"",5],["b561","",5,"",5,"",4],["b581","",6,"",5,"",11,""],["b641","",7,"",17],["b661","",15,""],["b681","",5,"",6,"",5,""],["b741","",13,"",6,""],["b761","",20,""],["b781","",6,"",14,""],["b841","",7,"",17],["b861","",8,"",13],["b881","",5,"",24,"",4,""],["b941","",6,"",5,""],["b961","",14,"",6,""],["b981","",22,"",4,"",4,""],["ba41","",5,"",6,""],["ba61","",5,"",4,"",5],["ba81","",6,"",9,""],["bb41","",4,"",5,"",4,""],["bb61","",6,"",5,""],["bb81","",31,""],["bc41","",17,""],["bc61","",5,"",6,""],["bc81","",4,"",6,"",5,"",5,"",4,""],["bd41","",7,"",7,""],["bd61","",5,"",13],["bd81","",5,"",25,""],["be41","",7,"",14],["be61","",7,"",7,""],["be81","",4,"",4,"",5,"",8,"",6,""],["bf41","",10,"",14],["bf61","",18,""],["bf81","",5,"",7,"",6,"",5,""],["c041","",5,"",6,"",5],["c061","",25],["c081","",6,"",5,"",7,""],["c141","",5,"",6,""],["c161","",19,""],["c181","",31,""],["c241","",4,"",5,""],["c261","",4,"",5,"",6,""],["c281","",5,"",7,"",9,""],["c341","",4],["c361","",4,"",5,"",11],["c381","",5,"",7,"",5,""],["c441","",7,"",7,""],["c461","",5,"",4],["c481","",5,"",11,""],["c541","",6,"",5,""],["c561","",6,"",5,"",4],["c581","",6,"",5,""],["c641","",6,"",5],["c6a1",""],["c7a1",""],["c8a1",""],["caa1",""],["cba1",""],["cca1",""],["cda1",""],["cea1",""],["cfa1",""],["d0a1",""],["d1a1","",5,"",4,""],["d2a1","",4,"",5,"",10,"",7,"",5,""],["d3a1",""],["d4a1",""],["d5a1",""],["d6a1",""],["d7a1",""],["d8a1",""],["d9a1",""],["daa1",""],["dba1",""],["dca1",""],["dda1",""],["dea1",""],["dfa1",""],["e0a1",""],["e1a1",""],["e2a1",""],["e3a1",""],["e4a1",""],["e5a1",""],["e6a1",""],["e7a1",""],["e8a1",""],["e9a1",""],["eaa1",""],["eba1",""],["eca1",""],["eda1",""],["eea1",""],["efa1",""],["f0a1",""],["f1a1",""],["f2a1",""],["f3a1",""],["f4a1",""],["f5a1",""],["f6a1",""],["f7a1",""],["f8a1",""],["f9a1",""],["faa1",""],["fba1",""],["fca1",""],["fda1",""]]')},function(e){e.exports=JSON.parse('[["8740",""],["8767",""],["87a1",""],["8840","",4,""],["88a1",""],["8940",""],["8943",""],["8946",""],["894c",""],["89a1",""],["89ab",""],["89b0",""],["89b5",""],["89c1",""],["89c5",""],["8a40",""],["8a43",""],["8a64",""],["8a76",""],["8aa1",""],["8aac",""],["8ab2",""],["8abb",""],["8ac9",""],["8ace",""],["8adf",""],["8af6",""],["8b40",""],["8b55",""],["8ba1",""],["8bde",""],["8c40",""],["8ca1",""],["8ca7",""],["8cc9",""],["8cce",""],["8ce6",""],["8d40",""],["8d42",""],["8da1",""],["8e40",""],["8ea1",""],["8f40",""],["8fa1",""],["9040",""],["90a1",""],["9140",""],["91a1",""],["9240",""],["92a1",""],["9340",""],["93a1",""],["9440",""],["94a1",""],["9540",""],["95a1",""],["9640",""],["96a1",""],["9740",""],["97a1",""],["9840",""],["98a1",""],["9940",""],["99a1",""],["9a40",""],["9aa1",""],["9b40",""],["9b62",""],["9ba1",""],["9c40",""],["9ca1",""],["9d40",""],["9da1",""],["9e40",""],["9ea1",""],["9ead",""],["9ec5",""],["9ef5",""],["9f40",""],["9f4f",""],["9fa1",""],["9fae",""],["9fb2",""],["9fc1",""],["9fc9",""],["9fdb",""],["9fe7",""],["9feb",""],["9ff0",""],["a040",""],["a055",""],["a058",""],["a05b",""],["a063",""],["a073",""],["a0a1",""],["a0a6",""],["a0ae",""],["a0b0",""],["a0d4",""],["a0e2",""],["a3c0","",31,""],["c6a1","",9,"",9,"",9,"",23],["c740","",58,""],["c7a1","",81,"",5,"",4],["c840","",26,"",25,""],["c8a1",""],["c8cd",""],["c8f5",""],["f9fe",""],["fa40",""],["faa1",""],["fb40",""],["fba1",""],["fc40",""],["fca1",""],["fd40",""],["fda1",""],["fe40",""],["fea1",""]]')},function(e,t,n){"use strict";var r=n(52).Buffer,i=n(10).Transform;function o(e,t){this.conv=e,(t=t||{}).decodeStrings=!1,i.call(this,t)}function a(e,t){this.conv=e,(t=t||{}).encoding=this.encoding="utf8",i.call(this,t)}e.exports=function(e){e.encodeStream=function(t,n){return new o(e.getEncoder(t,n),n)},e.decodeStream=function(t,n){return new a(e.getDecoder(t,n),n)},e.supportsStreams=!0,e.IconvLiteEncoderStream=o,e.IconvLiteDecoderStream=a,e._collect=a.prototype.collect},o.prototype=Object.create(i.prototype,{constructor:{value:o}}),o.prototype._transform=function(e,t,n){if("string"!=typeof e)return n(new Error("Iconv encoding stream needs strings as its input."));try{var r=this.conv.write(e);r&&r.length&&this.push(r),n()}catch(e){n(e)}},o.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t),e()}catch(t){e(t)}},o.prototype.collect=function(e){var t=[];return this.on("error",e),this.on("data",function(e){t.push(e)}),this.on("end",function(){e(null,r.concat(t))}),this},a.prototype=Object.create(i.prototype,{constructor:{value:a}}),a.prototype._transform=function(e,t,n){if(!r.isBuffer(e))return n(new Error("Iconv decoding stream needs buffers as its input."));try{var i=this.conv.write(e);i&&i.length&&this.push(i,this.encoding),n()}catch(e){n(e)}},a.prototype._flush=function(e){try{var t=this.conv.end();t&&t.length&&this.push(t,this.encoding),e()}catch(t){e(t)}},a.prototype.collect=function(e){var t="";return this.on("error",e),this.on("data",function(e){t+=e}),this.on("end",function(){e(null,t)}),this}},function(e,t,n){"use strict";var r=n(52).Buffer;e.exports=function(e){var t=void 0;e.supportsNodeEncodingsExtension=!(r.from||new r(0)instanceof Uint8Array),e.extendNodeEncodings=function(){if(!t){if(t={},!e.supportsNodeEncodingsExtension)return console.error("ACTION NEEDED: require('iconv-lite').extendNodeEncodings() is not supported in your version of Node"),void console.error("See more info at https://github.com/ashtuchkin/iconv-lite/wiki/Node-v4-compatibility");var i={hex:!0,utf8:!0,"utf-8":!0,ascii:!0,binary:!0,base64:!0,ucs2:!0,"ucs-2":!0,utf16le:!0,"utf-16le":!0};r.isNativeEncoding=function(e){return e&&i[e.toLowerCase()]};var o=n(52).SlowBuffer;if(t.SlowBufferToString=o.prototype.toString,o.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.SlowBufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.SlowBufferWrite=o.prototype.write,o.prototype.write=function(n,i,o,a){if(isFinite(i))isFinite(o)||(a=o,o=void 0);else{var s=a;a=i,i=o,o=s}i=+i||0;var u=this.length-i;if(o?(o=+o)>u&&(o=u):o=u,a=String(a||"utf8").toLowerCase(),r.isNativeEncoding(a))return t.SlowBufferWrite.call(this,n,i,o,a);if(n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var c=e.encode(n,a);return c.length<o&&(o=c.length),c.copy(this,i,0,o),o},t.BufferIsEncoding=r.isEncoding,r.isEncoding=function(t){return r.isNativeEncoding(t)||e.encodingExists(t)},t.BufferByteLength=r.byteLength,r.byteLength=o.byteLength=function(n,i){return i=String(i||"utf8").toLowerCase(),r.isNativeEncoding(i)?t.BufferByteLength.call(this,n,i):e.encode(n,i).length},t.BufferToString=r.prototype.toString,r.prototype.toString=function(n,i,o){return n=String(n||"utf8").toLowerCase(),r.isNativeEncoding(n)?t.BufferToString.call(this,n,i,o):(void 0===i&&(i=0),void 0===o&&(o=this.length),e.decode(this.slice(i,o),n))},t.BufferWrite=r.prototype.write,r.prototype.write=function(n,i,o,a){var s=i,u=o,c=a;if(isFinite(i))isFinite(o)||(a=o,o=void 0);else{var l=a;a=i,i=o,o=l}if(a=String(a||"utf8").toLowerCase(),r.isNativeEncoding(a))return t.BufferWrite.call(this,n,s,u,c);i=+i||0;var f=this.length-i;if(o?(o=+o)>f&&(o=f):o=f,n.length>0&&(o<0||i<0))throw new RangeError("attempt to write beyond buffer bounds");var d=e.encode(n,a);return d.length<o&&(o=d.length),d.copy(this,i,0,o),o},e.supportsStreams){var a=n(10).Readable;t.ReadableSetEncoding=a.prototype.setEncoding,a.prototype.setEncoding=function(t,n){this._readableState.decoder=e.getDecoder(t,n),this._readableState.encoding=t},a.prototype.collect=e._collect}}},e.undoExtendNodeEncodings=function(){if(e.supportsNodeEncodingsExtension){if(!t)throw new Error("require('iconv-lite').undoExtendNodeEncodings(): Nothing to undo; extendNodeEncodings() is not called.");delete r.isNativeEncoding;var i=n(52).SlowBuffer;if(i.prototype.toString=t.SlowBufferToString,i.prototype.write=t.SlowBufferWrite,r.isEncoding=t.BufferIsEncoding,r.byteLength=t.BufferByteLength,r.prototype.toString=t.BufferToString,r.prototype.write=t.BufferWrite,e.supportsStreams){var o=n(10).Readable;o.prototype.setEncoding=t.ReadableSetEncoding,delete o.prototype.collect}t=void 0}}}},function(e,t,n){"use strict";var r;try{"iconv",r=n(581)("iconv").Iconv}catch(e){}e.exports=r},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=581},,,,,,,,,,,,,,,function(e,t){e.exports=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}},function(e,t,n){var r=n(136);e.exports=function(e,t,n,i){return r(e,function(e,r,o){t(i,e,n(e),o)}),i}},function(e,t,n){var r=n(43),i=n(20),o=n(331),a=n(599),s=n(87),u=n(600),c=n(96);e.exports=function(e,t,n){var l=-1;t=r(t.length?t:[c],s(i));var f=o(e,function(e,n,i){return{criteria:r(t,function(t){return t(e)}),index:++l,value:e}});return a(f,function(e,t){return u(e,t,n)})}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(601);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,u=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=u?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(91);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e==e,a=r(e),s=void 0!==t,u=null===t,c=t==t,l=r(t);if(!u&&!l&&!a&&e>t||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&e<t||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}},function(e,t){e.exports=function(e){var t=new Date(e.getTime()),n=t.getTimezoneOffset();return t.setSeconds(0,0),6e4*n+t.getTime()%6e4}},,function(e,t,n){var r=n(78),i=n(118);e.exports=function(e,t){return e&&r(t,i(t),e)}},function(e,t,n){var r=n(78),i=n(211);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t,n){var r=n(78),i=n(337);e.exports=function(e,t){return r(e,i(e),t)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(209),i=n(609),o=n(610),a=n(611),s=n(316),u="[object Boolean]",c="[object Date]",l="[object Map]",f="[object Number]",d="[object RegExp]",p="[object Set]",h="[object String]",v="[object Symbol]",y="[object ArrayBuffer]",g="[object DataView]",m="[object Float32Array]",b="[object Float64Array]",w="[object Int8Array]",_="[object Int16Array]",x="[object Int32Array]",k="[object Uint8Array]",O="[object Uint8ClampedArray]",S="[object Uint16Array]",E="[object Uint32Array]";e.exports=function(e,t,n){var A=e.constructor;switch(t){case y:return r(e);case u:case c:return new A(+e);case g:return i(e,n);case m:case b:case w:case _:case x:case k:case O:case S:case E:return s(e,n);case l:return new A;case f:case h:return new A(e);case d:return o(e);case p:return new A;case v:return a(e)}}},function(e,t,n){var r=n(209);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(94),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},function(e,t,n){var r=n(613),i=n(87),o=n(203),a=o&&o.isMap,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(109),i=n(34),o="[object Map]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t,n){var r=n(615),i=n(87),o=n(203),a=o&&o.isSet,s=a?i(a):r;e.exports=s},function(e,t,n){var r=n(109),i=n(34),o="[object Set]";e.exports=function(e){return i(e)&&r(e)==o}},function(e,t,n){var r=n(97),i=n(276),o=n(617),a=n(92);e.exports=function(e,t){return t=r(t,e),null==(e=o(e,t))||delete e[a(i(t))]}},function(e,t,n){var r=n(158),i=n(283);e.exports=function(e,t){return t.length<2?e:r(e,i(t,0,-1))}},function(e,t,n){var r=n(194);e.exports=function(e){return r(e)?void 0:e}},function(e,t,n){var r=n(620),i=n(220),o=n(621);e.exports=function(e){return i(e)?o(e):r(e)}},function(e,t,n){var r=n(215)("length");e.exports=r},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[o+r+"?",r,a,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+l+c,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},,,function(e,t){e.exports=function(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);void 0!==o&&(n=void 0===n?o:n+o)}return n}},,,,,,function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=r=function(e){return n(e)}:e.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(t)}e.exports=r},function(e,t){function n(t,r){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,r)}e.exports=n},,function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},,,,,,,function(e,t,n){const r={secret:0,debug:10,info:20,warn:30,error:40,ok:50,critical:50},i=n(339);e.exports={filterSecrets:function(e,t,n){if("secret"!==t&&n instanceof i)throw new Error("You should log a secret with log.secret")},filterLevel:function(e,t){return r[t]>=r[e]}}},function(e,t,n){const r=n(644);n(645);e.exports=r},function(e,t,n){const r=n(287),i=65535;e.exports=function(e,t,n,o){const a={time:new Date,type:e,label:n,namespace:o};"object"==typeof t?(t&&t.no_retry&&(a.no_retry=t.no_retry),t&&t.message&&(a.message=t.message)):a.message=t,a.message&&a.message.stack&&(a.message=a.message.stack);let s=a;try{s=r(a).substr(0,i)}catch(e){console.log(e.message,"cozy-logger: Failed to convert message to JSON")}return s}},function(e,t,n){const r=n(5),i=n(403);r&&r.inspect&&r.inspect.defaultOptions&&(r.inspect.defaultOptions.maxArrayLength=null,r.inspect.defaultOptions.depth=2,r.inspect.defaultOptions.colors=!0);const o={debug:"cyan",warn:"yellow",info:"blue",error:"red",ok:"green",secret:"red",critical:"red"};e.exports=function(e,t,n,a){let s=t;"string"!=typeof s&&(s=r.inspect(s));let u=n?` : "${n}" `:"",c=a?i.magenta(`${a}: `):"",l=o[e];return`${c}${l?i[l](e):e}${u} : ${s}`}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.getKey=t.prefix=void 0;t.prefix="flag__";var r=function(e){return"flag__"+e};t.getKey=r;var i=function(){return Object.keys(localStorage).filter(function(e){return 0===e.indexOf("flag__")}).map(function(e){return e.replace("flag__","")})},o=function(e){var t=localStorage.getItem(r(e));return t?JSON.parse(t):t},a=function(e){return localStorage.removeItem(r(e))},s={getAll:function(){var e={},t=!0,n=!1,r=void 0;try{for(var a,s=i()[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var u=a.value;e[u]=o(u)}}catch(e){n=!0,r=e}finally{try{t||null==s.return||s.return()}finally{if(n)throw r}}return e},getItem:o,setItem:function(e,t){var n=JSON.stringify(t);return localStorage.setItem(r(e),n)},clearAll:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=i()[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var s=r.value;a(s)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}},removeItem:a};t.default=s},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(17)),o=r(n(25)),a=r(n(35)),s=r(n(26)),u=r(n(277)),c=r(n(36)),l=r(n(252)),f=r(n(223)),d=function(e){var t=function(t){function n(e){var t;return(0,i.default)(this,n),(t=(0,a.default)(this,(0,s.default)(n).call(this,e))).handleChange=t.handleChange.bind((0,u.default)(t)),t}return(0,c.default)(n,t),(0,o.default)(n,[{key:"componentDidMount",value:function(){f.default.store.on("change",this.handleChange)}},{key:"componentWillUnmount",value:function(){f.default.store.removeListener("change",this.handleChange)}},{key:"handleChange",value:function(){this.forceUpdate()}},{key:"render",value:function(){return l.default.createElement(e,this.props)}}]),n}(l.default.Component);return t.displayName="flag_"+e.displayName,t};t.default=d},function(e,t,n){"use strict";
/** @license React v16.9.0
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=n(649),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,f=i?Symbol.for("react.context"):60110,d=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,h=i?Symbol.for("react.suspense_list"):60120,v=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116;i&&Symbol.for("react.fundamental"),i&&Symbol.for("react.responder");var g="function"==typeof Symbol&&Symbol.iterator;function m(e){for(var t=e.message,n="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r]);return e.message="Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings. ",e}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w={};function _(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}function x(){}function k(e,t,n){this.props=e,this.context=t,this.refs=w,this.updater=n||b}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw m(Error(85));this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},x.prototype=_.prototype;var O=k.prototype=new x;O.constructor=k,r(O,_.prototype),O.isPureReactComponent=!0;var S={current:null},E={suspense:null},A={current:null},C=Object.prototype.hasOwnProperty,j={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var r=void 0,i={},a=null,s=null;if(null!=t)for(r in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)C.call(t,r)&&!j.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in u=e.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:e,key:a,ref:s,props:i,_owner:A.current}}function P(e){return"object"==typeof e&&null!==e&&e.$$typeof===o}var R=/\/+/g,M=[];function I(e,t,n,r){if(M.length){var i=M.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function D(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>M.length&&M.push(e)}function N(e,t,n){return null==e?0:function e(t,n,r,i){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case o:case a:u=!0}}if(u)return r(i,t,""===n?"."+L(t,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(t))for(var c=0;c<t.length;c++){var l=n+L(s=t[c],c);u+=e(s,l,r,i)}else if(l=null===t||"object"!=typeof t?null:"function"==typeof(l=g&&t[g]||t["@@iterator"])?l:null,"function"==typeof l)for(t=l.call(t),c=0;!(s=t.next()).done;)u+=e(s=s.value,l=n+L(s,c++),r,i);else if("object"===s)throw r=""+t,m(Error(31),"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,"");return u}(e,"",t,n)}function L(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function B(e,t){e.func.call(e.context,t,e.count++)}function z(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?F(e,r,n,function(e){return e}):null!=e&&(P(e)&&(e=function(e,t){return{$$typeof:o,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(R,"$&/")+"/")+n)),r.push(e))}function F(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(R,"$&/")+"/"),N(e,z,t=I(t,o,r,i)),D(t)}function U(){var e=S.current;if(null===e)throw m(Error(321));return e}var q={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return F(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;N(e,B,t=I(null,null,t,n)),D(t)},count:function(e){return N(e,function(){return null},null)},toArray:function(e){var t=[];return F(e,t,null,function(e){return e}),t},only:function(e){if(!P(e))throw m(Error(143));return e}},createRef:function(){return{current:null}},Component:_,PureComponent:k,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:f,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:d,render:e}},lazy:function(e){return{$$typeof:y,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return U().useCallback(e,t)},useContext:function(e,t){return U().useContext(e,t)},useEffect:function(e,t){return U().useEffect(e,t)},useImperativeHandle:function(e,t,n){return U().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return U().useLayoutEffect(e,t)},useMemo:function(e,t){return U().useMemo(e,t)},useReducer:function(e,t,n){return U().useReducer(e,t,n)},useRef:function(e){return U().useRef(e)},useState:function(e){return U().useState(e)},Fragment:s,Profiler:c,StrictMode:u,Suspense:p,unstable_SuspenseList:h,createElement:T,cloneElement:function(e,t,n){if(null==e)throw m(Error(267),e);var i=void 0,a=r({},e.props),s=e.key,u=e.ref,c=e._owner;if(null!=t){void 0!==t.ref&&(u=t.ref,c=A.current),void 0!==t.key&&(s=""+t.key);var l=void 0;for(i in e.type&&e.type.defaultProps&&(l=e.type.defaultProps),t)C.call(t,i)&&!j.hasOwnProperty(i)&&(a[i]=void 0===t[i]&&void 0!==l?l[i]:t[i])}if(1===(i=arguments.length-2))a.children=n;else if(1<i){l=Array(i);for(var f=0;f<i;f++)l[f]=arguments[f+2];a.children=l}return{$$typeof:o,type:e.type,key:s,ref:u,props:a,_owner:c}},createFactory:function(e){var t=T.bind(null,e);return t.type=e,t},isValidElement:P,version:"16.9.0",unstable_withSuspenseConfig:function(e,t){var n=E.suspense;E.suspense=void 0===t?null:t;try{e()}finally{E.suspense=n}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentBatchConfig:E,ReactCurrentOwner:A,IsSomeRendererActing:{current:!1},assign:r}},$={default:q},H=$&&q||$;e.exports=H.default||H},function(e,t,n){"use strict";
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,u=a(e),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var f=0;f<s.length;f++)o.call(n,s[f])&&(u[s[f]]=n[s[f]])}}return u}},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=r(n(17)),o=r(n(25)),a=r(n(35)),s=r(n(26)),u=r(n(36)),c=r(n(252)),l=r(n(223)),f=function(e){var t=e.name,n=e.onChange;return c.default.createElement("input",{type:"checkbox",checked:(0,l.default)(t),onChange:function(e){return(0,l.default)(t,JSON.parse(e.target.checked))&&n&&n()}})},d=function(e){var t=e.children,n=e.onClick;return c.default.createElement("button",{type:"button",onClick:n,style:{position:"absolute",top:"100%",left:"0"}},t)},p=l.default.connect(function(){return c.default.createElement("div",null,l.default.list().map(function(e){return c.default.createElement("div",{key:e},function(e){return e.replace(/[a-z][A-Z]/g,function(e){return e[0]+" "+e[1].toLowerCase()})}(e)," : ",c.default.createElement(f,{onChange:function(){},name:e}))}))}),h=function(e){function t(e){var n;return(0,i.default)(this,t),(n=(0,a.default)(this,(0,s.default)(t).call(this,e))).state={folded:!0},n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e,t=this;return(0,l.default)("switcher")&&c.default.createElement("div",{className:"flag-switcher",style:(e=this.state,{borderBottomLeftRadius:".5rem",padding:".5rem",position:"absolute",zIndex:1e3,color:"white",background:"rgba(74,68,90,0.85)",top:0,right:0,transform:"translateY(".concat(e.folded?"-100%":"0",")")})},c.default.createElement(d,{onClick:function(){return t.setState(function(e){return{folded:!e.folded}})}},this.state.folded?"Show":"Hide"," flags"),c.default.createElement("button",{onClick:function(){return t.setState({date:Date.now()})}},"refresh"),"",c.default.createElement("button",{onClick:function(){return l.default.reset()&&(0,l.default)("switcher",!0)&&t.forceUpdate()}},"reset"),c.default.createElement(p,null))}}]),t}(c.default.Component);t.default=h,h.List=p},function(e,t,n){n(79),n(656),e.exports=n(6).Array.from},function(e,t,n){var r=n(225),i=n(226);e.exports=function(e){return function(t,n){var o,a,s=String(i(t)),u=r(n),c=s.length;return u<0||u>=c?e?"":void 0:(o=s.charCodeAt(u))<55296||o>56319||u+1===c||(a=s.charCodeAt(u+1))<56320||a>57343?e?s.charAt(u):o:e?s.slice(u,u+2):a-56320+(o-55296<<10)+65536}}},function(e,t,n){"use strict";var r=n(162),i=n(122),o=n(124),a={};n(61)(a,n(22)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(a,{next:i(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var r=n(62),i=n(163),o=n(655);e.exports=function(e){return function(t,n,a){var s,u=r(t),c=i(u.length),l=o(a,c);if(e&&n!=n){for(;c>l;)if((s=u[l++])!=s)return!0}else for(;c>l;l++)if((e||l in u)&&u[l]===n)return e||l||0;return!e&&-1}}},function(e,t,n){var r=n(225),i=Math.max,o=Math.min;e.exports=function(e,t){return(e=r(e))<0?i(e+t,0):o(e,t)}},function(e,t,n){"use strict";var r=n(49),i=n(13),o=n(82),a=n(347),s=n(348),u=n(163),c=n(657),l=n(234);i(i.S+i.F*!n(349)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,f,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,y=void 0!==v,g=0,m=l(d);if(y&&(v=r(v,h>2?arguments[2]:void 0,2)),null==m||p==Array&&s(m))for(n=new p(t=u(d.length));t>g;g++)c(n,g,y?v(d[g],g):d[g]);else for(f=m.call(d),n=new p;!(i=f.next()).done;g++)c(n,g,y?a(f,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(e,t,n){"use strict";var r=n(44),i=n(122);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){n(659),e.exports=n(6).Object.assign},function(e,t,n){var r=n(13);r(r.S+r.F,"Object",{assign:n(660)})},function(e,t,n){"use strict";var r=n(28),i=n(99),o=n(235),a=n(125),s=n(82),u=n(230),c=Object.assign;e.exports=!c||n(80)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=c({},e)[n]||Object.keys(c({},t)).join("")!=r})?function(e,t){for(var n=s(e),c=arguments.length,l=1,f=o.f,d=a.f;c>l;)for(var p,h=u(arguments[l++]),v=f?i(h).concat(f(h)):i(h),y=v.length,g=0;y>g;)p=v[g++],r&&!d.call(h,p)||(n[p]=h[p]);return n}:c},function(e,t,n){n(662),e.exports=n(6).Object.getPrototypeOf},function(e,t,n){var r=n(82),i=n(346);n(166)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){e.exports={default:n(664),__esModule:!0}},function(e,t,n){n(79),n(101),e.exports=n(236).f("iterator")},function(e,t,n){"use strict";var r=n(666),i=n(351),o=n(98),a=n(62);e.exports=n(227)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):i(0,"keys"==t?n:"values"==t?e[n]:[n,e[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(668),__esModule:!0}},function(e,t,n){n(669),n(168),n(672),n(673),e.exports=n(6).Symbol},function(e,t,n){"use strict";var r=n(21),i=n(81),o=n(28),a=n(13),s=n(342),u=n(167).KEY,c=n(80),l=n(232),f=n(124),d=n(164),p=n(22),h=n(236),v=n(237),y=n(670),g=n(352),m=n(46),b=n(38),w=n(82),_=n(62),x=n(229),k=n(122),O=n(162),S=n(671),E=n(238),A=n(235),C=n(44),j=n(99),T=E.f,P=C.f,R=S.f,M=r.Symbol,I=r.JSON,D=I&&I.stringify,N=p("_hidden"),L=p("toPrimitive"),B={}.propertyIsEnumerable,z=l("symbol-registry"),F=l("symbols"),U=l("op-symbols"),q=Object.prototype,$="function"==typeof M&&!!A.f,H=r.QObject,G=!H||!H.prototype||!H.prototype.findChild,V=o&&c(function(){return 7!=O(P({},"a",{get:function(){return P(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=T(q,t);r&&delete q[t],P(e,t,n),r&&e!==q&&P(q,t,r)}:P,J=function(e){var t=F[e]=O(M.prototype);return t._k=e,t},Q=$&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},Y=function(e,t,n){return e===q&&Y(U,t,n),m(e),t=x(t,!0),m(n),i(F,t)?(n.enumerable?(i(e,N)&&e[N][t]&&(e[N][t]=!1),n=O(n,{enumerable:k(0,!1)})):(i(e,N)||P(e,N,k(1,{})),e[N][t]=!0),V(e,t,n)):P(e,t,n)},W=function(e,t){m(e);for(var n,r=y(t=_(t)),i=0,o=r.length;o>i;)Y(e,n=r[i++],t[n]);return e},Z=function(e){var t=B.call(this,e=x(e,!0));return!(this===q&&i(F,e)&&!i(U,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,N)&&this[N][e])||t)},K=function(e,t){if(e=_(e),t=x(t,!0),e!==q||!i(F,t)||i(U,t)){var n=T(e,t);return!n||!i(F,t)||i(e,N)&&e[N][t]||(n.enumerable=!0),n}},X=function(e){for(var t,n=R(_(e)),r=[],o=0;n.length>o;)i(F,t=n[o++])||t==N||t==u||r.push(t);return r},ee=function(e){for(var t,n=e===q,r=R(n?U:_(e)),o=[],a=0;r.length>a;)!i(F,t=r[a++])||n&&!i(q,t)||o.push(F[t]);return o};$||(s((M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(n){this===q&&t.call(U,n),i(this,N)&&i(this[N],e)&&(this[N][e]=!1),V(this,e,k(1,n))};return o&&G&&V(q,e,{configurable:!0,set:t}),J(e)}).prototype,"toString",function(){return this._k}),E.f=K,C.f=Y,n(353).f=S.f=X,n(125).f=Z,A.f=ee,o&&!n(120)&&s(q,"propertyIsEnumerable",Z,!0),h.f=function(e){return J(p(e))}),a(a.G+a.W+a.F*!$,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)p(te[ne++]);for(var re=j(p.store),ie=0;re.length>ie;)v(re[ie++]);a(a.S+a.F*!$,"Symbol",{for:function(e){return i(z,e+="")?z[e]:z[e]=M(e)},keyFor:function(e){if(!Q(e))throw TypeError(e+" is not a symbol!");for(var t in z)if(z[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),a(a.S+a.F*!$,"Object",{create:function(e,t){return void 0===t?O(e):W(O(e),t)},defineProperty:Y,defineProperties:W,getOwnPropertyDescriptor:K,getOwnPropertyNames:X,getOwnPropertySymbols:ee});var oe=c(function(){A.f(1)});a(a.S+a.F*oe,"Object",{getOwnPropertySymbols:function(e){return A.f(w(e))}}),I&&a(a.S+a.F*(!$||c(function(){var e=M();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(b(t)||void 0!==e)&&!Q(e))return g(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!Q(t))return t}),r[1]=t,D.apply(I,r)}}),M.prototype[L]||n(61)(M.prototype,L,M.prototype.valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(r.JSON,"JSON",!0)},function(e,t,n){var r=n(99),i=n(235),o=n(125);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var a,s=n(e),u=o.f,c=0;s.length>c;)u.call(e,a=s[c++])&&t.push(a);return t}},function(e,t,n){var r=n(62),i=n(353).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?function(e){try{return i(e)}catch(e){return a.slice()}}(e):i(r(e))}},function(e,t,n){n(237)("asyncIterator")},function(e,t,n){n(237)("observable")},function(e,t,n){e.exports={default:n(675),__esModule:!0}},function(e,t,n){n(676),e.exports=n(6).Object.setPrototypeOf},function(e,t,n){var r=n(13);r(r.S,"Object",{setPrototypeOf:n(677).set})},function(e,t,n){var r=n(38),i=n(46),o=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{(r=n(49)(Function.call,n(238).f(Object.prototype,"__proto__").set,2))(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){e.exports={default:n(679),__esModule:!0}},function(e,t,n){n(680);var r=n(6).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(13);r(r.S,"Object",{create:n(162)})},function(e,t,n){n(682);var r=n(6).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(13);r(r.S+r.F*!n(28),"Object",{defineProperty:n(44).f})},function(e,t,n){var r=n(255),i=n(190),o=n(282),a=n(398),s=n(12),u=n(452),c="Expected a function",l=8,f=32,d=128,p=256;e.exports=function(e){return i(function(t){var n=t.length,i=n,h=r.prototype.thru;for(e&&t.reverse();i--;){var v=t[i];if("function"!=typeof v)throw new TypeError(c);if(h&&!y&&"wrapper"==a(v))var y=new r([],!0)}for(i=y?i:n;++i<n;){v=t[i];var g=a(v),m="wrapper"==g?o(v):void 0;y=m&&u(m[0])&&m[1]==(d|l|f|p)&&!m[4].length&&1==m[9]?y[a(m[0])].apply(y,m[3]):1==v.length&&u(v)?y[g]():y.thru(v)}return function(){var e=arguments,r=e[0];if(y&&1==e.length&&s(r))return y.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}},function(e,t,n){n(685),e.exports=n(6).Object.keys},function(e,t,n){var r=n(82),i=n(99);n(166)("keys",function(){return function(e){return i(r(e))}})},,,function(e,t,n){const r=n(39),i=["login","identifier","new_identifier","email"];class o extends r{static getAccountName(e){return e?e.auth&&(e.auth.accountName||this.getAccountLogin(e))||e._id:null}static getAccountLogin(e){if(e&&e.auth)for(const t of i)if(e.auth[t])return e.auth[t]}}o.schema={doctype:"io.cozy.accounts",attributes:{},relationships:{master:{type:"has-one",doctype:"io.cozy.accounts"}}},o.probableLoginFieldNames=i,e.exports=o},function(e,t,n){const r=n(437);e.exports={parallelMap:(e,t,n)=>{const i=[];return new r(function*(){for(let n of e)yield t(n).then(e=>i.push(e))},n=n||30).start().then(()=>i)}}},function(e,t,n){n(691),e.exports=n(6).Object.entries},function(e,t,n){var r=n(13),i=n(355)(!0);r(r.S,"Object",{entries:function(e){return i(e)}})},function(e,t,n){"use strict";t.__esModule=!0;var r,i=n(224),o=(r=i)&&r.__esModule?r:{default:r};t.default=function(e){return Array.isArray(e)?e:(0,o.default)(e)}},function(e,t,n){e.exports={default:n(694),__esModule:!0}},function(e,t,n){n(101),n(79),e.exports=n(695)},function(e,t,n){var r=n(165),i=n(22)("iterator"),o=n(98);e.exports=n(6).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||o.hasOwnProperty(r(t))}},function(e,t,n){n(101),n(79),e.exports=n(697)},function(e,t,n){var r=n(46),i=n(234);e.exports=n(6).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){n(168),n(79),n(101),n(699),n(703),n(704),e.exports=n(6).Promise},function(e,t,n){"use strict";var r,i,o,a,s=n(120),u=n(21),c=n(49),l=n(165),f=n(13),d=n(38),p=n(121),h=n(240),v=n(126),y=n(356),g=n(357).set,m=n(701)(),b=n(241),w=n(358),_=n(702),x=n(359),k=u.TypeError,O=u.process,S=O&&O.versions,E=S&&S.v8||"",A=u.Promise,C="process"==l(O),j=function(){},T=i=b.f,P=!!function(){try{var e=A.resolve(1),t=(e.constructor={})[n(22)("species")]=function(e){e(j,j)};return(C||"function"==typeof PromiseRejectionEvent)&&e.then(j)instanceof t&&0!==E.indexOf("6.6")&&-1===_.indexOf("Chrome/66")}catch(e){}}(),R=function(e){var t;return!(!d(e)||"function"!=typeof(t=e.then))&&t},M=function(e,t){if(!e._n){e._n=!0;var n=e._c;m(function(){for(var r=e._v,i=1==e._s,o=0,a=function(t){var n,o,a,s=i?t.ok:t.fail,u=t.resolve,c=t.reject,l=t.domain;try{s?(i||(2==e._h&&N(e),e._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===t.promise?c(k("Promise-chain cycle")):(o=R(n))?o.call(n,u,c):u(n)):c(r)}catch(e){l&&!a&&l.exit(),c(e)}};n.length>o;)a(n[o++]);e._c=[],e._n=!1,t&&!e._h&&I(e)})}},I=function(e){g.call(u,function(){var t,n,r,i=e._v,o=D(e);if(o&&(t=w(function(){C?O.emit("unhandledRejection",i,e):(n=u.onunhandledrejection)?n({promise:e,reason:i}):(r=u.console)&&r.error&&r.error("Unhandled promise rejection",i)}),e._h=C||D(e)?2:1),e._a=void 0,o&&t.e)throw t.v})},D=function(e){return 1!==e._h&&0===(e._a||e._c).length},N=function(e){g.call(u,function(){var t;C?O.emit("rejectionHandled",e):(t=u.onrejectionhandled)&&t({promise:e,reason:e._v})})},L=function(e){var t=this;t._d||(t._d=!0,(t=t._w||t)._v=e,t._s=2,t._a||(t._a=t._c.slice()),M(t,!0))},B=function(e){var t,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===e)throw k("Promise can't be resolved itself");(t=R(e))?m(function(){var r={_w:n,_d:!1};try{t.call(e,c(B,r,1),c(L,r,1))}catch(e){L.call(r,e)}}):(n._v=e,n._s=1,M(n,!1))}catch(e){L.call({_w:n,_d:!1},e)}}};P||(A=function(e){h(this,A,"Promise","_h"),p(e),r.call(this);try{e(c(B,this,1),c(L,this,1))}catch(e){L.call(this,e)}},(r=function(e){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(242)(A.prototype,{then:function(e,t){var n=T(y(this,A));return n.ok="function"!=typeof e||e,n.fail="function"==typeof t&&t,n.domain=C?O.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&M(this,!1),n.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new r;this.promise=e,this.resolve=c(B,e,1),this.reject=c(L,e,1)},b.f=T=function(e){return e===A||e===a?new o(e):i(e)}),f(f.G+f.W+f.F*!P,{Promise:A}),n(124)(A,"Promise"),n(360)("Promise"),a=n(6).Promise,f(f.S+f.F*!P,"Promise",{reject:function(e){var t=T(this);return(0,t.reject)(e),t.promise}}),f(f.S+f.F*(s||!P),"Promise",{resolve:function(e){return x(s&&this===a?A:this,e)}}),f(f.S+f.F*!(P&&n(349)(function(e){A.all(e).catch(j)})),"Promise",{all:function(e){var t=this,n=T(t),r=n.resolve,i=n.reject,o=w(function(){var n=[],o=0,a=1;v(e,!1,function(e){var s=o++,u=!1;n.push(void 0),a++,t.resolve(e).then(function(e){u||(u=!0,n[s]=e,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(e){var t=this,n=T(t),r=n.reject,i=w(function(){v(e,!1,function(e){t.resolve(e).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(e,t){e.exports=function(e,t,n){var r=void 0===n;switch(t.length){case 0:return r?e():e.call(n);case 1:return r?e(t[0]):e.call(n,t[0]);case 2:return r?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return r?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return r?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3])}return e.apply(n,t)}},function(e,t,n){var r=n(21),i=n(357).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,u="process"==n(123)(a);e.exports=function(){var e,t,n,c=function(){var r,i;for(u&&(r=a.domain)&&r.exit();e;){i=e.fn,e=e.next;try{i()}catch(r){throw e?n():t=void 0,r}}t=void 0,r&&r.enter()};if(u)n=function(){a.nextTick(c)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(c)}}else n=function(){i.call(r,c)};else{var f=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=f=!f}}return function(r){var i={fn:r,next:void 0};t&&(t.next=i),e||(e=i,n()),t=i}}},function(e,t,n){var r=n(21).navigator;e.exports=r&&r.userAgent||""},function(e,t,n){"use strict";var r=n(13),i=n(6),o=n(21),a=n(356),s=n(359);r(r.P+r.R,"Promise",{finally:function(e){var t=a(this,i.Promise||o.Promise),n="function"==typeof e;return this.then(n?function(n){return s(t,e()).then(function(){return n})}:e,n?function(n){return s(t,e()).then(function(){throw n})}:e)}})},function(e,t,n){"use strict";var r=n(13),i=n(241),o=n(358);r(r.S,"Promise",{try:function(e){var t=i.f(this),n=o(e);return(n.e?t.reject:t.resolve)(n.v),t.promise}})},function(e,t,n){e.exports={default:n(706),__esModule:!0}},function(e,t,n){n(168),n(79),n(101),n(707),n(711),n(713),n(714),e.exports=n(6).Map},function(e,t,n){"use strict";var r=n(361),i=n(243);e.exports=n(362)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){var r=n(49),i=n(230),o=n(82),a=n(163),s=n(709);e.exports=function(e,t){var n=1==e,u=2==e,c=3==e,l=4==e,f=6==e,d=5==e||f,p=t||s;return function(t,s,h){for(var v,y,g=o(t),m=i(g),b=r(s,h,3),w=a(m.length),_=0,x=n?p(t,w):u?p(t,0):void 0;w>_;_++)if((d||_ in m)&&(y=b(v=m[_],_,g),e))if(n)x[_]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return _;case 2:x.push(v)}else if(l)return!1;return f?-1:c||l?l:x}}},function(e,t,n){var r=n(710);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(38),i=n(352),o=n(22)("species");e.exports=function(e){var t;return i(e)&&("function"!=typeof(t=e.constructor)||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(13);r(r.P+r.R,"Map",{toJSON:n(363)("Map")})},function(e,t,n){var r=n(126);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(364)("Map")},function(e,t,n){n(365)("Map")},function(e,t,n){n(716),e.exports=n(6).Object.values},function(e,t,n){var r=n(13),i=n(355)(!1);r(r.S,"Object",{values:function(e){return i(e)}})},function(e,t,n){var r=n(6),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},function(e,t,n){var r=n(330);e.exports=function(e,t,n){return null==e?e:r(e,t,n)}},function(e,t,n){var r=n(115),i=n(56),o=n(160),a=n(119),s=i(function(e){return o(r(e,1,a,!0))});e.exports=s},function(e,t,n){var r=n(156),i=n(188),o=n(216),a=n(43),s=n(87),u=n(157),c=200;e.exports=function(e,t,n,l){var f=-1,d=i,p=!0,h=e.length,v=[],y=t.length;if(!h)return v;n&&(t=a(t,s(n))),l?(d=o,p=!1):t.length>=c&&(d=u,p=!1,t=new r(t));e:for(;++f<h;){var g=e[f],m=null==n?g:n(g);if(g=l||0!==g?g:0,p&&m==m){for(var b=y;b--;)if(t[b]===m)continue e;v.push(g)}else d(t,m,l)||v.push(g)}return v}},function(e,t,n){var r=n(43),i=n(371),o=n(56),a=n(372),s=o(function(e){var t=r(e,a);return t.length&&t[0]===e[0]?i(t):[]});e.exports=s},function(e,t,n){!function(){"use strict";function n(e){return"function"==typeof e}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date?e.getTime():r(e)?e.map(i):e&&"function"==typeof e.toJSON?e.toJSON():e}function o(e,t){return n(e.get)?e.get(t):e[t]}function a(e){return function(t,n){if(!r(n)||!n.length)return e(t,n);for(var i=0,a=n.length;i<a;i++)if(e(t,o(n,i)))return!0;return!1}}function s(e,t,n,r){return e.v(e.a,t,n,r)}var u,c={$eq:a(function(e,t){return e(t)}),$ne:(u=function(e,t){return!e(t)},function(e,t){if(!r(t)||!t.length)return u(e,t);for(var n=0,i=t.length;n<i;n++)if(!u(e,o(t,n)))return!1;return!0}),$gt:a(function(e,t){return g.compare(i(t),e)>0}),$gte:a(function(e,t){return g.compare(i(t),e)>=0}),$lt:a(function(e,t){return g.compare(i(t),e)<0}),$lte:a(function(e,t){return g.compare(i(t),e)<=0}),$mod:a(function(e,t){return t%e[0]==e[1]}),$in:function(e,t){if(!(t instanceof Array)){var n=i(t);if(n===t&&"object"==typeof t)for(a=e.length;a--;)if(String(e[a])===String(t)&&"[object Object]"!==String(t))return!0;if(void 0===n)for(a=e.length;a--;)if(null==e[a])return!0;for(a=e.length;a--;){var r=s(y(o(e,a),void 0),t,a,e);if(r&&"[object Object]"!==String(r)&&"[object Object]"!==String(t))return!0}return!!~e.indexOf(n)}for(var a=t.length;a--;)if(~e.indexOf(i(o(t,a))))return!0;return!1},$nin:function(e,t,n,r){return!c.$in(e,t,n,r)},$not:function(e,t,n,r){return!s(e,t,n,r)},$type:function(e,t){return null!=t&&(t instanceof e||t.constructor==e)},$all:function(e,t,n,r){return c.$and(e,t,n,r)},$size:function(e,t){return!!t&&e===t.length},$or:function(e,t,n,r){for(var i=0,a=e.length;i<a;i++)if(s(o(e,i),t,n,r))return!0;return!1},$nor:function(e,t,n,r){return!c.$or(e,t,n,r)},$and:function(e,t,n,r){for(var i=0,a=e.length;i<a;i++)if(!s(o(e,i),t,n,r))return!1;return!0},$regex:a(function(e,t){return"string"==typeof t&&e.test(t)}),$where:function(e,t,n,r){return e.call(t,t,n,r)},$elemMatch:function(e,t,n,i){return r(t)?!!~f(t,e):s(e,t,n,i)},$exists:function(e,t,n,r){return r.hasOwnProperty(n)===e}},l={$eq:function(e){return e instanceof RegExp?function(t){return"string"==typeof t&&e.test(t)}:e instanceof Function?e:r(e)&&!e.length?function(e){return r(e)&&!e.length}:null===e?function(e){return null==e}:function(t){return 0===g.compare(i(t),e)}},$ne:function(e){return l.$eq(e)},$and:function(e){return e.map(v)},$all:function(e){return l.$and(e)},$or:function(e){return e.map(v)},$nor:function(e){return e.map(v)},$not:function(e){return v(e)},$regex:function(e,t){return new RegExp(e,t.$options)},$where:function(e){return"string"==typeof e?new Function("obj","return "+e):e},$elemMatch:function(e){return v(e)},$exists:function(e){return!!e}};function f(e,t){for(var n=0;n<e.length;n++){o(e,n);if(s(t,o(e,n)))return n}return-1}function d(e,t){return{a:e,v:t}}function p(e,t){var n=[];if(function e(t,n,i,a,s){if(i===n.length||null==t)return void s.push([t,n[i-1],a]);var u=o(n,i);if(r(t)&&isNaN(Number(u)))for(var c=0,l=t.length;c<l;c++)e(o(t,c),n,i,t,s);else e(o(t,u),n,i+1,t,s)}(t,e.k,0,t,n),1===n.length){var i=n[0];return s(e.nv,i[0],i[1],i[2])}for(var a=e&&e.q&&void 0!==e.q.$ne,u=a,c=0;c<n.length;c++){var l=n[c],f=s(e.nv,l[0],l[1],l[2]);a?u&=f:u|=f}return u}function h(e,t,n){return{a:{k:e,nv:t,q:n},v:p}}function v(e){var t;(e=i(e))&&((t=e)&&t.constructor===Object)||(e={$eq:e});var n=[];for(var r in e){var o=e[r];if("$options"!==r)if(c[r])l[r]&&(o=l[r](o,e)),n.push(d(i(o),c[r]));else{if(36===r.charCodeAt(0))throw new Error("Unknown operation "+r);n.push(h(r.split("."),v(o),o))}}return 1===n.length?n[0]:d(n,c.$and)}function y(e,t){var n=v(e);return t&&(n={a:n,v:function(e,n,r,i){return s(e,t(n),r,i)}}),n}function g(e,t,r){n(t)&&(r=t,t=void 0);var i=y(e,r);function o(e,t,n){return s(i,e,t,n)}return t?t.filter(o):o}g.use=function(e){if(n(e))return e(g);for(var t in e)36===t.charCodeAt(0)&&(c[t]=e[t])},g.indexOf=function(e,t,n){return f(t,y(e,n))},g.compare=function(e,t){if(e===t)return 0;if(typeof e==typeof t){if(e>t)return 1;if(e<t)return-1}},void 0!==e.exports&&(Object.defineProperty(t,"__esModule",{value:!0}),e.exports=g,t.default=e.exports.default=g),"undefined"!=typeof window&&(window.sift=g)}()},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function r(e){return function(t){var n=t.dispatch,r=t.getState;return function(t){return function(i){return"function"==typeof i?i(n,r,e):t(i)}}}}n.r(t);var i=r();i.withExtraArgument=r,t.default=i},function(e,t,n){e.exports={default:n(726),__esModule:!0}},function(e,t,n){n(727);var r=n(6).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(62),i=n(238).f;n(166)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(7)),i=l(n(1)),o=l(n(2)),a=l(n(8)),s=l(n(173)),u=l(n(9)),c=l(n(172));function l(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(){return(0,i.default)(this,t),(0,a.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,o.default)(t,[{key:"data",get:function(){var e=this;return(0,s.default)(t.prototype.__proto__||(0,r.default)(t.prototype),"data",this).filter(function(t){return t.slug===e.target.slug})}}],[{key:"query",value:function(e,t){return t.all("io.cozy.triggers").where({worker:"konnector"})}}]),t}(c.default);t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(378);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o(r).default}});var i=n(757);function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"OAuthClient",{enumerable:!0,get:function(){return o(i).default}})},function(e,t,n){e.exports={default:n(731),__esModule:!0}},function(e,t,n){n(168),n(79),n(101),n(732),n(733),n(734),n(735),e.exports=n(6).Set},function(e,t,n){"use strict";var r=n(361),i=n(243);e.exports=n(362)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(i(this,"Set"),e=0===e?0:e,e)}},r)},function(e,t,n){var r=n(13);r(r.P+r.R,"Set",{toJSON:n(363)("Set")})},function(e,t,n){n(364)("Set")},function(e,t,n){n(365)("Set")},function(e,t,n){e.exports={default:n(737),__esModule:!0}},function(e,t,n){n(738);var r=n(6).Object;e.exports=function(e,t){return r.defineProperties(e,t)}},function(e,t,n){var r=n(13);r(r.S+r.F*!n(28),"Object",{defineProperties:n(343)})},function(e,t,n){e.exports={default:n(740),__esModule:!0}},function(e,t,n){n(741),e.exports=n(6).Object.freeze},function(e,t,n){var r=n(38),i=n(167).onFreeze;n(166)("freeze",function(e){return function(t){return e&&r(t)?e(i(t)):t}})},function(e,t,n){var r=n(175),i=n(135),o=n(206),a=n(20),s=n(155),u=n(12),c=n(117),l=n(114),f=n(31),d=n(148);e.exports=function(e,t,n){var p=u(e),h=p||c(e)||d(e);if(t=a(t,4),null==n){var v=e&&e.constructor;n=h?p?new v:[]:f(e)&&l(v)?i(s(e)):{}}return(h?r:o)(e,function(e,r,i){return t(n,e,r,i)}),n}},function(e,t,n){var r=n(744),i=n(214),o=n(176),a=n(88);e.exports=function(e,t,n){return e=a(e),n=null==n?0:r(o(n),0,e.length),t=i(t),e.slice(n,n+t.length)==t}},function(e,t){e.exports=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(1)),i=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(){function e(t){(0,r.default)(this,e),this.token=t||""}return(0,i.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.token}},{key:"toBasicAuth",value:function(){return"user:"+this.token+"@"}},{key:"getAccessToken",value:function(){return this.token}}]),e}();t.default=a},function(e,t,n){"use strict";var r=n(747);e.exports=new r(n(748))},function(e,t,n){"use strict";function r(){this._types=Object.create(null),this._extensions=Object.create(null);for(var e=0;e<arguments.length;e++)this.define(arguments[e]);this.define=this.define.bind(this),this.getType=this.getType.bind(this),this.getExtension=this.getExtension.bind(this)}r.prototype.define=function(e,t){for(var n in e){var r=e[n].map(function(e){return e.toLowerCase()});n=n.toLowerCase();for(var i=0;i<r.length;i++){if("*"!=(o=r[i])[0]){if(!t&&o in this._types)throw new Error('Attempt to change mapping for "'+o+'" extension from "'+this._types[o]+'" to "'+n+'". Pass `force=true` to allow this, otherwise remove "'+o+'" from the list of extensions for "'+n+'".');this._types[o]=n}}if(t||!this._extensions[n]){var o=r[0];this._extensions[n]="*"!=o[0]?o:o.substr(1)}}},r.prototype.getType=function(e){var t=(e=String(e)).replace(/^.*[\/\\]/,"").toLowerCase(),n=t.replace(/^.*\./,"").toLowerCase(),r=t.length<e.length;return(n.length<t.length-1||!r)&&this._types[n]||null},r.prototype.getExtension=function(e){return(e=/^\s*([^;\s]*)/.test(e)&&RegExp.$1)&&this._extensions[e.toLowerCase()]||null},e.exports=r},function(e,t){e.exports={"application/andrew-inset":["ez"],"application/applixware":["aw"],"application/atom+xml":["atom"],"application/atomcat+xml":["atomcat"],"application/atomsvc+xml":["atomsvc"],"application/bdoc":["bdoc"],"application/ccxml+xml":["ccxml"],"application/cdmi-capability":["cdmia"],"application/cdmi-container":["cdmic"],"application/cdmi-domain":["cdmid"],"application/cdmi-object":["cdmio"],"application/cdmi-queue":["cdmiq"],"application/cu-seeme":["cu"],"application/dash+xml":["mpd"],"application/davmount+xml":["davmount"],"application/docbook+xml":["dbk"],"application/dssc+der":["dssc"],"application/dssc+xml":["xdssc"],"application/ecmascript":["ecma","es"],"application/emma+xml":["emma"],"application/epub+zip":["epub"],"application/exi":["exi"],"application/font-tdpfr":["pfr"],"application/geo+json":["geojson"],"application/gml+xml":["gml"],"application/gpx+xml":["gpx"],"application/gxf":["gxf"],"application/gzip":["gz"],"application/hjson":["hjson"],"application/hyperstudio":["stk"],"application/inkml+xml":["ink","inkml"],"application/ipfix":["ipfix"],"application/java-archive":["jar","war","ear"],"application/java-serialized-object":["ser"],"application/java-vm":["class"],"application/javascript":["js","mjs"],"application/json":["json","map"],"application/json5":["json5"],"application/jsonml+json":["jsonml"],"application/ld+json":["jsonld"],"application/lost+xml":["lostxml"],"application/mac-binhex40":["hqx"],"application/mac-compactpro":["cpt"],"application/mads+xml":["mads"],"application/manifest+json":["webmanifest"],"application/marc":["mrc"],"application/marcxml+xml":["mrcx"],"application/mathematica":["ma","nb","mb"],"application/mathml+xml":["mathml"],"application/mbox":["mbox"],"application/mediaservercontrol+xml":["mscml"],"application/metalink+xml":["metalink"],"application/metalink4+xml":["meta4"],"application/mets+xml":["mets"],"application/mods+xml":["mods"],"application/mp21":["m21","mp21"],"application/mp4":["mp4s","m4p"],"application/msword":["doc","dot"],"application/mxf":["mxf"],"application/n-quads":["nq"],"application/n-triples":["nt"],"application/octet-stream":["bin","dms","lrf","mar","so","dist","distz","pkg","bpk","dump","elc","deploy","exe","dll","deb","dmg","iso","img","msi","msp","msm","buffer"],"application/oda":["oda"],"application/oebps-package+xml":["opf"],"application/ogg":["ogx"],"application/omdoc+xml":["omdoc"],"application/onenote":["onetoc","onetoc2","onetmp","onepkg"],"application/oxps":["oxps"],"application/patch-ops-error+xml":["xer"],"application/pdf":["pdf"],"application/pgp-encrypted":["pgp"],"application/pgp-signature":["asc","sig"],"application/pics-rules":["prf"],"application/pkcs10":["p10"],"application/pkcs7-mime":["p7m","p7c"],"application/pkcs7-signature":["p7s"],"application/pkcs8":["p8"],"application/pkix-attr-cert":["ac"],"application/pkix-cert":["cer"],"application/pkix-crl":["crl"],"application/pkix-pkipath":["pkipath"],"application/pkixcmp":["pki"],"application/pls+xml":["pls"],"application/postscript":["ai","eps","ps"],"application/pskc+xml":["pskcxml"],"application/raml+yaml":["raml"],"application/rdf+xml":["rdf","owl"],"application/reginfo+xml":["rif"],"application/relax-ng-compact-syntax":["rnc"],"application/resource-lists+xml":["rl"],"application/resource-lists-diff+xml":["rld"],"application/rls-services+xml":["rs"],"application/rpki-ghostbusters":["gbr"],"application/rpki-manifest":["mft"],"application/rpki-roa":["roa"],"application/rsd+xml":["rsd"],"application/rss+xml":["rss"],"application/rtf":["rtf"],"application/sbml+xml":["sbml"],"application/scvp-cv-request":["scq"],"application/scvp-cv-response":["scs"],"application/scvp-vp-request":["spq"],"application/scvp-vp-response":["spp"],"application/sdp":["sdp"],"application/set-payment-initiation":["setpay"],"application/set-registration-initiation":["setreg"],"application/shf+xml":["shf"],"application/sieve":["siv","sieve"],"application/smil+xml":["smi","smil"],"application/sparql-query":["rq"],"application/sparql-results+xml":["srx"],"application/srgs":["gram"],"application/srgs+xml":["grxml"],"application/sru+xml":["sru"],"application/ssdl+xml":["ssdl"],"application/ssml+xml":["ssml"],"application/tei+xml":["tei","teicorpus"],"application/thraud+xml":["tfi"],"application/timestamped-data":["tsd"],"application/voicexml+xml":["vxml"],"application/wasm":["wasm"],"application/widget":["wgt"],"application/winhlp":["hlp"],"application/wsdl+xml":["wsdl"],"application/wspolicy+xml":["wspolicy"],"application/xaml+xml":["xaml"],"application/xcap-diff+xml":["xdf"],"application/xenc+xml":["xenc"],"application/xhtml+xml":["xhtml","xht"],"application/xml":["xml","xsl","xsd","rng"],"application/xml-dtd":["dtd"],"application/xop+xml":["xop"],"application/xproc+xml":["xpl"],"application/xslt+xml":["xslt"],"application/xspf+xml":["xspf"],"application/xv+xml":["mxml","xhvml","xvml","xvm"],"application/yang":["yang"],"application/yin+xml":["yin"],"application/zip":["zip"],"audio/3gpp":["*3gpp"],"audio/adpcm":["adp"],"audio/basic":["au","snd"],"audio/midi":["mid","midi","kar","rmi"],"audio/mp3":["*mp3"],"audio/mp4":["m4a","mp4a"],"audio/mpeg":["mpga","mp2","mp2a","mp3","m2a","m3a"],"audio/ogg":["oga","ogg","spx"],"audio/s3m":["s3m"],"audio/silk":["sil"],"audio/wav":["wav"],"audio/wave":["*wav"],"audio/webm":["weba"],"audio/xm":["xm"],"font/collection":["ttc"],"font/otf":["otf"],"font/ttf":["ttf"],"font/woff":["woff"],"font/woff2":["woff2"],"image/aces":["exr"],"image/apng":["apng"],"image/bmp":["bmp"],"image/cgm":["cgm"],"image/dicom-rle":["drle"],"image/emf":["emf"],"image/fits":["fits"],"image/g3fax":["g3"],"image/gif":["gif"],"image/heic":["heic"],"image/heic-sequence":["heics"],"image/heif":["heif"],"image/heif-sequence":["heifs"],"image/ief":["ief"],"image/jls":["jls"],"image/jp2":["jp2","jpg2"],"image/jpeg":["jpeg","jpg","jpe"],"image/jpm":["jpm"],"image/jpx":["jpx","jpf"],"image/jxr":["jxr"],"image/ktx":["ktx"],"image/png":["png"],"image/sgi":["sgi"],"image/svg+xml":["svg","svgz"],"image/t38":["t38"],"image/tiff":["tif","tiff"],"image/tiff-fx":["tfx"],"image/webp":["webp"],"image/wmf":["wmf"],"message/disposition-notification":["disposition-notification"],"message/global":["u8msg"],"message/global-delivery-status":["u8dsn"],"message/global-disposition-notification":["u8mdn"],"message/global-headers":["u8hdr"],"message/rfc822":["eml","mime"],"model/3mf":["3mf"],"model/gltf+json":["gltf"],"model/gltf-binary":["glb"],"model/iges":["igs","iges"],"model/mesh":["msh","mesh","silo"],"model/stl":["stl"],"model/vrml":["wrl","vrml"],"model/x3d+binary":["*x3db","x3dbz"],"model/x3d+fastinfoset":["x3db"],"model/x3d+vrml":["*x3dv","x3dvz"],"model/x3d+xml":["x3d","x3dz"],"model/x3d-vrml":["x3dv"],"text/cache-manifest":["appcache","manifest"],"text/calendar":["ics","ifb"],"text/coffeescript":["coffee","litcoffee"],"text/css":["css"],"text/csv":["csv"],"text/html":["html","htm","shtml"],"text/jade":["jade"],"text/jsx":["jsx"],"text/less":["less"],"text/markdown":["markdown","md"],"text/mathml":["mml"],"text/mdx":["mdx"],"text/n3":["n3"],"text/plain":["txt","text","conf","def","list","log","in","ini"],"text/richtext":["rtx"],"text/rtf":["*rtf"],"text/sgml":["sgml","sgm"],"text/shex":["shex"],"text/slim":["slim","slm"],"text/stylus":["stylus","styl"],"text/tab-separated-values":["tsv"],"text/troff":["t","tr","roff","man","me","ms"],"text/turtle":["ttl"],"text/uri-list":["uri","uris","urls"],"text/vcard":["vcard"],"text/vtt":["vtt"],"text/xml":["*xml"],"text/yaml":["yaml","yml"],"video/3gpp":["3gp","3gpp"],"video/3gpp2":["3g2"],"video/h261":["h261"],"video/h263":["h263"],"video/h264":["h264"],"video/jpeg":["jpgv"],"video/jpm":["*jpm","jpgm"],"video/mj2":["mj2","mjp2"],"video/mp2t":["ts"],"video/mp4":["mp4","mp4v","mpg4"],"video/mpeg":["mpeg","mpg","mpe","m1v","m2v"],"video/ogg":["ogv"],"video/quicktime":["qt","mov"],"video/webm":["webm"]}},function(e,t,n){var r=n(750),i=n(328);e.exports=function(e,t){return null!=e&&i(e,t,r)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&n.call(e,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KONNECTORS_DOCTYPE=void 0;var r=y(n(171)),i=y(n(15)),o=y(n(16)),a=y(n(7)),s=y(n(1)),u=y(n(2)),c=y(n(8)),l=y(n(9)),f=y(n(379)),d=n(382),p=y(d),h=n(65),v=y(n(159));function y(e){return e&&e.__esModule?e:{default:e}}var g=t.KONNECTORS_DOCTYPE="io.cozy.konnectors",m=function(e){function t(e){(0,s.default)(this,t);var n=(0,c.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e));return n.doctype=g,n.endpoint="/konnectors/",n}var n,f,y,m,b;return(0,l.default)(t,e),(0,u.default)(t,[{key:"create",value:(b=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("create() method is not available for konnectors");case 1:case"end":return e.stop()}},e,this)})),function(){return b.apply(this,arguments)})},{key:"destroy",value:(m=(0,o.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("destroy() method is not available for konnectors");case 1:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"findTriggersBySlug",value:(y=(0,o.default)(i.default.mark(function e(t){var n,r,o;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.default(this.stackClient),e.next=3,n.all({limit:null});case 3:return r=e.sent,o=r.data,e.abrupt("return",o.map(function(e){return e.attributes}).filter(function(e){return(0,d.isForKonnector)(e,t)}));case 6:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"launch",value:(f=(0,o.default)(i.default.mark(function e(t){var n,o,a,s,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.default(this.stackClient),e.next=3,this.findTriggersBySlug(t);case 3:if(o=e.sent,1!==(a=u.accountId?o.filter(function(e){return(0,d.isForAccount)(e,u.accountId)}):o).length){e.next=9;break}return e.abrupt("return",n.launch(o[0]));case 9:if(s=(0,r.default)((0,v.default)({slug:t,accountId:u.accountId})),0!==a.length){e.next=14;break}throw new Error("No trigger found for "+s);case 14:if(!(a.length>1)){e.next=16;break}throw new Error("More than 1 trigger found for "+s);case 16:case"end":return e.stop()}},e,this)})),function(e){return f.apply(this,arguments)})},{key:"update",value:(n=(0,o.default)(i.default.mark(function e(t){var n,r,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Cannot call update with no slug");case 2:return n=s.source||null,r=s.sync||!1,o=r?{headers:{Accept:"text/event-stream"}}:{},e.next=7,this.stackClient.fetchJSON("PUT","/konnectors/"+t+(n?"?Source="+n:""),o);case 7:return a=e.sent,e.abrupt("return",(0,h.normalizeDoc)(a));case 9:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})}]),t}(f.default);t.default=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=w(n(15)),i=w(n(4)),o=w(n(103)),a=w(n(16)),s=w(n(7)),u=w(n(1)),c=w(n(2)),l=w(n(8)),f=w(n(9)),d=(0,o.default)(["/sharings/doctype/",""],["/sharings/doctype/",""]),p=(0,o.default)(["/sharings/","/recipients"],["/sharings/","/recipients"]),h=(0,o.default)(["/sharings/","/recipients/",""],["/sharings/","/recipients/",""]),v=(0,o.default)(["/sharings/","/recipients/self"],["/sharings/","/recipients/self"]),y=n(65),g=w(y),m=n(246),b=n(104);function w(e){return e&&e.__esModule?e:{default:e}}var _=function(e){return(0,y.normalizeDoc)(e,"io.cozy.sharings")},x=function(e){function t(){return(0,u.default)(this,t),(0,l.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}var n,o,y;return(0,f.default)(t,e),(0,c.default)(t,[{key:"findByDoctype",value:(y=(0,a.default)(r.default.mark(function e(t){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,b.uri)(d,t));case 2:return n=e.sent,e.abrupt("return",(0,i.default)({},n,{data:n.data.map(_)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return y.apply(this,arguments)})},{key:"share",value:(o=(0,a.default)(r.default.mark(function e(t,n,i,o){var a,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/sharings/",{data:{type:"io.cozy.sharings",attributes:{description:o,preview_path:s,open_sharing:"two-way"===i,rules:k(t,i)},relationships:{recipients:{data:n.map(function(e){return{id:e._id,type:e._type}})}}}});case 2:return a=e.sent,e.abrupt("return",{data:_(a.data)});case 4:case"end":return e.stop()}},e,this)})),function(e,t,n,r){return o.apply(this,arguments)})},{key:"getDiscoveryLink",value:function(e,t){return this.stackClient.fullpath("/sharings/"+e+"/discovery?sharecode="+t)}},{key:"addRecipients",value:(n=(0,a.default)(r.default.mark(function e(t,n,i){var o,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={data:n.map(function(e){return{id:e._id,type:e._type}})},e.next=3,this.stackClient.fetchJSON("POST",(0,b.uri)(p,t._id),{data:{type:"io.cozy.sharings",id:t._id,relationships:"two-way"===i?{recipients:o}:{read_only_recipients:o}}});case 3:return a=e.sent,e.abrupt("return",{data:_(a.data)});case 5:case"end":return e.stop()}},e,this)})),function(e,t,r){return n.apply(this,arguments)})},{key:"revokeRecipient",value:function(e,t){return this.stackClient.fetchJSON("DELETE",(0,b.uri)(h,e._id,t))}},{key:"revokeSelf",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,b.uri)(v,e._id))}}]),t}(g.default);x.normalizeDoctype=g.default.normalizeDoctypeJsonApi;var k=function(e,t){var n=e._id,r=e._type;return(0,m.isFile)(e)?[(0,i.default)({title:e.name,doctype:"io.cozy.files",values:[n]},O(e,t))]:[(0,i.default)({title:"collection",doctype:r,values:[n]},O(e,t)),(0,i.default)({title:"items",doctype:"io.cozy.files",values:[r+"/"+n],selector:"referenced_by"},"two-way"===t?{add:"sync",update:"sync",remove:"sync"}:{add:"push",update:"none",remove:"push"})]},O=function(e,t){return(0,m.isFile)(e)&&(0,m.isDirectory)(e)?"two-way"===t?{add:"sync",update:"sync",remove:"sync"}:{add:"push",update:"push",remove:"push"}:"two-way"===t?{update:"sync",remove:"revoke"}:{update:"push",remove:"revoke"}};t.default=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=_(n(64)),i=_(n(4)),o=_(n(84)),a=_(n(15)),s=_(n(103)),u=_(n(16)),c=_(n(7)),l=_(n(1)),f=_(n(2)),d=_(n(8)),p=_(n(9)),h=(0,s.default)(["/permissions/",""],["/permissions/",""]),v=(0,s.default)(["/permissions"],["/permissions"]),y=(0,s.default)(["/permissions/doctype/","/shared-by-link"],["/permissions/doctype/","/shared-by-link"]),g=n(65),m=_(g),b=n(246),w=n(104);function _(e){return e&&e.__esModule?e:{default:e}}var x=function(e){return(0,g.normalizeDoc)(e,"io.cozy.permissions")},k=function(e){function t(){return(0,l.default)(this,t),(0,d.default)(this,(t.__proto__||(0,c.default)(t)).apply(this,arguments))}var n,s,g,m,b,_,k,E;return(0,p.default)(t,e),(0,f.default)(t,[{key:"get",value:(E=(0,u.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,w.uri)(h,t));case 2:return n=e.sent,e.abrupt("return",{data:x(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return E.apply(this,arguments)})},{key:"create",value:(k=(0,u.default)(a.default.mark(function e(t){t._id,t._type;var n,r=(0,o.default)(t,["_id","_type"]);return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST",(0,w.uri)(v),{data:{type:"io.cozy.permissions",attributes:r}});case 2:return n=e.sent,e.abrupt("return",{data:x(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return k.apply(this,arguments)})},{key:"add",value:(_=(0,u.default)(a.default.mark(function e(t,n){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=void 0,e.t0=t._type,e.next="io.cozy.apps"===e.t0?4:"io.cozy.konnectors"===e.t0?6:"io.cozy.permissions"===e.t0?8:10;break;case 4:return r="/permissions/apps/"+t.slug,e.abrupt("break",11);case 6:return r="/permissions/konnectors/"+t.slug,e.abrupt("break",11);case 8:return r="/permissions/"+t._id,e.abrupt("break",11);case 10:throw new Error("Permissions can only be added on existing permissions, apps and konnectors.");case 11:return e.next=13,this.stackClient.fetchJSON("PATCH",r,{data:{type:"io.cozy.permissions",attributes:{permissions:n}}});case 13:return i=e.sent,e.abrupt("return",i.data);case 15:case"end":return e.stop()}},e,this)})),function(e,t){return _.apply(this,arguments)})},{key:"destroy",value:function(e){return this.stackClient.fetchJSON("DELETE",(0,w.uri)(h,e.id))}},{key:"findLinksByDoctype",value:(b=(0,u.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET",(0,w.uri)(y,t));case 2:return n=e.sent,e.abrupt("return",(0,i.default)({},n,{data:n.data.map(x)}));case 4:case"end":return e.stop()}},e,this)})),function(e){return b.apply(this,arguments)})},{key:"findApps",value:(m=(0,u.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/apps/");case 2:return t=e.sent,e.abrupt("return",(0,i.default)({},t,{data:t.data.map(function(e){return(0,i.default)({_id:e.id},e)})}));case 4:case"end":return e.stop()}},e,this)})),function(){return m.apply(this,arguments)})},{key:"createSharingLink",value:(g=(0,u.default)(a.default.mark(function e(t){var n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("POST","/permissions?codes=email",{data:{type:"io.cozy.permissions",attributes:{permissions:O(t,!0)}}});case 2:return n=e.sent,e.abrupt("return",{data:x(n.data)});case 4:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"revokeSharingLink",value:(s=(0,u.default)(a.default.mark(function e(t){var n,i,o,s,u,c,l,f;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findLinksByDoctype(t._type);case 2:n=e.sent,i=n.data.filter(function(e){return S(e,t)}),o=!0,s=!1,u=void 0,e.prev=7,c=(0,r.default)(i);case 9:if(o=(l=c.next()).done){e.next=16;break}return f=l.value,e.next=13,this.destroy(f);case 13:o=!0,e.next=9;break;case 16:e.next=22;break;case 18:e.prev=18,e.t0=e.catch(7),s=!0,u=e.t0;case 22:e.prev=22,e.prev=23,!o&&c.return&&c.return();case 25:if(e.prev=25,!s){e.next=28;break}throw u;case 28:return e.finish(25);case 29:return e.finish(22);case 30:case"end":return e.stop()}},e,this,[[7,18,22,30],[23,,25,29]])})),function(e){return s.apply(this,arguments)})},{key:"getOwnPermissions",value:(n=(0,u.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.stackClient.fetchJSON("GET","/permissions/self");case 2:return t=e.sent,e.abrupt("return",{data:x(t.data)});case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})}]),t}(m.default),O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e._id,r=e._type,i=t?["GET"]:["ALL"];return(0,b.isFile)(e)?{files:{type:"io.cozy.files",verbs:i,values:[n]}}:{collection:{type:r,verbs:i,values:[n]},files:{type:"io.cozy.files",verbs:i,values:[r+"/"+n],selector:"referenced_by"}}};k.normalizeDoctype=m.default.normalizeDoctypeJsonApi;var S=function(e,t){var n=t._id;return(0,b.isFile)(t)?-1!==e.attributes.permissions.files.values.indexOf(n):-1!==e.attributes.permissions.collection.values.indexOf(n)};t.default=k},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getIconURL=void 0;var r=s(n(15)),i=s(n(64)),o=s(n(16)),a=s(n(755));function s(e){return e&&e.__esModule?e:{default:e}}var u,c,l={gif:"image/gif",ico:"image/vnd.microsoft.icon",jpeg:"image/jpeg",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},f=function(e){if(!e.icon)throw new Error(e.name+": Cannot detect icon mime type since app has no icon");var t=e.icon.split(".").pop();if(!t)throw new Error(e.name+": Unable to detect icon mime type from extension ("+e.icon+")");return t},d=(u=(0,o.default)(r.default.mark(function e(t,n){var o,a,s,u,c,l,f,d;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=void 0,a=!0,s=!1,u=void 0,e.prev=4,c=(0,i.default)(t);case 6:if(a=(l=c.next()).done){e.next=22;break}return f=l.value,e.prev=8,e.next=11,f();case 11:return d=e.sent,n&&n(d),e.abrupt("return",d);case 16:e.prev=16,e.t0=e.catch(8),o=e.t0;case 19:a=!0,e.next=6;break;case 22:e.next=28;break;case 24:e.prev=24,e.t1=e.catch(4),s=!0,u=e.t1;case 28:e.prev=28,e.prev=29,!a&&c.return&&c.return();case 31:if(e.prev=31,!s){e.next=34;break}throw u;case 34:return e.finish(31);case 35:return e.finish(28);case 36:throw o;case 37:case"end":return e.stop()}},e,void 0,[[4,24,28,36],[8,16],[29,,31,35]])})),function(e,t){return u.apply(this,arguments)}),p=function(e,t,n){return e.fetchJSON("GET","/"+t+"s/"+n).then(function(e){return e.data.attributes})},h=function(e,t,n){return e.fetchJSON("GET","/registry/"+n).then(function(e){return e.latest_version.manifest})},v=(c=(0,o.default)(r.default.mark(function e(t,n){var i,o,a,s,u,c,v,y,g,m,b;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.type,o=n.slug,a=n.appData,s=n.priority,c=[function(){return t.fetch("GET","/"+i+"s/"+o+"/icon")},function(){return t.fetch("GET","/registry/"+o+"/icon")}],"registry"===(u=void 0===s?"stack":s)&&c.reverse(),e.next=5,d(c,function(e){if(!e.ok)throw new Error("Error while fetching icon "+e.statusText)});case 5:return v=e.sent,e.next=8,v.blob();case 8:if(y=e.sent,g=void 0,y.type){e.next=26;break}if(m=[function(){return p(t,i,o)},function(){return h(t,0,o)}],"registry"===u&&m.reverse(),e.t1=a,e.t1){e.next=18;break}return e.next=17,d(m);case 17:e.t1=e.sent;case 18:if(e.t0=e.t1,e.t0){e.next=21;break}e.t0={};case 21:if(g=e.t0,b=f(g),l[b]){e.next=25;break}throw new Error('Unknown image extension "'+b+'" for app '+g.name);case 25:y=new Blob([y],{type:l[b]});case 26:return e.abrupt("return",URL.createObjectURL(y));case 27:case"end":return e.stop()}},e,void 0)})),function(e,t){return c.apply(this,arguments)}),y=function(){return v.apply(this,arguments).catch(function(e){return console.warn(e),""})};t.default=(0,a.default)(y,{maxDuration:3e5,key:function(e,t){var n=t.type,r=t.slug,i=t.priority;return e.uri+NaN+n+":"+r+":"+i}}),t.getIconURL=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(63)),i=o(n(64));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e,t){var n=Date.now(),o=!0,a=!1,s=void 0;try{for(var u,c=(0,i.default)((0,r.default)(e));!(o=(u=c.next()).done);o=!0){var l=u.value;n-e[l].date>t&&delete e[l]}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}};t.default=function(e,t){var n={};return function(){var r=t.key.apply(null,arguments);a(n,t.maxDuration);var i=n[r];if(i)return i.result;var o=e.apply(this,arguments);return n[r]={result:o,date:Date.now()},o}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={EXPIRED_TOKEN:/Expired token/,CLIENT_NOT_FOUND:/Client not found/}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=g(n(15)),i=g(n(16)),o=g(n(63)),a=g(n(4)),s=g(n(7)),u=g(n(84)),c=g(n(1)),l=g(n(2)),f=g(n(8)),d=g(n(173)),p=g(n(9)),h=g(n(378)),v=g(n(758)),y=g(n(383));function g(e){return e&&e.__esModule?e:{default:e}}var m={clientID:"",clientName:"",clientKind:"",clientSecret:"",clientURI:"",registrationAccessToken:"",redirectURI:"",softwareID:"",softwareVersion:"",logoURI:"",policyURI:"",notificationPlatform:"",notificationDeviceToken:""},b=function(e){function t(e){var n=e.oauth,r=e.scope,i=void 0===r?[]:r,o=e.onTokenRefresh,l=(0,u.default)(e,["oauth","scope","onTokenRefresh"]);(0,c.default)(this,t);var d=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,l));return d.setOAuthOptions((0,a.default)({},m,n)),n.token&&d.setToken(n.token),d.scope=i,d.onTokenRefresh=o,d}var n,h,g,b,_,x;return(0,p.default)(t,e),(0,l.default)(t,[{key:"isRegistered",value:function(){return""!==this.oauthOptions.clientID}},{key:"snakeCaseOAuthData",value:function(e){var t={softwareID:"software_id",softwareVersion:"software_version",clientID:"client_id",clientName:"client_name",clientKind:"client_kind",clientURI:"client_uri",logoURI:"logo_uri",policyURI:"policy_uri",notificationPlatform:"notification_platform",notificationDeviceToken:"notification_device_token",redirectURI:"redirect_uris"},n={};return(0,o.default)(e).forEach(function(r){var i=t[r]||r,o=e[r];n[i]=o}),n.redirect_uris&&n.redirect_uris instanceof Array==!1&&(n.redirect_uris=[n.redirect_uris]),n}},{key:"camelCaseOAuthData",value:function(e){var t={client_id:"clientID",client_name:"clientName",client_secret:"clientSecret",registration_access_token:"registrationAccessToken",software_id:"softwareID",redirect_uris:"redirectURI"},n={};return(0,o.default)(e).forEach(function(r){var i=t[r]||r,o=e[r];n[i]=o}),n}},{key:"register",value:(x=(0,i.default)(r.default.mark(function e(){var t,n,i,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isRegistered()){e.next=2;break}throw new Error("Client already registered");case 2:if(t=["redirectURI"],n=(0,o.default)(this.oauthOptions),!((i=t.filter(function(e){return n[e]})).length>0)){e.next=7;break}throw new Error("Can't register client : missing "+i+" fields");case 7:return e.next=9,this.fetchJSON("POST","/auth/register",this.snakeCaseOAuthData({redirectURI:this.oauthOptions.redirectURI,clientName:this.oauthOptions.clientName,softwareID:this.oauthOptions.softwareID,clientKind:this.oauthOptions.clientKind,clientURI:this.oauthOptions.clientURI,logoURI:this.oauthOptions.logoURI,policyURI:this.oauthOptions.policyURI,softwareVersion:this.oauthOptions.softwareVersion,notificationPlatform:this.oauthOptions.notificationPlatform,notificationDeviceToken:this.oauthOptions.notificationDeviceToken}));case 9:return s=e.sent,this.setOAuthOptions((0,a.default)({},this.oauthOptions,{client_id:s.client_id,client_name:s.client_name,client_secret:s.client_secret,registration_access_token:s.registration_access_token,software_id:s.software_id})),e.abrupt("return",this.oauthOptions);case 12:case"end":return e.stop()}},e,this)})),function(){return x.apply(this,arguments)})},{key:"unregister",value:(_=(0,i.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new w;case 2:return t=this.oauthOptions.clientID,this.oauthOptions.clientID="",e.abrupt("return",this.fetchJSON("DELETE","/auth/register/"+t,null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 5:case"end":return e.stop()}},e,this)})),function(){return _.apply(this,arguments)})},{key:"fetchInformation",value:(b=(0,i.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new w;case 2:return e.abrupt("return",this.fetchJSON("GET","/auth/register/"+this.oauthOptions.clientID,null,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}}));case 3:case"end":return e.stop()}},e,this)})),function(){return b.apply(this,arguments)})},{key:"updateInformation",value:(g=(0,i.default)(r.default.mark(function e(t){var n,i,o,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new w;case 2:return n={clientID:this.oauthOptions.clientID,clientName:this.oauthOptions.clientName,redirectURI:this.oauthOptions.redirectURI,softwareID:this.oauthOptions.softwareID},i=this.snakeCaseOAuthData((0,a.default)({},n,t)),s&&(i.client_secret=this.oauthOptions.clientSecret),e.next=7,this.fetchJSON("PUT","/auth/register/"+this.oauthOptions.clientID,i,{headers:{Authorization:this.registrationAccessTokenToAuthHeader()}});case 7:return o=e.sent,this.setOAuthOptions((0,a.default)({},i,o)),e.abrupt("return",this.oauthOptions);case 10:case"end":return e.stop()}},e,this)})),function(e){return g.apply(this,arguments)})},{key:"generateStateCode",value:function(){var e=void 0;if("undefined"!=typeof window&&void 0!==window.crypto&&"function"==typeof window.crypto.getRandomValues)e=new Uint8Array(16),window.crypto.getRandomValues(e);else{e=new Array(16);for(var t=0;t<e.length;t++)e[t]=Math.floor(255*Math.random())}return btoa(String.fromCharCode.apply(null,e)).replace(/=+$/,"").replace(/\//g,"_").replace(/\+/g,"-")}},{key:"getAuthCodeURL",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scope;if(!this.isRegistered())throw new w;var n={client_id:this.oauthOptions.clientID,redirect_uri:this.oauthOptions.redirectURI,state:e,response_type:"code",scope:t.join(" ")};return this.uri+"/auth/authorize?"+this.dataToQueryString(n)}},{key:"dataToQueryString",value:function(e){return(0,o.default)(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")}},{key:"getAccessCodeFromURL",value:function(e,t){if(!t)throw new Error("Missing state code");var n=new URL(e).searchParams,r=n.get("state"),i=n.get("access_code");if(t!==r)throw new Error("Given state does not match url query state");return i}},{key:"fetchAccessToken",value:(h=(0,i.default)(r.default.mark(function e(t,n,i){var o,a;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()||n){e.next=2;break}throw new w;case 2:return n=n||this.oauthOptions,o={grant_type:"authorization_code",code:t,client_id:n.clientID,client_secret:n.clientSecret},e.next=6,this.fetchJSON("POST",(i||"")+"/auth/access_token",this.dataToQueryString(o),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 6:return a=e.sent,e.abrupt("return",new v.default(a));case 8:case"end":return e.stop()}},e,this)})),function(e,t,n){return h.apply(this,arguments)})},{key:"refreshToken",value:(n=(0,i.default)(r.default.mark(function e(){var n,i,o;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isRegistered()){e.next=2;break}throw new w;case 2:if(this.token){e.next=4;break}throw new Error("No token to refresh");case 4:return n={grant_type:"refresh_token",refresh_token:this.token.refreshToken,client_id:this.oauthOptions.clientID,client_secret:this.oauthOptions.clientSecret},e.next=7,(0,d.default)(t.prototype.__proto__||(0,s.default)(t.prototype),"fetchJSON",this).call(this,"POST","/auth/access_token",this.dataToQueryString(n),{headers:{"Content-Type":"application/x-www-form-urlencoded"}});case 7:return i=e.sent,o=new v.default((0,a.default)({refresh_token:this.token.refreshToken},i)),this.onTokenRefresh&&"function"==typeof this.onTokenRefresh&&this.onTokenRefresh(o),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},{key:"exchangeOAuthSecret",value:function(e,t){return this.fetchJSON("POST",e+"/auth/secret_exchange",{secret:t})}},{key:"setToken",value:function(e){this.token=e?e instanceof v.default?e:new v.default(e):null}},{key:"setCredentials",value:function(e){return(0,y.default)("setCredentials is deprecated, please replace by setToken"),this.setToken(e)}},{key:"setOAuthOptions",value:function(e){this.oauthOptions=this.camelCaseOAuthData(e)}},{key:"resetClientId",value:function(){this.oauthOptions.clientID=""}},{key:"resetClient",value:function(){this.resetClientId(),this.setUri(null),this.setToken(null)}},{key:"registrationAccessTokenToAuthHeader",value:function(){if(!this.oauthOptions.registrationAccessToken)throw new Error("No registration access token");return"Bearer "+this.oauthOptions.registrationAccessToken}}]),t}(h.default),w=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Client not registered or missing OAuth information";(0,c.default)(this,t);var n=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return n.message=e,n.name="NotRegisteredException",n}return(0,p.default)(t,e),t}(Error);t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(171)),i=a(n(1)),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){(0,i.default)(this,e),"string"==typeof t&&(t=JSON.parse(t)),this.tokenType=t.token_type||t.tokenType,this.accessToken=t.access_token||t.accessToken,this.refreshToken=t.refresh_token||t.refreshToken,this.scope=t.scope}return(0,o.default)(e,[{key:"toAuthHeader",value:function(){return"Bearer "+this.accessToken}},{key:"toBasicAuth",value:function(){return"user:"+this.accessToken+"@"}},{key:"toJSON",value:function(){return{tokenType:this.tokenType,accessToken:this.accessToken,refreshToken:this.refreshToken,scope:this.scope}}},{key:"toString",value:function(){return(0,r.default)(this.toJSON())}},{key:"getAccessToken",value:function(){return this.accessToken}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.authenticateWithCordova=void 0;var r=u(n(15)),i=u(n(16)),o=u(n(68)),a=n(366),s=n(446);function u(e){return e&&e.__esModule?e:{default:e}}var c,l=function(e){return new o.default(function(t,n){window.SafariViewController.show({url:e,transition:"curl"},function(e){"closed"===e.event&&n(new Error(a.REGISTRATION_ABORT))},function(e){console.log("KO: "+e),n(new Error(a.REGISTRATION_ABORT))});var r=window.handleOpenURL;window.handleOpenURL=function(e){window.SafariViewController.hide(),t(e),r&&(window.handleOpenURL=r)}})},f=function(e){return new o.default(function(t,n){var r=window.cordova.InAppBrowser.open(e,"_blank","clearcache=yes,zoom=no"),i=function(){r.removeEventListener("loadstart",o),r.removeEventListener("exit",s)},o=function(e){var n=e.url,o=/\?access_code=(.+)$/.test(n),a=/\?state=(.+)$/.test(n);(o||a)&&(t(n),i(),r.close())},s=function(){n(new Error(a.REGISTRATION_ABORT)),i(),r.close()};r.addEventListener("loadstart",o),r.addEventListener("exit",s)})};t.authenticateWithCordova=(c=(0,i.default)(r.default.mark(function e(t){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=(0,s.isIOSApp)(),!e.t0){e.next=5;break}return e.next=4,(0,s.hasSafariPlugin)();case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=9;break}return e.abrupt("return",l(t));case 9:if(!(0,s.hasInAppBrowserPlugin)()){e.next=13;break}return e.abrupt("return",f(t));case 13:return console.log(t),e.abrupt("return",new o.default(function(e){setTimeout(function(){var t=prompt("Paste the url here:");e(t)},5e3)}));case 15:case"end":return e.stop()}},e,void 0)})),function(e){return c.apply(this,arguments)})},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.getDeviceName=void 0;var i=r(n(761)),o=n(248),a=n(249),s=n(247);t.getDeviceName=function(){if(!(0,a.hasDevicePlugin)())return(0,o.isCordova)()&&console.warn("You should install `cordova-plugin-device`."),"Device";var e=window.device,t=e.manufacturer,n=e.model,r=(0,s.isIOSApp)()?function(e){for(var t=["iPhone","iPad","Watch","AppleTV"],n=0;n<t.length;n++){var r=t[n];if(e.match(new RegExp(r)))return r}return"Device"}(n):n;return"".concat((0,i.default)(t)," ").concat(r)}},function(e,t,n){var r=n(88),i=n(762);e.exports=function(e){return i(r(e).toLowerCase())}},function(e,t,n){var r=n(763)("toUpperCase");e.exports=r},function(e,t,n){var r=n(384),i=n(220),o=n(385),a=n(88);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),u=n?r(n,1).join(""):t.slice(1);return s[e]()+u}}},function(e,t){e.exports=function(e){return e.split("")}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),l="(?:"+[o+r+"?",r,a,s,n].join("|")+")",f=RegExp(i+"(?="+i+")|"+l+c,"g");e.exports=function(e){return e.match(f)||[]}},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.startApp=t.checkApp=void 0;var i=r(n(0)),o=r(n(3)),a=n(247),s=function(){return window.startApp},u=function(e){var t=e.appId,n=e.uri;return(0,a.isAndroidApp)()?{package:t}:n},c={},l=c.startApp=function(){var e=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,e.next=3,c.checkApp(t);case 3:if(!e.sent){e.next=9;break}return r=u(t),e.abrupt("return",new Promise(function(e,t){s()?n.set(r).start(e,t):t(new Error("Cordova plugin 'com.lampa.startapp' is not installed. This plugin is needed to start a native app. Required by cozy-bar"))}));case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.startApp=l;var f=c.checkApp=function(){var e=(0,o.default)(i.default.mark(function e(t){var n,r;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.startApp,r=u(t),e.abrupt("return",new Promise(function(e,t){s()?n.set(r).check(function(t){e("OK"===t||t)},function(n){!1===n||0===n.indexOf("NameNotFoundException")?e(!1):t(n)}):t(new Error("Cordova plugin 'com.lampa.startapp' is not installed."))}));case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.checkApp=f;var d=c;t.default=d},function(e,t,n){"use strict";var r=n(50);Object.defineProperty(t,"__esModule",{value:!0}),t.nativeLinkOpen=void 0;var i=r(n(0)),o=r(n(3)),a=n(249),s=function(){var e=(0,o.default)(i.default.mark(function e(t){var n;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,e.next=3,(0,a.hasSafariPlugin)();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}e.t0=window.SafariViewController;case 6:if(!e.t0){e.next=10;break}window.SafariViewController.show({url:n,transition:"curl"},function(e){"closed"===e.event&&window.SafariViewController.hide()},function(){window.SafariViewController.hide()}),e.next=11;break;case 10:(0,a.hasInAppBrowserPlugin)()?("_blank","clearcache=yes,zoom=no",window.cordova.InAppBrowser.open(n,"_blank","clearcache=yes,zoom=no")):window.location=n;case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();t.nativeLinkOpen=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openDeeplinkOrRedirect=void 0;var r=function(e,t){var n=Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5);window.addEventListener("blur",o);var r=function(e,t,n){var r=document.createElement("iframe");return r.src=t,r.id="hiddenIframe_".concat(n),r.style.display="none",e.appendChild(r),r}(document.body,"about:blank",n),i=setTimeout(function(){t(),window.removeEventListener("blur",o),r.parentElement.removeChild(r)},500);function o(){clearTimeout(i),window.removeEventListener("blur",o),r.parentElement.removeChild(r)}r.contentWindow.location.href=e};t.openDeeplinkOrRedirect=function(e,t){if(navigator.msLaunchUri)!function(e,t){navigator.msLaunchUri(e,void 0,t)}(e,t);else{var n=(i=!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,o=navigator.userAgent.toLowerCase(),a=o.includes("safari")&&!o.includes("chrome")||Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0,s=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,u=s&&(o.includes("os 12_2")||o.includes("os 12_3")),{isOpera:i,isFirefox:"undefined"!=typeof InstallTrigger,isSafari:a,isChrome:!!window.chrome&&!i,isIOS122:u,isIOS:s});n.isChrome||n.isIOS&&!n.isIOS122?function(e,t){for(var n=setTimeout(function(){t(),r.removeEventListener("blur",i)},500),r=window;r!=r.parent;)r=r.parent;function i(){clearTimeout(n),r.removeEventListener("blur",i)}r.addEventListener("blur",i),window.location=e}(e,t):n.isSafari&&!n.isIOS122||n.isFirefox?r(e,t):t()}var i,o,a,s,u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(127)),i=f(n(130)),o=f(n(41)),a=f(n(107)),s=f(n(374)),u=f(n(174)),c=f(n(770)),l=n(85);function f(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=(0,o.default)(e,function(e){return(t=e).id||t.ids?"idQueries":"others";var t}),n=t.idQueries,r=void 0===n?[]:n,i=t.others,f=void 0===i?[]:i,d=r.length>0?new l.QueryDefinition({doctype:e[0].doctype,ids:(0,u.default)((0,a.default)(r.map(function(e){return e.id||e.ids})))}):[];return(0,c.default)(f,s.default).concat(d)};t.default=function(e){var t=(0,o.default)(e,function(e){return e.doctype});return(0,a.default)((0,r.default)((0,i.default)(t,d)))}},function(e,t,n){var r=n(160);e.exports=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?r(e,void 0,t):[]}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=y(n(15)),i=y(n(63)),o=y(n(16)),a=y(n(127)),s=y(n(1)),u=y(n(2)),c=y(n(4)),l=y(n(71)),f=y(n(130)),d=y(n(251)),p=y(n(269)),h=y(n(772)),v=n(178);function y(e){return e&&e.__esModule?e:{default:e}}var g=function(e){var t=(0,f.default)(e.relationships||{},function(e,t){return(0,c.default)({},e,{name:t,type:(0,v.resolveClass)(e.doctype,e.type)})});return(0,c.default)({},e,{relationships:(0,p.default)(t)>0?(0,l.default)(t,"name"):null})},m=function(e,t){if(!e)throw new Error(t)},b=function(e,t){var n=(0,h.default)(e,t,function(e){return e.name});m(0===n.length,"Duplicated names in schemas being added: "+n.map(function(e){return e.name}).join(", "));var r=(0,h.default)(e,t,function(e){return e.doctype});m(0===r.length,"Duplicated doctypes in schemas being added: "+r.map(function(e){return e.name}).join(", "))},w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,s.default)(this,e),this.byDoctype={},this.add(t),this.client=n}var t,n;return(0,u.default)(e,[{key:"add",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,f.default)(e,function(e,t){return(0,c.default)({name:t},g(e))});b((0,a.default)(t),(0,a.default)(this.byDoctype)),(0,d.default)(this.byDoctype,(0,l.default)(t,function(e){return e.doctype}))}},{key:"getDoctypeSchema",value:function(e){var t=this.byDoctype[e];return t||(t=g({name:e,doctype:e}),this.byDoctype[e]=t),t}},{key:"getRelationship",value:function(e,t){return this.getDoctypeSchema(e).relationships[t]}},{key:"validate",value:(n=(0,o.default)(r.default.mark(function e(t){var n,o,a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},o=this.byDoctype[t._type]){e.next=4;break}return e.abrupt("return",!0);case 4:if(o.attributes){e.next=6;break}return e.abrupt("return",!0);case 6:e.t0=r.default.keys(o.attributes);case 7:if((e.t1=e.t0()).done){e.next=15;break}return a=e.t1.value,e.next=11,this.validateAttribute(t,a,o.attributes[a]);case 11:!0!==(s=e.sent)&&(n[a]=s),e.next=7;break;case 15:if(0!==(0,i.default)(n).length){e.next=17;break}return e.abrupt("return",!0);case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"validateAttribute",value:(t=(0,o.default)(r.default.mark(function e(t,n,i){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i.unique||!this.client){e.next=6;break}return e.next=3,this.client.collection(t._type).checkUniquenessOf(n,t[n]);case 3:if(!0===e.sent){e.next=6;break}return e.abrupt("return","must be unique");case 6:return e.abrupt("return",!0);case 7:case"end":return e.stop()}},e,this)})),function(e,n,r){return t.apply(this,arguments)})}]),e}();t.default=w},function(e,t,n){var r=n(43),i=n(371),o=n(20),a=n(56),s=n(372),u=n(276),c=a(function(e){var t=u(e),n=r(e,s);return t===u(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?i(n,o(t,2)):[]});e.exports=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(100)),i=c(n(63)),o=c(n(4)),a=c(n(1)),s=c(n(2)),u=n(131);function c(e){return e&&e.__esModule?e:{default:e}}var l=Object.prototype.hasOwnProperty,f=function(){function e(t,n,o){var s=this;if((0,a.default)(this,e),this.handleStoreChange=function(){var e=s.currentRawResult();(function(e,t){if(d(e,t))return!0;if("object"!==(void 0===e?"undefined":(0,r.default)(e))||null===e||"object"!==(void 0===t?"undefined":(0,r.default)(t))||null===t)return!1;var n=(0,i.default)(e),o=(0,i.default)(t);if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(!l.call(t,n[a])||!d(e[n[a]],t[n[a]]))return!1;return!0})(e,s.lastResult)||(s.lastResult=e,s.notifyObservers())},!t||!n||!o)throw new Error("ObservableQuery takes 3 arguments: queryId, definition and client");this.queryId=t,this.definition=n,this.client=o,this.observers={},this.idCounter=1,this.lastResult=this.currentRawResult()}return(0,s.default)(e,[{key:"currentResult",value:function(){var e=this.client.getQueryFromState(this.queryId,{hydrated:!0});return e.lastFetch?(0,o.default)({},e,{data:this.definition.id?e.data[0]:e.data}):e}},{key:"fetch",value:function(){return this.client.query(this.definition,{as:this.queryId})}},{key:"fetchMore",value:function(){return this.client.query(this.definition.offset(this.currentRawResult().data.length),{as:this.queryId})}},{key:"currentRawResult",value:function(){return(0,u.getRawQueryFromState)(this.getStore().getState(),this.queryId)}},{key:"notifyObservers",value:function(){var e=this;(0,i.default)(this.observers).forEach(function(t){return e.observers[t]()})}},{key:"subscribeToStore",value:function(){if(this._unsubscribeStore)throw new Error("ObservableQuery instance is already subscribed to store.");this._unsubscribeStore=this.getStore().subscribe(this.handleStoreChange)}},{key:"unsubscribeFromStore",value:function(){if(!this._unsubscribeStore)throw new Error("ObservableQuery instance is not subscribed to store");this._unsubscribeStore()}},{key:"subscribe",value:function(e){var t=this,n=this.idCounter;return this.idCounter++,this.observers[n]=e,1===(0,i.default)(this.observers).length&&this.subscribeToStore(),function(){return t.unsubscribe(n)}}},{key:"unsubscribe",value:function(e){if(!this.observers[e])throw new Error("Cannot unsubscribe unknown callbackId "+e);delete this.observers[e],0===(0,i.default)(this.observers).length&&(this.unsubscribeFromStore(),this._unsubscribeStore=null)}},{key:"getStore",value:function(){return this.client.store}}]),e}();function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}t.default=f},function(e,t,n){var r=n(56)(n(775));e.exports=r},function(e,t,n){var r=n(212),i=n(43),o=n(215),a=n(306),s=n(119),u=Math.max;e.exports=function(e){if(!e||!e.length)return[];var t=0;return e=r(e,function(e){if(s(e))return t=u(e.length,t),!0}),a(t,function(t){return i(e,o(t))})}},function(e,t,n){const r=n(11),i=n(107),o=n(386),a=n(39);class s extends a{static getPersonalData(e,t){const n={firstname:{path:"name.givenName"},lastname:{path:"name.familyName"},address:{getter:o.getPrimaryAddress},email:{getter:o.getPrimaryEmail},phone:{getter:o.getPrimaryPhone}};let i={};return t.forEach(t=>{const o=r(n,t,t);let a;if(o.getter)a=o.getter(e);else{const n=r(o,"path",t);a=r(e,n)}void 0!==a&&(i[t]=a)}),i}static async getFilesByRules(e){const{rules:t,count:n}=e,r={trashed:!1,type:"file",...t};return await this.cozyClient.collection("io.cozy.files").createIndex(["metadata.datetime","metadata.classification"]),await this.cozyClient.collection("io.cozy.files").find(r,{indexedFields:["metadata.datetime","metadata.classification"],sort:[{"metadata.datetime":"desc"},{"metadata.classification":"desc"}],limit:n||1})}static create(e,t){const{documentsData:n,personalData:r,procedureData:o}=e,a=Object.keys(n).map(e=>n[e].files.map(t=>{if(t)return{_id:t.id,_type:"io.cozy.files",templateDocumentId:e}}));return{personalData:r,procedureData:o,submissionDate:new Date,templateId:t.type,templateVersion:t.version,relationships:{files:{data:i(a)}}}}static createJson(e){return JSON.stringify(e)}}s.doctype="io.cozy.procedures.administratives",e.exports=s},function(e,t,n){"use strict";var r=n(778);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){const r=n(39),i=n(250);class o extends r{static async getByYearAndAccount(e,t){const n=await r.getIndex(this.doctype,this.idAttributes),i={selector:{year:e,"relationships.account.data._id":t},limit:1},[o]=await r.query(n,i);return o||this.getEmptyDocument(e,t)}static getEmptyDocument(e,t){return{year:e,balances:{},metadata:{version:this.version},relationships:{account:{data:{_id:t,_type:i.doctype}}}}}}o.doctype="io.cozy.bank.balancehistories",o.idAttributes=["year","relationships.account.data._id"],o.version=1,o.checkedAttributes=["balances"],e.exports=o},function(e,t,n){const r=n(66),{eitherIncludes:i}=n(389),{getSlugFromInstitutionLabel:o}=n(390),a=(e,t,n)=>{const r=n.filter(n=>n[e]===t[e]);return 1===r.length?{match:r[0],method:e+"-exact"}:r.length>1?{matches:r,method:e+"-exact"}:null},s=/^(?:[A-Za-z]+)?-?([0-9]+)-?(?:[A-Za-z]+)?$/,u=/xxxx xxxx xxxx (\d{4})/,c=(e,t)=>{let n;return t=t&&t.replace(/\s/g,""),e=e&&!e.match(u)?e.replace(/\s/g,""):e,t&&27==t.length?t.substr(14,11):e?23==e.length?e.substr(10,11):16==e.length?e.substr(5,11):e.length>11&&(n=e.match(s))?n[1]:e:e},l=(e,t)=>{const n=[],r={account:t,methods:n};let a=0;if(((e,t)=>{const n=o(e.institutionLabel),r=o(t.institutionLabel);return!n||!r||n===r})(e,t)||(a-=1e3),((e,t)=>t.number&&e.number&&(11===t.number.length||11===e.number.length)&&i(t.number,e.number))(e,t)?(a+=50,n.push("approx-number")):a-=50,e.type===t.type&&(a+=50,n.push("same-type")),"CreditCard"!==e.type&&"CreditCard"!==t.type||!((e,t)=>{let n,r;for(let i of[e,t]){const e=i.number&&i.number.match(u);e&&(n=i,r=e[1])}if((n===e?t:e).number.slice(-4)===r)return!0})(e,t)||(a+=150,n.push("credit-card-number")),e.currency){(t.rawNumber&&t.rawNumber.includes(e.currency)||t.label&&t.label.includes(e.currency)||t.originalBankLabel&&t.originalBankLabel.includes(e.currency))&&(a+=50,n.push("currency"))}return r.points=a,r},f=e=>{const t=c(e.number,e.iban);return{...e,rawNumber:e.number,number:t}},d=["iban","number"],p=(e,t)=>e&&e===t,h=(e,t)=>{for(const n of d)if(e[n]){const r=a(n,e,t);if(r&&r.match)return r}const n=t.find(t=>p(e.originalNumber,t.number)||p(e.number,t.originalNumber));if(n)return{match:n,method:"originalNumber-exact"};const i=r(t.map(t=>l(e,t)),e=>-e.points).filter(e=>e.points>0);return i.length>0?{match:i[0].account,method:i[0].methods.join("-")}:void 0};e.exports={matchAccounts:(e,t)=>{e=e.map(f);const n=[...t].map(f),r=[];for(let t of e){const e=h(t,n);if(e){const i=n.indexOf(e.match);n.splice(i,1),r.push({account:t,...e})}else r.push({account:t})}return r},normalizeAccountNumber:c,score:l}},function(e,t){e.exports={"AXA Banque":"axabanque102","/Banque Populaire.*/":"banquepopulaire",BforBank:"bforbank97","BNP Paribas":"bnpparibas82",BNPP:"bnpparibas82","/Boursorama.*/":"boursorama83",casden:"casden173","/Hello bank!.*/":"hellobank145",Bred:"bred",CA:"caatlantica3","Carrefour Banque":"carrefour159","/Caisse d'pargne.*/":"caissedepargne1","Compte Nickel":"comptenickel168","/^CIC.*/":"cic63","Crdit Agricole":"caatlantica3","Crdit Coopratif":"creditcooperatif148","/Crdit du Nord.*/":"cdngroup88","/Crdit Maritime.*/":"creditmaritime","/Crdit Mutuel.*/":"cic45",Fortuneo:"fortuneo84","Hello bank!":"hellobank145","HSBC France":"hsbc119",HSBC:"hsbc119","/^ING.*/":"ingdirect95","/La Banque Postale.*/":"labanquepostale44","/LCL.*/":"lcl-linxo",Milleis:"barclays136",Monabanq:"monabanq96","Socit Gnrale":"societegenerale","Socit marseillaise de crdit":"cdngroup109"}},function(e,t,n){const r=n(89),i=n(40).namespace("BankingReconciliator");e.exports=class{constructor(e){this.options=e}async saveAccounts(e,t){const{BankAccount:n}=this.options,r=await n.fetchAll(),o=n.reconciliate(e,r);i("info","Saving accounts...");const a=await n.bulkSave(o);return t.onAccountsSaved&&t.onAccountsSaved(a),{savedAccounts:a,reconciliatedAccounts:o}}async save(e,t,n={}){const{BankAccount:o,BankTransaction:a}=this.options,{reconciliatedAccounts:s,savedAccounts:u}=await this.saveAccounts(e,n),c=r(u.map(e=>[e[o.vendorIdAttr],e._id]));i("info","Linking transactions to accounts..."),i("info",JSON.stringify(c)),t.forEach(e=>{if(e.account=c[e[a.vendorAccountIdAttr]],void 0===e.account)throw i("warn",`Transaction without account, vendorAccountIdAttr: ${a.vendorAccountIdAttr}`),i("warn","transaction: "+JSON.stringify(e)),new Error("Transaction without account.")});const l=new Set(s.filter(e=>e._id).map(e=>e._id)),f=(await a.fetchAll()).filter(e=>l.has(e.account)),d=a.reconciliate(t,f,n);i("info","Saving transactions...");let p=1;return{accounts:u,transactions:await a.bulkSave(d,30,e=>{i("debug",`[bulkSave] ${p++} Saving ${e.date} ${e.label}`)})}}}},function(e,t,n){const r=n(71),i=n(41),o=n(268),a=n(256),s=n(438),u=n(39),c=n(387),l=n(250),{matchTransactions:f}=n(784),d=(e,t)=>{const n=o(e,t);return n?t(n):null},p=e=>{return(e.realisationDate||e.date).slice(0,10)},h=e=>{const t=new Date,n=e.filter(e=>{const n=p(e);return!s(n,t)});return d(n,p)},v=e=>e instanceof Date?e.toISOString():e;class y extends u{static getDate(e){return e}isAfter(e){if(e){const t=v(this.date).slice(0,10);return"NaN"!==t?t>e:(c("warn","transaction date could not be parsed. transaction: "+JSON.stringify(this)),!1)}return!0}isBeforeOrSame(e){if(e){const t=v(this.date).slice(0,10);return"NaN"!==t?t<=e:(c("warn","transaction date could not be parsed. transaction: "+JSON.stringify(this)),!1)}return!0}getIdentifier(){return`${this.amount}-${this.originalBankLabel}-${this.date}`}static getMissedTransactions(e,t,n={}){const r=d(t,p),i=a(r,-7),o=e.filter(e=>s(p(e),i)),u=Array.from(f(o,t)).filter(e=>!e.match).map(e=>e.transaction),l=n.trackEvent;if("function"==typeof l)try{const e=u.length,n=t.length;l({e_a:"ReconciliateMissing",e_n:"MissedTransactionPct",e_v:parseFloat((e/n).toFixed(2),10)}),l({e_a:"ReconciliateMissing",e_n:"MissedTransactionAbs",e_v:e})}catch(e){c("warn",`Could not send MissedTransaction event: ${e.message}`)}return u}static reconciliate(e,t,n={}){const r=i(e,e=>(e=>t.find(t=>t.vendorId===e.vendorId))(e)?"updatedTransactions":"newTransactions");let o=r.newTransactions||[];const a=r.updatedTransactions||[],s=h(t);if(s){"function"==typeof n.trackEvent&&n.trackEvent({e_a:"ReconciliateSplitDate"});const e=e=>y.prototype.isAfter.call(e,s),r=e=>y.prototype.isBeforeOrSame.call(e,s),i=o.filter(e);i.length>0?c("info",`Found ${i.length} transactions after ${s}`):c("info",`No transaction after ${s}`);const a=o.filter(r);c("info",`Found ${a.length} transactions before ${s}`);const u=y.getMissedTransactions(a,t,n);u.length>0?c("info",`Found ${u.length} missed transactions before ${s}`):c("info",`No missed transactions before ${s}`),o=[...i,...u]}else c("info","Can't find a split date, saving all new transactions");return c("info",`Transaction reconciliation: new ${o.length}, updated ${a.length}, split date ${s} `),[].concat(o).concat(a)}static async getMostRecentForAccounts(e){try{c("debug","Transaction.getLast");const t=await u.getIndex(this.doctype,["date","account"]),n={selector:{date:{$gte:null},account:{$in:e}},sort:[{date:"desc"}]},r=await u.query(t,n);return c("info","last transactions length: "+r.length),r}catch(e){return c("error",e),[]}}static async deleteOrphans(){c("info","Deleting up orphan operations");const e=r(await l.fetchAll(),"_id"),t=await this.fetchAll(),n=t.filter(t=>!e[t.account]);if(c("info",`Total number of operations: ${t.length}`),c("info",`Total number of orphan operations: ${n.length}`),c("info",`Deleting ${n.length} orphan operations...`),n.length>0)return this.deleteAll(n)}getVendorAccountId(){return this[this.constructor.vendorAccountIdAttr]}static getCategoryId(e,t){const n={localModelOverride:!1,localModelUsageThreshold:this.LOCAL_MODEL_USAGE_THRESHOLD,globalModelUsageThreshold:this.GLOBAL_MODEL_USAGE_THRESHOLD,...t};return e.manualCategoryId?e.manualCategoryId:n.localModelOverride&&e.localCategoryId&&e.localCategoryProba&&e.localCategoryProba>n.localModelUsageThreshold?e.localCategoryId:e.cozyCategoryId&&e.cozyCategoryProba&&e.cozyCategoryProba>n.globalModelUsageThreshold?e.cozyCategoryId:e.localCategoryId||e.cozyCategoryId?e.automaticCategoryId:null}}y.doctype="io.cozy.bank.operations",y.version=1,y.vendorAccountIdAttr="vendorAccountId",y.vendorIdAttr="vendorId",y.idAttributes=["vendorId"],y.checkedAttributes=["label","originalBankLabel","automaticCategoryId","account"],y.LOCAL_MODEL_USAGE_THRESHOLD=.8,y.GLOBAL_MODEL_USAGE_THRESHOLD=.15,y.getSplitDate=h,e.exports=y},function(e,t,n){const r=n(41),i=n(66),{eitherIncludes:o}=n(389),a=e=>e.date.substr(0,10),s=(e,t)=>{const n=new RegExp(String.raw`${t}{2,}`,"gi");return e&&e.replace(n,t)},u=/\b[0-9X]+\b/gi,c=/\b\d{2}\/\d{2}\/\d{4}\b/g,l=e=>e&&e.replace(u,""),f=e=>e&&e.replace(c,""),d=e=>e&&e.replace(/\s/g,"").replace(/-/g,""),p=(e,t,n={})=>{const r=[],i={op:t,methods:r};if(n.maxDateDelta){if(((e,t)=>{const n=new Date(e.date.substr(0,10)),r=new Date(t.date.substr(0,10)),i=Math.abs(r-n);if(e.realisationDate){const t=new Date(e.realisationDate.substr(0,10)),n=Math.abs(r-t);return Math.min(i,n)}return i})(e,t)>n.maxDateDelta)return i.points=-1e3,i;r.push("approx-date")}const[a,u]=((e,t)=>s(t.originalBankLabel," ")===s(e.originalBankLabel," ")?[200,"originalBankLabel"]:d(t.originalBankLabel)===d(e.originalBankLabel)?[120,"originalBankLabelCompacted"]:f(t.originalBankLabel)===f(e.originalBankLabel)?[150,"originalBankLabelWithoutDate"]:t.label===e.label?[100,"label"]:o(t.label.toLowerCase(),e.label.toLowerCase())?[70,"eitherIncludes"]:o(l(t.label.toLowerCase()),l(e.label.toLowerCase()))?[50,"fuzzy-eitherIncludes"]:[-1e3,"label-penalty"])(e,t);r.push(u);const c=(0===Math.abs(t.amount-e.amount)?r.push("amount")&&100:-1e3)+a;return i.points=c,i},h=(e,t,n={})=>{const r=t.find(t=>t.vendorId&&e.vendorId&&t.vendorId===e.vendorId);if(r)return{match:r,method:"vendorId"};const o=t.map(t=>p(e,t,n)),a=i(o,e=>-e.points).filter(e=>e.points>0);return a.length>0?{match:a[0].op,method:a[0].methods.join("-")}:{candidates:a}},v=function*(e,t,n={}){const r=Array.isArray(t)?[...t]:[];for(let t of e){const e={transaction:t},i=r.length>0?h(t,r,n):null;if(i){Object.assign(e,i);const t=r.indexOf(i.match);t>-1&&r.splice(t,1)}yield e}};e.exports={matchTransactions:function*(e,t){const n=new Set(e),i=new Set(t);for(let[o,[s,u]]of function*(e,t){const n=e.map(e=>r(e,t));for(const e of Object.keys(n[0]).sort()){const t=n.map(t=>t[e]||[]);yield[e,t]}}([e,t],a))for(let e of v(s,u))e.match&&(i.delete(e.match),n.delete(e.transaction),yield e);const o=[3,4,5];for(let e of o)for(let t of v(Array.from(n),Array.from(i),{maxDateDelta:864e5*e}))t.method&&(t.method+=`-delta${e}`),t.match&&(i.delete(t.match),n.delete(t.transaction)),(t.match||e===o[o.length-1])&&(yield t)},scoreMatching:p}},function(e,t,n){const r=n(39),i=n(128);class o extends r{static checkCurrencies(e){const t=e[0].currency;for(const n of e)if(n.currency!==t)return!1;return!0}static sum(e){if(0===e.length)throw new Error("You must give at least one stats object");if(!this.checkCurrencies(e))throw new Error("Currency of all stats object must be the same.");const t=["income","additionalIncome","mortgage","loans","fixedCharges"].reduce((t,n)=>(t[n]=i(e,e=>e[n]||0),t),{});return t.currency=e[0].currency,t}}o.doctype="io.cozy.bank.accounts.stats",o.idAttributes=["_id"],o.version=1,o.checkedAttributes=null,e.exports=o},function(e,t,n){var r=n(214),i=n(384),o=n(787),a=n(385),s=n(88),u=/\s+$/;e.exports=function(e,t,n){if((e=s(e))&&(n||void 0===t))return e.replace(u,"");if(!e||!(t=r(t)))return e;var c=a(e),l=o(c,a(t))+1;return i(c,0,l).join("")}},function(e,t,n){var r=n(267);e.exports=function(e,t){for(var n=e.length;n--&&r(t,e[n],0)>-1;);return n}},function(e,t,n){const r=n(388),i=n(391);class o extends i{static async createFolderWithReference(e,t){const n=this.cozyClient.collection(i.doctype),r=await n.ensureDirectoryExists(e);await n.addReferencesTo(t,[{_id:r}]);const{data:o}=await n.get(r);return o}static async ensureMagicFolder(e,t){const n={_type:r.doctype,_id:e},i=await this.getReferencedFolders(n),o=i.length?i[0]:null;if(o)return o;const a=Object.values(this.magicFolders);if(!a.includes(e))throw new Error(`Cannot create Magic folder with id ${e}. Allowed values are ${a.join(", ")}.`);if(!t)throw new Error("Magic folder default path must be defined");return this.createFolderWithReference(t,n)}static async getReferencedFolders(e){const{included:t}=await this.cozyClient.collection(i.doctype).findReferencedBy(e);return t.filter(e=>!this.isTrashed(e))}static async ensureFolderWithReference(e,t){const n=await this.getReferencedFolders(t);if(n.length)return n[0];const r=this.cozyClient.collection(i.doctype),o=await r.ensureDirectoryExists(e);await r.addReferencesTo(t,[{_id:o}]);const{data:a}=await r.get(o);return a}static isTrashed(e){return/^\/\.cozy_trash/.test(e.attributes.path)}}o.magicFolders={ADMINISTRATIVE:`${r.doctype}/administrative`,PHOTOS:`${r.doctype}/photos`,PHOTOS_BACKUP:`${r.doctype}/photos/mobile`,PHOTOS_UPLOAD:`${r.doctype}/photos/upload`},e.exports=o},function(e,t,n){const r=n(141),i=n(39);class o extends i{}const a=r.shape({_id:r.string.isRequired,_type:r.string.isRequired,name:r.string.isRequired,trashed:r.bool});o.doctype="io.cozy.contacts.groups",o.propType=a,e.exports=o},function(e,t,n){const r=n(39);class i extends r{}i.schema={doctype:"io.cozy.permissions",attributes:{}},e.exports=i},function(e,t,n){"use strict";n.r(t);var r="object"==typeof global&&global&&global.Object===Object&&global,i="object"==typeof self&&self&&self.Object===Object&&self,o=(r||i||Function("return this")()).Symbol,a=Object.prototype,s=a.hasOwnProperty,u=a.toString,c=o?o.toStringTag:void 0;var l=function(e){var t=s.call(e,c),n=e[c];try{e[c]=void 0;var r=!0}catch(e){}var i=u.call(e);return r&&(t?e[c]=n:delete e[c]),i},f=Object.prototype.toString;var d=function(e){return f.call(e)},p="[object Null]",h="[object Undefined]",v=o?o.toStringTag:void 0;var y=function(e){return null==e?void 0===e?h:p:v&&v in Object(e)?l(e):d(e)};var g=function(e,t){return function(n){return e(t(n))}}(Object.getPrototypeOf,Object);var m=function(e){return null!=e&&"object"==typeof e},b="[object Object]",w=Function.prototype,_=Object.prototype,x=w.toString,k=_.hasOwnProperty,O=x.call(Object);var S=function(e){if(!m(e)||y(e)!=b)return!1;var t=g(e);if(null===t)return!0;var n=k.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&x.call(n)==O},E=n(254),A={INIT:"@@redux/INIT"};function C(e,t,n){var r;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(C)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){return o}function f(e){if("function"!=typeof e)throw new Error("Expected listener to be a function.");var t=!0;return c(),s.push(e),function(){if(t){t=!1,c();var n=s.indexOf(e);s.splice(n,1)}}}function d(e){if(!S(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return d({type:A.INIT}),(r={dispatch:d,subscribe:f,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,d({type:A.INIT})}})[E.a]=function(){var e,t=f;return(e={subscribe:function(e){if("object"!=typeof e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(l())}return n(),{unsubscribe:t(n)}}})[E.a]=function(){return this},e},r}function j(e,t){var n=t&&t.type;return"Given action "+(n&&'"'+n.toString()+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function T(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var o=Object.keys(n);var a=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:A.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+A.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){a=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(a)throw a;for(var r=!1,i={},s=0;s<o.length;s++){var u=o[s],c=n[u],l=e[u],f=c(l,t);if(void 0===f){var d=j(u,t);throw new Error(d)}i[u]=f,r=r||f!==l}return r?i:e}}function P(e,t){return function(){return t(e.apply(void 0,arguments))}}function R(e,t){if("function"==typeof e)return P(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},i=0;i<n.length;i++){var o=n[i],a=e[o];"function"==typeof a&&(r[o]=P(a,t))}return r}function M(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function D(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n,r,i){var o,a=e(n,r,i),s=a.dispatch,u={getState:a.getState,dispatch:function(e){return s(e)}};return o=t.map(function(e){return e(u)}),s=M.apply(void 0,o)(a.dispatch),I({},a,{dispatch:s})}}}n.d(t,"createStore",function(){return C}),n.d(t,"combineReducers",function(){return T}),n.d(t,"bindActionCreators",function(){return R}),n.d(t,"applyMiddleware",function(){return D}),n.d(t,"compose",function(){return M})},,,,function(e,t,n){var r=n(1376),i=n(1377)(r);e.exports=i},,,,function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(279),i=n(106),o=n.n(i),a=n(69),s=n(32);global.fetch=r.a;var u=function(e){if(!process.env[e])throw new Error("".concat(e," environment variable is not set"))},c=function(e){u("COZY_URL"),u("COZY_CREDENTIALS");var t=new o.a({uri:process.env.COZY_URL.trim(),schema:a.f,token:process.env.COZY_CREDENTIALS.trim()});return s.Document.registerClient(t),e({client:t}).catch(function(e){console.error(e),process.exit(1)})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(45);e.exports=function(e){var t=r(e);return t.setHours(0,0,0,0),t}},,,,,,,,,,,function(e,t,n){var r=n(45);e.exports=function(e,t){var n=r(e).getTime(),i=r(t).getTime();return n<i?-1:n>i?1:0}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(20),i=n(57),o=n(74);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var u=r(n,3);t=o(t),n=function(e){return u(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[u?t[c]:c]:void 0}}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelable=void 0;var r,i=n(68),o=(r=i)&&r.__esModule?r:{default:r};t.cancelable=function(e){var t=void 0,n=new o.default(function(n,r){t=r,e.then(n),e.catch(r)});return n.cancel=function(){t({canceled:!0})},n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(15)),i=c(n(16)),o=c(n(1)),a=c(n(2));n(946);var s=c(n(947)),u=n(948);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.type;return"/"+(t===u.APP_TYPE.KONNECTOR||"node"===t?"konnectors":"apps")},f=function(){function e(t){if((0,o.default)(this,e),!t.client)throw new Error("Need to pass a client to instantiate a Registry API.");this.client=t.client}var t,n,u;return(0,a.default)(e,[{key:"installApp",value:(u=(0,i.default)(r.default.mark(function e(t,n){var i,o,a,u,c,f,d;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.slug,o=t.terms,a={},(u=t.installed)&&(a.PermissionsAcked=u),n&&(a.Source=n),r=void 0,r=new URLSearchParams(a).toString(),c=r?"?"+r:"",!o){e.next=9;break}return e.next=9,s.default.save(this.client,o);case 9:return f=t.installed?"PUT":"POST",d=l(t),e.abrupt("return",this.client.stackClient.fetchJSON(f,d+"/"+i+c));case 12:case"end":return e.stop()}var r},e,this)})),function(e,t){return u.apply(this,arguments)})},{key:"uninstallApp",value:(n=(0,i.default)(r.default.mark(function e(t){var n,i;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.slug,i=l(t),e.abrupt("return",this.client.stackClient.fetchJSON("DELETE",i+"/"+n));case 3:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)})},{key:"fetchApps",value:(t=(0,i.default)(r.default.mark(function e(t){var n,i,o,a,s;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.channel,i=t.type,o=new URLSearchParams({limit:200,versionsChannel:n,latestChannelVersion:n}).toString(),i&&(o=o+"&filter[type]="+i),e.next=6,this.client.stackClient.fetchJSON("GET","/registry?"+o);case 6:return a=e.sent,s=a.data,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)})),function(e){return t.apply(this,arguments)})},{key:"fetchAppsInMaintenance",value:function(){return this.client.stackClient.fetchJSON("GET","/registry/maintenance")}},{key:"fetchApp",value:function(e){return this.client.stackClient.fetchJSON("GET","/registry/"+e)}}]),e}();t.default=f},function(e,t){!function(e){"use strict";var t,n=e.URLSearchParams&&e.URLSearchParams.prototype.get?e.URLSearchParams:null,r=n&&"a=1"===new n({a:1}).toString(),i=n&&"+"===new n("s=%2B").get("s"),o="__URLSearchParams__",a=!n||((t=new n).append("s"," &"),"s=+%26"===t.toString()),s=f.prototype,u=!(!e.Symbol||!e.Symbol.iterator);if(!(n&&r&&i&&a)){s.append=function(e,t){y(this[o],e,t)},s.delete=function(e){delete this[o][e]},s.get=function(e){var t=this[o];return e in t?t[e][0]:null},s.getAll=function(e){var t=this[o];return e in t?t[e].slice(0):[]},s.has=function(e){return e in this[o]},s.set=function(e,t){this[o][e]=[""+t]},s.toString=function(){var e,t,n,r,i=this[o],a=[];for(t in i)for(n=d(t),e=0,r=i[t];e<r.length;e++)a.push(n+"="+d(r[e]));return a.join("&")};var c=!!i&&n&&!r&&e.Proxy;Object.defineProperty(e,"URLSearchParams",{value:c?new Proxy(n,{construct:function(e,t){return new e(new f(t[0]).toString())}}):f});var l=e.URLSearchParams.prototype;l.polyfill=!0,l.forEach=l.forEach||function(e,t){var n=v(this.toString());Object.getOwnPropertyNames(n).forEach(function(r){n[r].forEach(function(n){e.call(t,n,r,this)},this)},this)},l.sort=l.sort||function(){var e,t,n,r=v(this.toString()),i=[];for(e in r)i.push(e);for(i.sort(),t=0;t<i.length;t++)this.delete(i[t]);for(t=0;t<i.length;t++){var o=i[t],a=r[o];for(n=0;n<a.length;n++)this.append(o,a[n])}},l.keys=l.keys||function(){var e=[];return this.forEach(function(t,n){e.push(n)}),h(e)},l.values=l.values||function(){var e=[];return this.forEach(function(t){e.push(t)}),h(e)},l.entries=l.entries||function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),h(e)},u&&(l[e.Symbol.iterator]=l[e.Symbol.iterator]||l.entries)}function f(e){((e=e||"")instanceof URLSearchParams||e instanceof f)&&(e=e.toString()),this[o]=v(e)}function d(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'\(\)~]|%20|%00/g,function(e){return t[e]})}function p(e){return e.replace(/[ +]/g,"%20").replace(/(%[a-f0-9]{2})+/gi,function(e){return decodeURIComponent(e)})}function h(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return u&&(n[e.Symbol.iterator]=function(){return n}),n}function v(e){var t={};if("object"==typeof e)if(g(e))for(var n=0;n<e.length;n++){var r=e[n];if(!g(r)||2!==r.length)throw new TypeError("Failed to construct 'URLSearchParams': Sequence initializer must only contain pair elements");y(t,r[0],r[1])}else for(var i in e)e.hasOwnProperty(i)&&y(t,i,e[i]);else{0===e.indexOf("?")&&(e=e.slice(1));for(var o=e.split("&"),a=0;a<o.length;a++){var s=o[a],u=s.indexOf("=");-1<u?y(t,p(s.slice(0,u)),p(s.slice(u+1))):s&&y(t,p(s),"")}}return t}function y(e,t,n){var r="string"==typeof n?n:null!=n&&"function"==typeof n.toString?n.toString():JSON.stringify(n);t in e?e[t].push(r):e[t]=[r]}function g(e){return!!e&&"[object Array]"===Object.prototype.toString.call(e)}}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=c(n(15)),o=c(n(4)),a=c(n(84)),s=c(n(16)),u=(r=(0,s.default)(i.default.mark(function e(t,n){var r,s,u,c,f,d,p;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,s=(0,a.default)(n,["id"]),e.next=3,t.query({doctype:l,selector:{termsId:r,version:s.version},limit:1});case 3:if(u=e.sent,!(c=u.data)||!c.length){e.next=13;break}if((f=c[0]).termsId!=r||f.version!=s.version||f.url==s.url){e.next=11;break}return d=(0,o.default)({_type:l},f,{url:s.url}),e.next=11,t.save(d);case 11:e.next=16;break;case 13:return p=(0,o.default)({_type:l},s,{termsId:r,accepted:!0,acceptedAt:new Date}),e.next=16,t.save(p);case 16:case"end":return e.stop()}},e,this)})),function(e,t){return r.apply(this,arguments)});function c(e){return e&&e.__esModule?e:{default:e}}var l="io.cozy.terms";t.default={save:u}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.APP_TYPE={KONNECTOR:"konnector",WEBAPP:"webapp"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o(n(100)),i=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}t.sanitizeCategories=s,t.areTermsValid=u,t.isPartnershipValid=c,t.sanitize=function(e){var t=(0,i.default)({},e);!e.categories&&e.category&&"string"==typeof e.category&&(t.categories=[e.category],delete t.category);t.categories=s(t.categories),"object"===(0,r.default)(e.name)&&(t.name=e.name.en);e.available_version&&(t.availableVersion=e.available_version,delete t.available_version);e.latest_version&&(t.latestVersion=e.latestVersion,delete t.latest_version);t.terms&&!u(t.terms)&&delete t.terms;t.partnership&&!c(t.partnership)&&delete t.partnership;return t};var a=["banking","cozy","energy","health","host_provider","insurance","isp","mes_infos","online_services","others","partners","press","productivity","ptnb","public_service","shopping","social","telecom","transport"];function s(e){if(!e)return["others"];var t=e.filter(function(e){return a.includes(e)});return t.length?t:["others"]}function u(e){return Boolean(e&&e.id&&e.url&&e.version)}function c(e){return Boolean(e&&e.description)}},function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.repeat=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},t.arrayEqual=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},t.trimChars=function(e,t){for(var n=0,r=e.length-1;t.indexOf(e.charAt(n))>=0;)n++;for(;t.indexOf(e.charAt(r))>=0;)r--;return e.slice(n,r+1)},t.capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.arrayUnion=function(){for(var e=[],t=0,n={};t<arguments.length;t++)for(var r=arguments[t],i=0;i<r.length;i++)n[r[i]]||(n[r[i]]=!0,e.push(r[i]));return e},t.has=r,t.extend=function(e,t){for(var n in t)r(t,n)&&(e[n]=t[n])},t.trimEnd=function(e){return e.replace(/\s+$/g,"")}},,,,function(e,t,n){var r=n(683)(!0);e.exports=r},function(e,t,n){var r=n(938)(n(966));e.exports=r},function(e,t,n){var r=n(1408);e.exports=function(e){return r(new Date,e)}},,,,,,,,,,function(e,t,n){var r=n(311),i=n(20),o=n(176),a=Math.max,s=Math.min;e.exports=function(e,t,n){var u=null==e?0:e.length;if(!u)return-1;var c=u-1;return void 0!==n&&(c=o(n),c=n<0?a(u+c,0):s(c,u-1)),r(e,i(t,3),c,!0)}},,,,,,,,,,,,function(e,t,n){var r=n(1382),i=n(88),o=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,a=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");e.exports=function(e){return(e=i(e))&&e.replace(o,r).replace(a,"")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},function(e,t,n){var r=n(265),i=n(43),o=n(20),a=n(56),s=n(87),u=n(190);e.exports=function(e){return u(function(t){return t=i(t,s(o)),a(function(n){var i=this;return e(t,function(e){return r(e,i,n)})})})}},,function(e,t,n){var r=n(311),i=n(20),o=n(176),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var u=null==n?0:o(n);return u<0&&(u=a(s+u,0)),r(e,i(t,3),u)}},,,function(e,t,n){var r=n(1383)({"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"});e.exports=r},function(e,t){e.exports=function(e){return function(t){return null==e?void 0:e[t]}}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(45);e.exports=function(e,t){var n=r(e),i=r(t);return n.getFullYear()===i.getFullYear()}},,,function(e,t,n){"use strict";var r=n(5),i=n(443),o=e.exports=function(e){if((e=e||{}).nargs=0,void 0===e.constant)throw new Error("constant option is required for storeAction");i.call(this,e)};r.inherits(o,i),o.prototype.call=function(e,t){t.set(this.dest,this.constant)}},function(e,t,n){"use strict";var r=n(5).format;e.exports=function(e,t){var n,i,o=null;return n=(o=e.getName?e.getName():""+e)?r('argument "%s": %s',o,t):t,(i=new TypeError(n)).code="ARGError",i}},function(e,t,n){"use strict";var r=n(1472).sprintf,i=n(392),o=n(950);function a(e,t){this._parent=e,this._heading=t,this._items=[]}a.prototype.addItem=function(e){this._items.push(e)},a.prototype.formatHelp=function(e){var t,n;if(this._parent&&e._indent(),t=this._items.map(function(t){var n,r,i;return n=e,r=t[0],i=t[1],r.apply(n,i)}),t=e._joinParts(t),this._parent&&e._dedent(),!t)return"";if(n="",this._heading&&this._heading!==i.SUPPRESS){var r=e.currentIndent;n=o.repeat(" ",r)+this._heading+":"+i.EOL}return e._joinParts([i.EOL,n,t,i.EOL])};var s=e.exports=function(e){e=e||{},this._prog=e.prog,this._maxHelpPosition=e.maxHelpPosition||24,this._width=e.width||(process.env.COLUMNS||80)-2,this._currentIndent=0,this._indentIncriment=e.indentIncriment||2,this._level=0,this._actionMaxLength=0,this._rootSection=new a(null),this._currentSection=this._rootSection,this._whitespaceMatcher=new RegExp("\\s+","g"),this._longBreakMatcher=new RegExp(i.EOL+i.EOL+i.EOL+"+","g")};s.prototype._indent=function(){this._currentIndent+=this._indentIncriment,this._level+=1},s.prototype._dedent=function(){if(this._currentIndent-=this._indentIncriment,this._level-=1,this._currentIndent<0)throw new Error("Indent decreased below 0.")},s.prototype._addItem=function(e,t){this._currentSection.addItem([e,t])},s.prototype.startSection=function(e){this._indent();var t=new a(this._currentSection,e),n=t.formatHelp.bind(t);this._addItem(n,[this]),this._currentSection=t},s.prototype.endSection=function(){this._currentSection=this._currentSection._parent,this._dedent()},s.prototype.addText=function(e){e&&e!==i.SUPPRESS&&this._addItem(this._formatText,[e])},s.prototype.addUsage=function(e,t,n,r){e!==i.SUPPRESS&&this._addItem(this._formatUsage,[e,t,n,r])},s.prototype.addArgument=function(e){if(e.help!==i.SUPPRESS){var t,n=this,r=[this._formatActionInvocation(e)],o=r[0].length;e._getSubactions&&(this._indent(),e._getSubactions().forEach(function(e){var t=n._formatActionInvocation(e);r.push(t),o=Math.max(o,t.length)}),this._dedent()),t=o+this._currentIndent,this._actionMaxLength=Math.max(this._actionMaxLength,t),this._addItem(this._formatAction,[e])}},s.prototype.addArguments=function(e){var t=this;e.forEach(function(e){t.addArgument(e)})},s.prototype.formatHelp=function(){var e=this._rootSection.formatHelp(this);return e&&(e=e.replace(this._longBreakMatcher,i.EOL+i.EOL),e=o.trimChars(e,i.EOL)+i.EOL),e},s.prototype._joinParts=function(e){return e.filter(function(e){return e&&e!==i.SUPPRESS}).join("")},s.prototype._formatUsage=function(e,t,n,a){if(a||"string"==typeof a||(a="usage: "),t=t||[],n=n||[],e)e=r(e,{prog:this._prog});else if(e||0!==t.length){if(!e){var s,u=this._prog,c=[],l=[];if(t.forEach(function(e){e.isOptional()?c.push(e):l.push(e)}),e=[u,this._formatActionsUsage([].concat(c,l),n)].join(" "),s=this._width-this._currentIndent,a.length+e.length>s){var f=new RegExp("\\(.*?\\)+|\\[.*?\\]+|\\S+","g"),d=this._formatActionsUsage(c,n),p=this._formatActionsUsage(l,n),h=d.match(f),v=p.match(f)||[];if(h.join(" ")!==d)throw new Error("assert \"optionalParts.join(' ') === optionalUsage\"");if(v.join(" ")!==p)throw new Error("assert \"positionalParts.join(' ') === positionalUsage\"");var y,g,m=function(e,t,n){var r=[],i=[],o=n?n.length-1:t.length-1;return e.forEach(function(e){o+1+e.length>s&&(r.push(t+i.join(" ")),i=[],o=t.length-1),i.push(e),o+=e.length+1}),i&&r.push(t+i.join(" ")),n&&(r[0]=r[0].substr(t.length)),r};a.length+u.length<=.75*s?(g=o.repeat(" ",a.length+u.length+1),y=h?[].concat(m([u].concat(h),g,a),m(v,g)):v?m([u].concat(v),g,a):[u]):(g=o.repeat(" ",a.length),(y=m(h.concat(v),g)).length>1&&(y=[].concat(m(h,g),m(v,g))),y=[u].concat(y)),e=y.join(i.EOL)}}}else e=this._prog;return a+e+i.EOL+i.EOL},s.prototype._formatActionsUsage=function(e,t){var n=[],r=[],a=this;t.forEach(function(t){var i,a,s=e.indexOf(t._groupActions[0]);if(s>=0&&(i=s+t._groupActions.length,o.arrayEqual(e.slice(s,i),t._groupActions)))for(t._groupActions.forEach(function(e){n.push(e)}),t.required?(r[s]?r[s]+=" (":r[s]="(",r[i]=")"):(r[s]?r[s]+=" [":r[s]="[",r[i]="]"),a=s+1;a<i;a+=1)r[a]="|"});var s=[];e.forEach(function(e,t){var o,u,c;e.help===i.SUPPRESS?(s.push(null),"|"===r[t]?r.splice(t,t):"|"===r[t+1]&&r.splice(t+1,t+1)):e.isOptional()?(u=e.optionStrings[0],0===e.nargs?o=""+u:(c=e.dest.toUpperCase(),o=u+" "+a._formatArgs(e,c)),!e.required&&n.indexOf(e)<0&&(o="["+o+"]"),s.push(o)):(o=a._formatArgs(e,e.dest),n.indexOf(e)>=0&&"["===o[0]&&"]"===o[o.length-1]&&(o=o.slice(1,-1)),s.push(o))});for(var u=r.length-1;u>=0;--u)null!==r[u]&&s.splice(u,0,r[u]);var c=s.filter(function(e){return!!e}).join(" ");return c=(c=(c=(c=(c=(c=c.replace(/([\[(]) /g,"$1")).replace(/ ([\])])/g,"$1")).replace(/\[ *\]/g,"")).replace(/\( *\)/g,"")).replace(/\(([^|]*)\)/g,"$1")).trim()},s.prototype._formatText=function(e){e=r(e,{prog:this._prog});var t=this._width-this._currentIndent,n=o.repeat(" ",this._currentIndent);return this._fillText(e,t,n)+i.EOL+i.EOL},s.prototype._formatAction=function(e){var t,n,r,a,s=this,u=Math.min(this._actionMaxLength+2,this._maxHelpPosition),c=this._width-u,l=u-this._currentIndent-2,f=this._formatActionInvocation(e);return e.help?f.length<=l?(f=o.repeat(" ",this._currentIndent)+f+"  "+o.repeat(" ",l-f.length),a=0):(f=o.repeat(" ",this._currentIndent)+f+i.EOL,a=u):f=o.repeat(" ",this._currentIndent)+f+i.EOL,r=[f],e.help?(t=this._expandHelp(e),n=this._splitLines(t,c),r.push(o.repeat(" ",a)+n[0]+i.EOL),n.slice(1).forEach(function(e){r.push(o.repeat(" ",u)+e+i.EOL)})):f.charAt(f.length-1)!==i.EOL&&r.push(i.EOL),e._getSubactions&&(this._indent(),e._getSubactions().forEach(function(e){r.push(s._formatAction(e))}),this._dedent()),this._joinParts(r)},s.prototype._formatActionInvocation=function(e){if(!e.isOptional())return this._metavarFormatter(e,e.dest)(1)[0];var t,n,r=[];return 0===e.nargs?r=r.concat(e.optionStrings):(t=e.dest.toUpperCase(),n=this._formatArgs(e,t),e.optionStrings.forEach(function(e){r.push(e+" "+n)})),r.join(", ")},s.prototype._metavarFormatter=function(e,t){var n;if(e.metavar||""===e.metavar)n=e.metavar;else if(e.choices){var r=e.choices;r="string"==typeof r?r.split("").join(", "):Array.isArray(r)?r.join(","):Object.keys(r).join(","),n="{"+r+"}"}else n=t;return function(e){if(Array.isArray(n))return n;for(var t=[],r=0;r<e;r+=1)t.push(n);return t}},s.prototype._formatArgs=function(e,t){var n,r,o=this._metavarFormatter(e,t);switch(e.nargs){case void 0:case null:n=""+(r=o(1))[0];break;case i.OPTIONAL:n="["+(r=o(1))[0]+"]";break;case i.ZERO_OR_MORE:n="["+(r=o(2))[0]+" ["+r[1]+" ...]]";break;case i.ONE_OR_MORE:n=(r=o(2))[0]+" ["+r[1]+" ...]";break;case i.REMAINDER:n="...";break;case i.PARSER:n=(r=o(1))[0]+" ...";break;default:n=(r=o(e.nargs)).join(" ")}return n},s.prototype._expandHelp=function(e){var t={prog:this._prog};return Object.keys(e).forEach(function(n){var r=e[n];r!==i.SUPPRESS&&(t[n]=r)}),t.choices&&("string"==typeof t.choices?t.choices=t.choices.split("").join(", "):Array.isArray(t.choices)?t.choices=t.choices.join(", "):t.choices=Object.keys(t.choices).join(", ")),r(this._getHelpString(e),t)},s.prototype._splitLines=function(e,t){var n=[],r=[" ",".",",","!","?"],o=new RegExp("["+r.join("")+"][^"+r.join("")+"]*$");return(e=(e=(e=e.replace(/[\n\|\t]/g," ")).trim()).replace(this._whitespaceMatcher," ")).split(i.EOL).forEach(function(e){if(t>=e.length)n.push(e);else{for(var i=0,a=t;a<=e.length;)a!==e.length&&r.indexOf(e[a]<-1)&&(a=i+(o.exec(e.substring(i,a))||{}).index+1),n.push(e.substring(i,a)),i=a,a+=t;i<e.length&&n.push(e.substring(i,a))}}),n},s.prototype._fillText=function(e,t,n){var r=this._splitLines(e,t);return(r=r.map(function(e){return n+e})).join(i.EOL)},s.prototype._getHelpString=function(e){return e.help}},function(e,t,n){"use strict";var r=n(5),i=n(392),o=n(950),a=n(1413);function s(e){a.call(this,e)}function u(e){a.call(this,e)}function c(e){u.call(this,e)}r.inherits(s,a),s.prototype._getHelpString=function(e){var t=e.help;if(-1===e.help.indexOf("%(defaultValue)s")&&e.defaultValue!==i.SUPPRESS){var n=[i.OPTIONAL,i.ZERO_OR_MORE];(e.isOptional()||n.indexOf(e.nargs)>=0)&&(t+=" (default: %(defaultValue)s)")}return t},e.exports.ArgumentDefaultsHelpFormatter=s,r.inherits(u,a),u.prototype._fillText=function(e,t,n){var r=e.split("\n");return(r=r.map(function(e){return o.trimEnd(n+e)})).join("\n")},e.exports.RawDescriptionHelpFormatter=u,r.inherits(c,u),c.prototype._splitLines=function(e){return e.split("\n")},e.exports.RawTextHelpFormatter=c},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){!function(e){var n={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function r(){var e=arguments[0],t=r.cache;return t[e]&&t.hasOwnProperty(e)||(t[e]=r.parse(e)),r.format.call(null,t[e],arguments)}r.format=function(e,t){var o,a,s,u,c,l,f,d,p=1,h=e.length,v="",y=[],g=!0,m="";for(a=0;a<h;a++)if("string"===(v=i(e[a])))y[y.length]=e[a];else if("array"===v){if((u=e[a])[2])for(o=t[p],s=0;s<u[2].length;s++){if(!o.hasOwnProperty(u[2][s]))throw new Error(r("[sprintf] property '%s' does not exist",u[2][s]));o=o[u[2][s]]}else o=u[1]?t[u[1]]:t[p++];if("function"==i(o)&&(o=o()),n.not_string.test(u[8])&&n.not_json.test(u[8])&&"number"!=i(o)&&isNaN(o))throw new TypeError(r("[sprintf] expecting number but found %s",i(o)));switch(n.number.test(u[8])&&(g=o>=0),u[8]){case"b":o=o.toString(2);break;case"c":o=String.fromCharCode(o);break;case"d":case"i":o=parseInt(o,10);break;case"j":o=JSON.stringify(o,null,u[6]?parseInt(u[6]):0);break;case"e":o=u[7]?o.toExponential(u[7]):o.toExponential();break;case"f":o=u[7]?parseFloat(o).toFixed(u[7]):parseFloat(o);break;case"g":o=u[7]?parseFloat(o).toPrecision(u[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=String(o))&&u[7]?o.substring(0,u[7]):o;break;case"u":o>>>=0;break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}n.json.test(u[8])?y[y.length]=o:(!n.number.test(u[8])||g&&!u[3]?m="":(m=g?"+":"-",o=o.toString().replace(n.sign,"")),l=u[4]?"0"===u[4]?"0":u[4].charAt(1):" ",f=u[6]-(m+o).length,c=u[6]&&f>0?(d=l,Array(f+1).join(d)):"",y[y.length]=u[5]?m+o+c:"0"===l?m+c+o:c+m+o)}return y.join("")},r.cache={},r.parse=function(e){for(var t=e,r=[],i=[],o=0;t;){if(null!==(r=n.text.exec(t)))i[i.length]=r[0];else if(null!==(r=n.modulo.exec(t)))i[i.length]="%";else{if(null===(r=n.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){o|=1;var a=[],s=r[2],u=[];if(null===(u=n.key.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(a[a.length]=u[1];""!==(s=s.substring(u[0].length));)if(null!==(u=n.key_access.exec(s)))a[a.length]=u[1];else{if(null===(u=n.index_access.exec(s)))throw new SyntaxError("[sprintf] failed to parse named argument key");a[a.length]=u[1]}r[2]=a}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");i[i.length]=r}t=t.substring(r[0].length)}return i};function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}t.sprintf=r,t.vsprintf=function(e,t,n){return(n=(t||[]).slice(0)).splice(0,0,e),r.apply(null,n)}}("undefined"==typeof window||window)},function(e,t,n){"use strict";var r=n(5).format,i=n(392),o=n(950),a=n(1745),s=n(1746),u=n(1747),c=n(1748),l=n(1749),f=n(1411),d=n(1750),p=n(1751),h=n(1752),v=n(1753),y=n(1412),g=e.exports=function(e){e=e||{},this.description=e.description,this.argumentDefault=e.argumentDefault,this.prefixChars=e.prefixChars||"",this.conflictHandler=e.conflictHandler,this._registries={},this.register("action",null,l),this.register("action","store",l),this.register("action","storeConst",f),this.register("action","storeTrue",d),this.register("action","storeFalse",p),this.register("action","append",s),this.register("action","appendConst",u),this.register("action","count",c),this.register("action","help",a),this.register("action","version",h),this.register("action","parsers",v),this._getHandler(),this._actions=[],this._optionStringActions={},this._actionGroups=[],this._mutuallyExclusiveGroups=[],this._defaults={},this._regexpNegativeNumber=new RegExp("^[-]?[0-9]*\\.?[0-9]+([eE][-+]?[0-9]+)?$"),this._hasNegativeNumberOptionals=[]},m=n(1474),b=n(1754);g.prototype.register=function(e,t,n){this._registries[e]=this._registries[e]||{},this._registries[e][t]=n},g.prototype._registryGet=function(e,t,n){return arguments.length<3&&(n=null),this._registries[e][t]||n},g.prototype.setDefaults=function(e){for(var t in e=e||{})o.has(e,t)&&(this._defaults[t]=e[t]);this._actions.forEach(function(t){o.has(e,t.dest)&&(t.defaultValue=e[t.dest])})},g.prototype.getDefault=function(e){var t=o.has(this._defaults,e)?this._defaults[e]:null;return this._actions.forEach(function(n){n.dest===e&&o.has(n,"defaultValue")&&(t=n.defaultValue)}),t},g.prototype.addArgument=function(e,t){if(t=t||{},"string"==typeof(e=e)&&(e=[e]),!Array.isArray(e))throw new TypeError("addArgument first argument should be a string or an array");if("object"!=typeof t||Array.isArray(t))throw new TypeError("addArgument second argument should be a hash");if(!e||1===e.length&&this.prefixChars.indexOf(e[0][0])<0){if(e&&t.dest)throw new Error("dest supplied twice for positional argument");t=this._getPositional(e,t)}else t=this._getOptional(e,t);if(void 0===t.defaultValue){var n=t.dest;o.has(this._defaults,n)?t.defaultValue=this._defaults[n]:void 0!==this.argumentDefault&&(t.defaultValue=this.argumentDefault)}var i=this._popActionClass(t);if("function"!=typeof i)throw new Error(r('Unknown action "%s".',i));var a=new i(t),s=this._registryGet("type",a.type,a.type);if("function"!=typeof s)throw new Error(r('"%s" is not callable',s));return this._addAction(a)},g.prototype.addArgumentGroup=function(e){var t=new m(this,e);return this._actionGroups.push(t),t},g.prototype.addMutuallyExclusiveGroup=function(e){var t=new b(this,e);return this._mutuallyExclusiveGroups.push(t),t},g.prototype._addAction=function(e){var t=this;return this._checkConflict(e),this._actions.push(e),e.container=this,e.optionStrings.forEach(function(n){t._optionStringActions[n]=e}),e.optionStrings.forEach(function(e){e.match(t._regexpNegativeNumber)&&(t._hasNegativeNumberOptionals.some(Boolean)||t._hasNegativeNumberOptionals.push(!0))}),e},g.prototype._removeAction=function(e){var t=this._actions.indexOf(e);t>=0&&this._actions.splice(t,1)},g.prototype._addContainerActions=function(e){var t={};this._actionGroups.forEach(function(e){if(t[e.title])throw new Error(r('Cannot merge actions - two groups are named "%s".',e.title));t[e.title]=e});var n,i={};function o(e){return e.getName()}e._actionGroups.forEach(function(e){t[e.title]||(t[e.title]=this.addArgumentGroup({title:e.title,description:e.description})),e._groupActions.forEach(function(n){i[o(n)]=t[e.title]})},this),e._mutuallyExclusiveGroups.forEach(function(e){n=this.addMutuallyExclusiveGroup({required:e.required}),e._groupActions.forEach(function(e){i[o(e)]=n})},this),e._actions.forEach(function(e){var t=o(e);i[t]?i[t]._addAction(e):this._addAction(e)})},g.prototype._getPositional=function(e,t){if(Array.isArray(e)&&(e=e[0]),t.required)throw new Error('"required" is an invalid argument for positionals.');return t.nargs!==i.OPTIONAL&&t.nargs!==i.ZERO_OR_MORE&&(t.required=!0),t.nargs===i.ZERO_OR_MORE&&void 0===t.defaultValue&&(t.required=!0),t.dest=e,t.optionStrings=[],t},g.prototype._getOptional=function(e,t){var n=this.prefixChars,i=[],a=[];e.forEach(function(e){if(n.indexOf(e[0])<0)throw new Error(r('Invalid option string "%s": must start with a "%s".',e,n));i.push(e),e.length>1&&n.indexOf(e[1])>=0&&a.push(e)});var s=t.dest||null;if(delete t.dest,!s){var u=a.length?a[0]:i[0];if(0===(s=o.trimChars(u,this.prefixChars)).length)throw new Error(r('dest= is required for options like "%s"',i.join(", ")));s=s.replace(/-/g,"_")}return t.dest=s,t.optionStrings=i,t},g.prototype._popActionClass=function(e,t){t=t||null;var n=e.action||t;return delete e.action,this._registryGet("action",n,n)},g.prototype._getHandler=function(){var e=this.conflictHandler,t=this["_handleConflict"+o.capitalize(e)];if(void 0===t)throw new Error("invalid conflict resolution value: "+e);return t},g.prototype._checkConflict=function(e){var t=this._optionStringActions,n=[];(e.optionStrings.forEach(function(e){var r=t[e];void 0!==r&&n.push([e,r])}),n.length>0)&&this._getHandler().call(this,e,n)},g.prototype._handleConflictError=function(e,t){var n=t.map(function(e){return e[0]});throw n=n.join(", "),y(e,r("Conflicting option string(s): %s",n))},g.prototype._handleConflictResolve=function(e,t){var n=this;t.forEach(function(e){var t=e[0],r=e[1],i=r.optionStrings.indexOf(t);i>=0&&r.optionStrings.splice(i,1),delete n._optionStringActions[t],0===r.optionStrings.length&&r.container._removeAction(r)})}},function(e,t,n){"use strict";var r=n(5),i=n(1473),o=e.exports=function(e,t){(t=t||{}).conflictHandler=t.conflictHandler||e.conflictHandler,t.prefixChars=t.prefixChars||e.prefixChars,t.argumentDefault=t.argumentDefault||e.argumentDefault,i.call(this,t),this.title=t.title,this._groupActions=[],this._container=e,this._registries=e._registries,this._actions=e._actions,this._optionStringActions=e._optionStringActions,this._defaults=e._defaults,this._hasNegativeNumberOptionals=e._hasNegativeNumberOptionals,this._mutuallyExclusiveGroups=e._mutuallyExclusiveGroups};r.inherits(o,i),o.prototype._addAction=function(e){return e=i.prototype._addAction.call(this,e),this._groupActions.push(e),e},o.prototype._removeAction=function(e){i.prototype._removeAction.call(this,e);var t=this._groupActions.indexOf(e);t>=0&&this._groupActions.splice(t,1)}},function(e,t,n){"use strict";var r=n(950),i=e.exports=function(e){r.extend(this,e)};i.prototype.isset=function(e){return r.has(this,e)},i.prototype.set=function(e,t){return"object"==typeof e?r.extend(this,e):this[e]=t,this},i.prototype.get=function(e,t){return this[e]?this[e]:t},i.prototype.unset=function(e,t){var n=this[e];return null!==n?(delete this[e],n):t}},,,,,,,,function(e,t,n){"use strict";e.exports=n(1743)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports.ArgumentParser=n(1744),e.exports.Namespace=n(1475),e.exports.Action=n(443),e.exports.HelpFormatter=n(1413),e.exports.Const=n(392),e.exports.ArgumentDefaultsHelpFormatter=n(1414).ArgumentDefaultsHelpFormatter,e.exports.RawDescriptionHelpFormatter=n(1414).RawDescriptionHelpFormatter,e.exports.RawTextHelpFormatter=n(1414).RawTextHelpFormatter},function(e,t,n){"use strict";var r=n(5),i=n(5).format,o=n(55),a=n(1472).sprintf,s=n(392),u=n(950),c=n(1473),l=n(1412),f=n(1413),d=n(1475);function p(e){if(!(this instanceof p))return new p(e);var t=this;function n(e){return e}(e=e||{}).description=e.description||null,e.argumentDefault=e.argumentDefault||null,e.prefixChars=e.prefixChars||"-",e.conflictHandler=e.conflictHandler||"error",c.call(this,e),e.addHelp=void 0===e.addHelp||!!e.addHelp,e.parents=e.parents||[],e.prog=e.prog||o.basename(process.argv[1]),this.prog=e.prog,this.usage=e.usage,this.epilog=e.epilog,this.version=e.version,this.debug=!0===e.debug,this.formatterClass=e.formatterClass||f,this.fromfilePrefixChars=e.fromfilePrefixChars||null,this._positionals=this.addArgumentGroup({title:"Positional arguments"}),this._optionals=this.addArgumentGroup({title:"Optional arguments"}),this._subparsers=null,this.register("type","auto",n),this.register("type",null,n),this.register("type","int",function(e){var t=parseInt(e,10);if(isNaN(t))throw new Error(e+" is not a valid integer.");return t}),this.register("type","float",function(e){var t=parseFloat(e);if(isNaN(t))throw new Error(e+" is not a valid float.");return t}),this.register("type","string",function(e){return""+e});var r=this.prefixChars.indexOf("-")>-1?"-":this.prefixChars[0];e.addHelp&&this.addArgument([r+"h",r+r+"help"],{action:"help",defaultValue:s.SUPPRESS,help:"Show this help message and exit."}),void 0!==this.version&&this.addArgument([r+"v",r+r+"version"],{action:"version",version:this.version,defaultValue:s.SUPPRESS,help:"Show program's version number and exit."}),e.parents.forEach(function(e){if(t._addContainerActions(e),void 0!==e._defaults)for(var n in e._defaults)e._defaults.hasOwnProperty(n)&&(t._defaults[n]=e._defaults[n])})}r.inherits(p,c),p.prototype.addSubparsers=function(e){if(this._subparsers&&this.error("Cannot have multiple subparser arguments."),(e=e||{}).debug=!0===this.debug,e.optionStrings=[],e.parserClass=e.parserClass||p,e.title||e.description?(this._subparsers=this.addArgumentGroup({title:e.title||"subcommands",description:e.description}),delete e.title,delete e.description):this._subparsers=this._positionals,!e.prog){var t=this._getFormatter(),n=this._getPositionalActions(),r=this._mutuallyExclusiveGroups;t.addUsage(this.usage,n,r,""),e.prog=t.formatHelp().trim()}var i=new(this._popActionClass(e,"parsers"))(e);return this._subparsers._addAction(i),i},p.prototype._addAction=function(e){return e.isOptional()?this._optionals._addAction(e):this._positionals._addAction(e),e},p.prototype._getOptionalActions=function(){return this._actions.filter(function(e){return e.isOptional()})},p.prototype._getPositionalActions=function(){return this._actions.filter(function(e){return e.isPositional()})},p.prototype.parseArgs=function(e,t){var n,r=this.parseKnownArgs(e,t);return e=r[0],(n=r[1])&&n.length>0&&this.error(i("Unrecognized arguments: %s.",n.join(" "))),e},p.prototype.parseKnownArgs=function(e,t){var n=this;e=e||process.argv.slice(2),t=t||new d,n._actions.forEach(function(e){if(e.dest!==s.SUPPRESS&&!u.has(t,e.dest)&&e.defaultValue!==s.SUPPRESS){var r=e.defaultValue;"string"==typeof e.defaultValue&&(r=n._getValue(e,r)),t[e.dest]=r}}),Object.keys(n._defaults).forEach(function(e){t[e]=n._defaults[e]});try{var r=this._parseKnownArgs(e,t);return t=r[0],e=r[1],u.has(t,s._UNRECOGNIZED_ARGS_ATTR)&&(e=u.arrayUnion(e,t[s._UNRECOGNIZED_ARGS_ATTR]),delete t[s._UNRECOGNIZED_ARGS_ATTR]),[t,e]}catch(e){this.error(e)}},p.prototype._parseKnownArgs=function(e,t){var n,r,o=this,c=[];function f(e){return e.getName()}null!==this.fromfilePrefixChars&&(e=this._readArgsFromFiles(e));var d={};this._mutuallyExclusiveGroups.forEach(function(e){e._groupActions.forEach(function(e,t,i){r=f(e),u.has(d,r)||(d[r]=[]),(n=d[r]).push.apply(n,i.slice(0,t)),n.push.apply(n,i.slice(t+1))})});var p={},h=[];e.forEach(function(t,n){if("--"===t)for(h.push("-");n<e.length;)h.push("A"),n++;else{var r,i=o._parseOptional(t);i?(p[n]=i,r="O"):r="A",h.push(r)}});var v=h.join(""),y=[],g=[];function m(e,n,r){y.push(e);var a=o._getValues(e,n);a!==e.defaultValue&&(g.push(e),d[f(e)]&&d[f(e)].forEach(function(t){if(g.indexOf(t)>=0)throw l(e,i('Not allowed with argument "%s".',t.getName()))})),a!==s.SUPPRESS&&e.call(o,t,a,r)}function b(t){for(var n,r,i,s,u=p[t],f=u[0],d=u[1],h=u[2],y=[];;){if(!f)return c.push(e[t]),t+1;if(!h){i=t+1;var g=v.substr(i);s=i+(r=o._matchArgument(f,g)),n=e.slice(i,s),y.push([f,n,d]);break}r=o._matchArgument(f,"A");var b=o.prefixChars;if(!(0===r&&b.indexOf(d[1])<0)){if(1===r){s=t+1,n=[h],y.push([f,n,d]);break}throw l(f,a("ignored explicit argument %r",h))}y.push([f,[],d]),d=d[0]+h[0];var w=h.slice(1)||null,_=o._optionStringActions;if(!(Object.keys(_).indexOf(d)>=0))throw l(f,a("ignored explicit argument %r",h));f=_[d],h=w}if(y.length<1)throw new Error("length should be > 0");for(var x=0;x<y.length;x++)m.apply(o,y[x]);return s}var w=o._getPositionalActions();function _(t){for(var n=v.substr(t),r=o._matchArgumentsPartial(w,n),i=0;i<w.length;i++){var a=w[i],s=r[i];if(void 0!==s){var u=e.slice(t,t+s);t+=s,m(a,u)}}return w=w.slice(r.length),t}var x,k,O,S=0,E=-1;for(Object.keys(p).forEach(function(e){E=Math.max(E,parseInt(e,10))});S<=E;){for(x in O=null,p)p.hasOwnProperty(x)&&(x=parseInt(x,10))>=S&&(O=null!==O?Math.min(O,x):x);if(S!==O){if((k=_(S))>S){S=k;continue}S=k}if(!p[S]){var A=e.slice(S,O);c=c.concat(A),S=O}S=b(S)}var C=_(S);c=c.concat(e.slice(C)),w.length>0&&o.error("too few arguments"),o._actions.forEach(function(e){e.required&&y.indexOf(e)<0&&o.error(i('Argument "%s" is required',e.getName()))});return o._mutuallyExclusiveGroups.forEach(function(e){if(e.required&&!e._groupActions.some(function(e){return-1!==g.indexOf(e)})){var t=[];e._groupActions.forEach(function(e){e.help!==s.SUPPRESS&&t.push(e.getName())});var n="one of the arguments "+(t=t.join(" "))+" is required";o.error(n)}}),[t,c]},p.prototype._readArgsFromFiles=function(e){var t=this,r=n(60),i=[];return e.forEach(function(e){if(t.fromfilePrefixChars.indexOf(e[0])<0)i.push(e);else try{var n=[],o=e.slice(1),a=r.readFileSync(o,"utf8");(a=a.trim().split("\n")).forEach(function(e){t.convertArgLineToArgs(e).forEach(function(e){n.push(e)}),n=t._readArgsFromFiles(n)}),i.push.apply(i,n)}catch(e){return t.error(e.message)}}),i},p.prototype.convertArgLineToArgs=function(e){return[e]},p.prototype._matchArgument=function(e,t){var n,r=new RegExp("^"+this._getNargsPattern(e)),o=t.match(r);if(!o){switch(e.nargs){case void 0:case null:n="Expected one argument.";break;case s.OPTIONAL:n="Expected at most one argument.";break;case s.ONE_OR_MORE:n="Expected at least one argument.";break;default:n="Expected %s argument(s)"}throw l(e,i(n,e.nargs))}return o[1].length},p.prototype._matchArgumentsPartial=function(e,t){var n,r,i,o,a,s=[];function u(e){return e.length}for(o=e.length;o>0;o--){for(r="",n=e.slice(0,o),a=0;a<n.length;a++)r+=this._getNargsPattern(n[a]);if(r=new RegExp("^"+r),(i=t.match(r))&&i.length>0){i=i.splice(1),s=s.concat(i.map(u));break}}return s},p.prototype._parseOptional=function(e){var t,n,r;if(!e)return null;if(this.prefixChars.indexOf(e[0])<0)return null;if(this._optionStringActions[e])return[this._optionStringActions[e],e,null];if(1===e.length)return null;if(e.indexOf("=")>=0&&(t=e.split("=",1)[0],n=e.slice(t.length+1),this._optionStringActions[t]))return[this._optionStringActions[t],t,n];if((r=this._getOptionTuples(e)).length>1){var o=r.map(function(e){return e[1]});this.error(i('Ambiguous option: "%s" could match %s.',e,o.join(", ")))}else if(1===r.length)return r[0];return e.match(this._regexpNegativeNumber)&&!this._hasNegativeNumberOptionals.some(Boolean)?null:e.search(" ")>=0?null:[null,e,null]},p.prototype._getOptionTuples=function(e){var t,n,r,o,a=[],s=this.prefixChars;if(s.indexOf(e[0])>=0&&s.indexOf(e[1])>=0){if(e.indexOf("=")>=0){var c=e.split("=",1);t=c[0],n=c[1]}else t=e,n=null;for(o in this._optionStringActions)o.substr(0,t.length)===t&&(r=this._optionStringActions[o],a.push([r,o,n]))}else{if(!(s.indexOf(e[0])>=0&&s.indexOf(e[1])<0))throw new Error(i("Unexpected option string: %s.",e));t=e,n=null;var l=e.substr(0,2),f=e.substr(2);for(o in this._optionStringActions)u.has(this._optionStringActions,o)&&(r=this._optionStringActions[o],o===l?a.push([r,o,f]):o.substr(0,t.length)===t&&a.push([r,o,n]))}return a},p.prototype._getNargsPattern=function(e){var t;switch(e.nargs){case void 0:case null:t="(-*A-*)";break;case s.OPTIONAL:t="(-*A?-*)";break;case s.ZERO_OR_MORE:t="(-*[A-]*)";break;case s.ONE_OR_MORE:t="(-*A[A-]*)";break;case s.REMAINDER:t="([-AO]*)";break;case s.PARSER:t="(-*A[-AO]*)";break;default:t="(-*"+u.repeat("-*A",e.nargs)+"-*)"}return e.isOptional()&&(t=(t=t.replace(/-\*/g,"")).replace(/-/g,"")),t},p.prototype._getValues=function(e,t){var n,r,i=this;return e.nargs!==s.PARSER&&e.nargs!==s.REMAINDER&&(t=t.filter(function(e){return"--"!==e})),0===t.length&&e.nargs===s.OPTIONAL?"string"==typeof(n=e.isOptional()?e.constant:e.defaultValue)&&(n=this._getValue(e,n),this._checkValue(e,n)):0===t.length&&e.nargs===s.ZERO_OR_MORE&&0===e.optionStrings.length?(n=e.defaultValue||t,this._checkValue(e,n)):1!==t.length||e.nargs&&e.nargs!==s.OPTIONAL?e.nargs===s.REMAINDER?n=t.map(function(t){return i._getValue(e,t)}):e.nargs===s.PARSER?(n=t.map(function(t){return i._getValue(e,t)}),this._checkValue(e,n[0])):(n=t.map(function(t){return i._getValue(e,t)})).forEach(function(t){i._checkValue(e,t)}):(r=t[0],n=this._getValue(e,r),this._checkValue(e,n)),n},p.prototype._getValue=function(e,t){var n,r=this._registryGet("type",e.type,e.type);if("function"!=typeof r){var o=i("%s is not callable",r);throw l(e,o)}try{n=r(t)}catch(n){var a=null;a="string"==typeof e.type?e.type:e.type.name||e.type.displayName||"<function>";var s=i("Invalid %s value: %s",a,t);throw"<function>"===a&&(s+="\n"+n.message),l(e,s)}return n},p.prototype._checkValue=function(e,t){var n=e.choices;if(n){if(("string"==typeof n||Array.isArray(n))&&-1!==n.indexOf(t))return;if("object"==typeof n&&!Array.isArray(n)&&n[t])return;n="string"==typeof n?n.split("").join(", "):Array.isArray(n)?n.join(", "):Object.keys(n).join(", ");var r=i("Invalid choice: %s (choose from [%s])",t,n);throw l(e,r)}},p.prototype.formatUsage=function(){var e=this._getFormatter();return e.addUsage(this.usage,this._actions,this._mutuallyExclusiveGroups),e.formatHelp()},p.prototype.formatHelp=function(){var e=this._getFormatter();return e.addUsage(this.usage,this._actions,this._mutuallyExclusiveGroups),e.addText(this.description),this._actionGroups.forEach(function(t){e.startSection(t.title),e.addText(t.description),e.addArguments(t._groupActions),e.endSection()}),e.addText(this.epilog),e.formatHelp()},p.prototype._getFormatter=function(){return new(0,this.formatterClass)({prog:this.prog})},p.prototype.printUsage=function(){this._printMessage(this.formatUsage())},p.prototype.printHelp=function(){this._printMessage(this.formatHelp())},p.prototype._printMessage=function(e,t){t||(t=process.stdout),e&&t.write(""+e)},p.prototype.exit=function(e,t){t&&(0===e?this._printMessage(t):this._printMessage(t,process.stderr)),process.exit(e)},p.prototype.error=function(e){var t;if(e instanceof Error){if(!0===this.debug)throw e;t=e.message}else t=e;var n=i("%s: error: %s",this.prog,t)+s.EOL;if(!0===this.debug)throw new Error(n);return this.printUsage(process.stderr),this.exit(2,n)},e.exports=p},function(e,t,n){"use strict";var r=n(5),i=n(443),o=n(392),a=e.exports=function(e){null!==(e=e||{}).defaultValue?e.defaultValue=e.defaultValue:e.defaultValue=o.SUPPRESS,e.dest=null!==e.dest?e.dest:o.SUPPRESS,e.nargs=0,i.call(this,e)};r.inherits(a,i),a.prototype.call=function(e){e.printHelp(),e.exit()}},function(e,t,n){"use strict";var r=n(5),i=n(443),o=n(392),a=e.exports=function(e){if(e=e||{},this.nargs<=0)throw new Error("nargs for append actions must be > 0; if arg strings are not supplying the value to append, the append const action may be more appropriate");if(this.constant&&this.nargs!==o.OPTIONAL)throw new Error("nargs must be OPTIONAL to supply const");i.call(this,e)};r.inherits(a,i),a.prototype.call=function(e,t,n){var r=(t[this.dest]||[]).slice();r.push(n),t.set(this.dest,r)}},function(e,t,n){"use strict";var r=n(5),i=n(443),o=e.exports=function(e){if((e=e||{}).nargs=0,void 0===e.constant)throw new Error("constant option is required for appendAction");i.call(this,e)};r.inherits(o,i),o.prototype.call=function(e,t){var n=[].concat(t[this.dest]||[]);n.push(this.constant),t.set(this.dest,n)}},function(e,t,n){"use strict";var r=n(5),i=n(443),o=e.exports=function(e){(e=e||{}).nargs=0,i.call(this,e)};r.inherits(o,i),o.prototype.call=function(e,t){t.set(this.dest,(t[this.dest]||0)+1)}},function(e,t,n){"use strict";var r=n(5),i=n(443),o=n(392),a=e.exports=function(e){if(e=e||{},this.nargs<=0)throw new Error("nargs for store actions must be > 0; if you have nothing to store, actions such as store true or store const may be more appropriate");if(void 0!==this.constant&&this.nargs!==o.OPTIONAL)throw new Error("nargs must be OPTIONAL to supply const");i.call(this,e)};r.inherits(a,i),a.prototype.call=function(e,t,n){t.set(this.dest,n)}},function(e,t,n){"use strict";var r=n(5),i=n(1411),o=e.exports=function(e){(e=e||{}).constant=!0,e.defaultValue=null!==e.defaultValue&&e.defaultValue,i.call(this,e)};r.inherits(o,i)},function(e,t,n){"use strict";var r=n(5),i=n(1411),o=e.exports=function(e){(e=e||{}).constant=!1,e.defaultValue=null===e.defaultValue||e.defaultValue,i.call(this,e)};r.inherits(o,i)},function(e,t,n){"use strict";var r=n(5),i=n(443),o=n(392),a=e.exports=function(e){(e=e||{}).defaultValue=e.defaultValue?e.defaultValue:o.SUPPRESS,e.dest=e.dest||o.SUPPRESS,e.nargs=0,this.version=e.version,i.call(this,e)};r.inherits(a,i),a.prototype.call=function(e){var t=this.version||e.version,n=e._getFormatter();n.addText(t),e.exit(0,n.formatHelp())}},function(e,t,n){"use strict";var r=n(5),i=n(5).format,o=n(443),a=n(392),s=n(1412);function u(e,t){var n={optionStrings:[],dest:e,help:t};o.call(this,n)}function c(e){(e=e||{}).dest=e.dest||a.SUPPRESS,e.nargs=a.PARSER,this.debug=!0===e.debug,this._progPrefix=e.prog,this._parserClass=e.parserClass,this._nameParserMap={},this._choicesActions=[],e.choices=this._nameParserMap,o.call(this,e)}r.inherits(u,o),r.inherits(c,o),c.prototype.addParser=function(e,t){var n,r=this;(t=t||{}).debug=!0===this.debug,t.prog||(t.prog=this._progPrefix+" "+e);var i=t.aliases||[];if(t.help||"string"==typeof t.help){var o=t.help;delete t.help;var a=new u(e,o);this._choicesActions.push(a)}return n=new this._parserClass(t),this._nameParserMap[e]=n,i.forEach(function(e){r._nameParserMap[e]=n}),n},c.prototype._getSubactions=function(){return this._choicesActions},c.prototype.call=function(e,t,n){var r=n[0],o=n.slice(1);if(this.dest!==a.SUPPRESS&&(t[this.dest]=r),!this._nameParserMap[r])throw s(i('Unknown parser "%s" (choices: [%s]).',r,Object.keys(this._nameParserMap).join(", ")));this._nameParserMap[r].parseArgs(o,t)},e.exports=c},function(e,t,n){"use strict";var r=n(5),i=n(1474),o=e.exports=function(e,t){var n;n=(t=t||{}).required||!1,i.call(this,e),this.required=n};r.inherits(o,i),o.prototype._addAction=function(e){if(e.required)throw"mutually exclusive arguments must be optional",new Error("mutually exclusive arguments must be optional");return e=this._container._addAction(e),this._groupActions.push(e),e},o.prototype._removeAction=function(e){this._container._removeAction(e),this._groupActions.remove(e)}},,function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=n(19),a=n.n(o),s=n(3),u=n.n(s),c=n(1483),l=n.n(c),f=n(40),d=n.n(f),p=n(86),h=n.n(p),v=n(71),y=n.n(v),g=n(799),m=n(444),b=n.n(m),w=n(449),_=n(69),x=n(72),k=n.n(x),O=(n(978),n(66),n(41)),S=n.n(O),E=n(278),A=n.n(E),C=function(e,t,n,r){var i=r.map(function(e){return e.id});return e[t]={data:r,doctype:n,name:t,raw:i,target:a()({},e,A()({},t,i))},e},j=n(180),T=(n(83),function(e,t){var n=S()(e,j.c);return Object.entries(n).map(function(e){var n=k()(e,2);return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.virtual,i=void 0===r||r,o=n.client,a=void 0===o?null:o,s={_type:_.c,label:e,accountType:e};return i&&(s.virtual=!0,s._id=e),C(s,"accounts",_.a,t),a?(s.accounts=t.map(function(e){return e._id}),a.hydrateDocument(s)):(C(s,"accounts",_.a,t),s)}(n[0],n[1],t)})}),P=function(e){return void 0!==e.accountType},R=function(e){return e.accountType},M=d.a.namespace("auto-groups"),I=function(e,t){var n=new Set;return e.forEach(function(e){return n.add(e)}),t.forEach(function(e){return n.add(e)}),n},D=function(){var e=u()(i.a.mark(function e(t){var n,r,o,s,u,c,l,f,d,p,h,v,g,m,x,k,O,S;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,e.next=3,Object(w.a)(n);case 3:return r=e.sent,e.next=6,n.queryAll(n.all(_.c));case 6:return o=e.sent,e.next=9,n.queryAll(n.all(_.a));case 9:if(s=e.sent,u=new Set(r.autogroups.processedAccounts),M("info","Number of accounts already processed by autogroups: ".concat(u.size)),0!==(c=s.filter(function(e){return!u.has(e._id)})).length){e.next=16;break}return M("info","No accounts to process for autogroups, bailing out."),e.abrupt("return");case 16:l=y()(o.filter(P),R),f=T(c,{virtual:!1,client:n}),d=!0,p=!1,h=void 0,e.prev=21,v=f[Symbol.iterator]();case 23:if(d=(g=v.next()).done){e.next=45;break}if(m=g.value,x=m.accountType,!(k=l[x])){e.next=39;break}if(M("info","Automatic group for ".concat(x," accounts is already created")),!((O=b()(m.accounts.raw,k.accounts)).length>0)){e.next=36;break}return M("info","Saving ".concat(O.length," to group ").concat(x)),e.next=34,n.save(a()({},m,{_rev:k._rev,_id:k._id}));case 34:e.next=37;break;case 36:M("info","Nothing changed for group ".concat(x));case 37:e.next=42;break;case 39:return M("info","Creating automatic group for ".concat(x," accounts (").concat(m.accounts.target.accounts.length," account)")),e.next=42,n.save(m);case 42:d=!0,e.next=23;break;case 45:e.next=51;break;case 47:e.prev=47,e.t0=e.catch(21),p=!0,h=e.t0;case 51:e.prev=51,e.prev=52,d||null==v.return||v.return();case 54:if(e.prev=54,!p){e.next=57;break}throw h;case 57:return e.finish(54);case 58:return e.finish(51);case 59:return S=new Set(c.map(function(e){return e._id})),r.autogroups.processedAccounts=Array.from(I(u,S)),e.next=63,Object(w.c)(n,r);case 63:case"end":return e.stop()}},e,null,[[21,47,51,59],[52,,54,58]])}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=u()(i.a.mark(function e(t){var n,r,o,a,s,u,c,l,f,d,p,h,v,y,g;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,e.next=3,n.queryAll(n.all(_.c));case 3:r=e.sent,o=r.filter(P),M("info","".concat(o.length," autogroups (").concat(r.length," groups in total)")),a=!0,s=!1,u=void 0,e.prev=9,c=o[Symbol.iterator]();case 11:if(a=(l=c.next()).done){e.next=36;break}for(f=l.value,M("info","".concat(f.label," (_id: ").concat(f._id,")")),d=!0,p=!1,h=void 0,e.prev=17,v=f.accounts[Symbol.iterator]();!(d=(y=v.next()).done);d=!0)g=y.value,M("info","  ".concat(g));e.next=25;break;case 21:e.prev=21,e.t0=e.catch(17),p=!0,h=e.t0;case 25:e.prev=25,e.prev=26,d||null==v.return||v.return();case 28:if(e.prev=28,!p){e.next=31;break}throw h;case 31:return e.finish(28);case 32:return e.finish(25);case 33:a=!0,e.next=11;break;case 36:e.next=42;break;case 38:e.prev=38,e.t1=e.catch(9),s=!0,u=e.t1;case 42:e.prev=42,e.prev=43,a||null==c.return||c.return();case 45:if(e.prev=45,!s){e.next=48;break}throw u;case 48:return e.finish(45);case 49:return e.finish(42);case 50:case"end":return e.stop()}},e,null,[[9,38,42,50],[17,21,25,33],[26,,28,32],[43,,45,49]])}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=u()(i.a.mark(function e(t){var n,r,o,a,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.client,e.next=3,n.query(n.all(_.c,{limit:null}));case 3:return r=e.sent,o=r.data,a=(a=o.filter(P)).map(function(e){return h()(e,"_type")}),s=n.collection(_.c),e.next=10,s.destroyAll(a);case 10:M("info","Destroyed ".concat(a.length," autogroups"));case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();(function(){var e=u()(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=l.a.ArgumentParser({description:"Service to create groups based on bank account types"})).addArgument("mode",{optional:!0,nargs:"?",choices:["list","purge","create"]}),"list"!==(n=t.parseArgs()).mode){e.next=8;break}return e.next=6,Object(g.a)(N);case 6:e.next=16;break;case 8:if("purge"!=n.mode){e.next=13;break}return e.next=11,Object(g.a)(L);case 11:e.next=16;break;case 13:if("create"!=n.mode&&n.mode){e.next=16;break}return e.next=16,Object(g.a)(D);case 16:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}]);